!function(t){var e,i=/^\s*|\s*$/g,n="$1"==="B".replace(/A(.)|B/,"$1"),s={majorVersion:"3",minorVersion:"4.6",releaseDate:"2011-09-29",_init:function(){function e(t){return t.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(t.src)?(/_(src|dev)\.js/g.test(t.src)&&(l.suffix="_src"),-1!=(r=t.src.indexOf("?"))&&(l.query=t.src.substring(r+1)),l.baseURL=t.src.substring(0,t.src.lastIndexOf("/")),o&&-1==l.baseURL.indexOf("://")&&0!==l.baseURL.indexOf("/")&&(l.baseURL=o+l.baseURL),l.baseURL):null}var i,n,s,o,r,a,l=this,u=document,h=navigator,c=h.userAgent;if(l.isOpera=t.opera&&opera.buildNumber,l.isWebKit=/WebKit/.test(c),l.isIE=!l.isWebKit&&!l.isOpera&&/MSIE/gi.test(c)&&/Explorer/gi.test(h.appName),l.isIE6=l.isIE&&/MSIE [56]/.test(c),l.isIE7=l.isIE&&/MSIE [7]/.test(c),l.isIE8=l.isIE&&/MSIE [8]/.test(c),l.isIE9=l.isIE&&/MSIE [9]/.test(c),l.isGecko=!l.isWebKit&&/Gecko/.test(c),l.isMac=-1!=c.indexOf("Mac"),l.isAir=/adobeair/i.test(c),l.isIDevice=/(iPad|iPhone)/.test(c),l.isIOS5=l.isIDevice&&c.match(/AppleWebKit\/(\d*)/)[1]>=534,t.tinyMCEPreInit)return l.suffix=tinyMCEPreInit.suffix,l.baseURL=tinyMCEPreInit.base,l.query=tinyMCEPreInit.query,void 0;for(l.suffix="",n=u.getElementsByTagName("base"),i=0;i<n.length;i++)(a=n[i].href)&&(/^https?:\/\/[^\/]+$/.test(a)&&(a+="/"),o=a?a.match(/.*\//)[0]:"");for(n=u.getElementsByTagName("script"),i=0;i<n.length;i++)if(e(n[i]))return;if(s=u.getElementsByTagName("head")[0])for(n=s.getElementsByTagName("script"),i=0;i<n.length;i++)if(e(n[i]))return},is:function(t,i){return i?"array"==i&&t.hasOwnProperty&&t instanceof Array?!0:typeof t==i:t!==e},makeMap:function(t,e,i){var n;for(t=t||[],e=e||",","string"==typeof t&&(t=t.split(e)),i=i||{},n=t.length;n--;)i[t[n]]={};return i},each:function(t,i,n){var s,o;if(!t)return 0;if(n=n||t,t.length!==e){for(s=0,o=t.length;o>s;s++)if(i.call(n,t[s],s,t)===!1)return 0}else for(s in t)if(t.hasOwnProperty(s)&&i.call(n,t[s],s,t)===!1)return 0;return 1},map:function(t,e){var i=[];return s.each(t,function(t){i.push(e(t))}),i},grep:function(t,e){var i=[];return s.each(t,function(t){(!e||e(t))&&i.push(t)}),i},inArray:function(t,e){var i,n;if(t)for(i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1},extend:function(t,i){var n,o,r=arguments;for(n=1,o=r.length;o>n;n++)i=r[n],s.each(i,function(i,n){i!==e&&(t[n]=i)});return t},trim:function(t){return(t?""+t:"").replace(i,"")},create:function(t,e,i){var n,s,o,r,a,l=this,u=0;if(t=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(t),o=t[3].match(/(^|\.)(\w+)$/i)[2],s=l.createNS(t[3].replace(/\.\w+$/,""),i),!s[o]){if("static"==t[2])return s[o]=e,this.onCreate&&this.onCreate(t[2],t[3],s[o]),void 0;e[o]||(e[o]=function(){},u=1),s[o]=e[o],l.extend(s[o].prototype,e),t[5]&&(n=l.resolve(t[5]).prototype,r=t[5].match(/\.(\w+)$/i)[1],a=s[o],s[o]=u?function(){return n[r].apply(this,arguments)}:function(){return this.parent=n[r],a.apply(this,arguments)},s[o].prototype[o]=s[o],l.each(n,function(t,e){s[o].prototype[e]=n[e]}),l.each(e,function(t,e){n[e]?s[o].prototype[e]=function(){return this.parent=n[e],t.apply(this,arguments)}:e!=o&&(s[o].prototype[e]=t)})),l.each(e["static"],function(t,e){s[o][e]=t}),this.onCreate&&this.onCreate(t[2],t[3],s[o].prototype)}},walk:function(t,e,i,n){n=n||this,t&&(i&&(t=t[i]),s.each(t,function(t,o){return e.call(n,t,o,i)===!1?!1:(s.walk(t,e,i,n),void 0)}))},createNS:function(e,i){var n,s;for(i=i||t,e=e.split("."),n=0;n<e.length;n++)s=e[n],i[s]||(i[s]={}),i=i[s];return i},resolve:function(e,i){var n,s;for(i=i||t,e=e.split("."),n=0,s=e.length;s>n&&(i=i[e[n]],i);n++);return i},addUnload:function(e,i){function n(){var e,i,r=o.unloads;if(r){for(i in r)e=r[i],e&&e.func&&e.func.call(e.scope,1);t.detachEvent?(t.detachEvent("onbeforeunload",s),t.detachEvent("onunload",n)):t.removeEventListener&&t.removeEventListener("unload",n,!1),o.unloads=e=r=w=n=0,t.CollectGarbage&&CollectGarbage()}}function s(){function e(){i.detachEvent("onstop",e),n&&n(),i=0}var i=document;"interactive"==i.readyState&&(i&&i.attachEvent("onstop",e),t.setTimeout(function(){i&&i.detachEvent("onstop",e)},0))}var o=this;return e={func:e,scope:i||this},o.unloads?o.unloads.push(e):(t.attachEvent?(t.attachEvent("onunload",n),t.attachEvent("onbeforeunload",s)):t.addEventListener&&t.addEventListener("unload",n,!1),o.unloads=[e]),e},removeUnload:function(t){var e=this.unloads,i=null;return s.each(e,function(n,s){return n&&n.func==t?(e.splice(s,1),i=t,!1):void 0}),i},explode:function(t,e){return t?s.map(t.split(e||","),s.trim):t},_addVer:function(t){var e;return this.query?(e=(-1==t.indexOf("?")?"?":"&")+this.query,-1==t.indexOf("#")?t+e:t.replace("#",e+"#")):t},_replace:function(t,i,s){return n?s.replace(t,function(){var t,n=i,s=arguments;for(t=0;t<s.length-2;t++)n=s[t]===e?n.replace(new RegExp("\\$"+t,"g"),""):n.replace(new RegExp("\\$"+t,"g"),s[t]);return n}):s.replace(t,i)}};s._init(),t.tinymce=t.tinyMCE=s}(window),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(t){this.scope=t||this,this.listeners=[]},add:function(t,e){return this.listeners.push({cb:t,scope:e||this.scope}),t},addToTop:function(t,e){return this.listeners.unshift({cb:t,scope:e||this.scope}),t},remove:function(t){var e=this.listeners,i=null;return tinymce.each(e,function(n,s){return t==n.cb?(i=t,e.splice(s,1),!1):void 0}),i},dispatch:function(){var t,e,i,n=arguments,s=this.listeners;for(e=0;e<s.length&&(i=s[e],t=i.cb.apply(i.scope,n),t!==!1);e++);return t}}),function(){var t=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(e,i){var n,s,o=this;return e=tinymce.trim(e),i=o.settings=i||{},/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)?(o.source=e,void 0):(0===e.indexOf("/")&&0!==e.indexOf("//")&&(e=(i.base_uri?i.base_uri.protocol||"http":"http")+"://mce_host"+e),/^[\w-]*:?\/\//.test(e)||(s=i.base_uri?i.base_uri.path:new tinymce.util.URI(location.href).directory,e=(i.base_uri&&i.base_uri.protocol||"http")+"://mce_host"+o.toAbsPath(s,e)),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),t(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(t,i){var n=e[i];n&&(n=n.replace(/\(mce_at\)/g,"@@")),o[t]=n}),(n=i.base_uri)&&(o.protocol||(o.protocol=n.protocol),o.userInfo||(o.userInfo=n.userInfo),o.port||"mce_host"!=o.host||(o.port=n.port),o.host&&"mce_host"!=o.host||(o.host=n.host),o.source=""),void 0)},setPath:function(t){var e=this;t=/^(.*?)\/?(\w+)?$/.exec(t),e.path=t[0],e.directory=t[1],e.file=t[2],e.source="",e.getURI()},toRelative:function(t){var e,i=this;return"./"===t?t:(t=new tinymce.util.URI(t,{base_uri:i}),"mce_host"!=t.host&&i.host!=t.host&&t.host||i.port!=t.port||i.protocol!=t.protocol?t.getURI():(e=i.toRelPath(i.path,t.path),t.query&&(e+="?"+t.query),t.anchor&&(e+="#"+t.anchor),e))},toAbsolute:function(t,e){var t=new tinymce.util.URI(t,{base_uri:this});return t.getURI(this.host==t.host&&this.protocol==t.protocol?e:0)},toRelPath:function(t,e){var i,n,s,o=0,r="";if(t=t.substring(0,t.lastIndexOf("/")),t=t.split("/"),i=e.split("/"),t.length>=i.length)for(n=0,s=t.length;s>n;n++)if(n>=i.length||t[n]!=i[n]){o=n+1;break}if(t.length<i.length)for(n=0,s=i.length;s>n;n++)if(n>=t.length||t[n]!=i[n]){o=n+1;break}if(1==o)return e;for(n=0,s=t.length-(o-1);s>n;n++)r+="../";for(n=o-1,s=i.length;s>n;n++)r+=n!=o-1?"/"+i[n]:i[n];return r},toAbsPath:function(e,i){var n,s,o,r=0,a=[];for(s=/\/$/.test(i)?"/":"",e=e.split("/"),i=i.split("/"),t(e,function(t){t&&a.push(t)}),e=a,n=i.length-1,a=[];n>=0;n--)0!=i[n].length&&"."!=i[n]&&(".."!=i[n]?r>0?r--:a.push(i[n]):r++);return n=e.length-r,o=0>=n?a.reverse().join("/"):e.slice(0,n).join("/")+"/"+a.reverse().join("/"),0!==o.indexOf("/")&&(o="/"+o),s&&o.lastIndexOf("/")!==o.length-1&&(o+=s),o},getURI:function(t){var e,i=this;return(!i.source||t)&&(e="",t||(i.protocol&&(e+=i.protocol+"://"),i.userInfo&&(e+=i.userInfo+"@"),i.host&&(e+=i.host),i.port&&(e+=":"+i.port)),i.path&&(e+=i.path),i.query&&(e+="?"+i.query),i.anchor&&(e+="#"+i.anchor),i.source=e),i.source}})}(),function(){var t=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(e){var i,n=this.get(e);return n&&t(n.split("&"),function(t){t=t.split("="),i=i||{},i[unescape(t[0])]=unescape(t[1])}),i},setHash:function(e,i,n,s,o,r){var a="";t(i,function(t,e){a+=(a?"&":"")+escape(e)+"="+escape(t)}),this.set(e,a,n,s,o,r)},get:function(t){var e,i,n=document.cookie,s=t+"=";if(n){if(i=n.indexOf("; "+s),-1==i){if(i=n.indexOf(s),0!=i)return null}else i+=2;return e=n.indexOf(";",i),-1==e&&(e=n.length),unescape(n.substring(i+s.length,e))}},set:function(t,e,i,n,s,o){document.cookie=t+"="+escape(e)+(i?"; expires="+i.toGMTString():"")+(n?"; path="+escape(n):"")+(s?"; domain="+s:"")+(o?"; secure":"")},remove:function(t,e){var i=new Date;i.setTime(i.getTime()-1e3),this.set(t,"",i,e,i)}})}(),function(){function serialize(t,e){var i,n,s;if(e=e||'"',null==t)return"null";if(s=typeof t,"string"==s)return n="\bb	t\nn\ff\rr\"\"''\\\\",e+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(t,s){return'"'===e&&"'"===t?t:(i=n.indexOf(s),i+1?"\\"+n.charAt(i+1):(t=s.charCodeAt().toString(16),"\\u"+"0000".substring(t.length)+t))})+e;if("object"==s){if(t.hasOwnProperty&&t instanceof Array){for(i=0,n="[";i<t.length;i++)n+=(i>0?",":"")+serialize(t[i],e);return n+"]"}n="{";for(i in t)n+="function"!=typeof t[i]?(n.length>1?","+e:e)+i+e+":"+serialize(t[i],e):"";return n+"}"}return""+t}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(t){function e(t){n=0;try{n=new ActiveXObject(t)}catch(e){}return n}function i(){!t.async||4==n.readyState||r++>1e4?(t.success&&1e4>r&&200==n.status?t.success.call(t.success_scope,""+n.responseText,n,t):t.error&&t.error.call(t.error_scope,r>1e4?"TIMED_OUT":"GENERAL",n,t),n=null):o.setTimeout(i,10)}var n,s,o=window,r=0;if(t.scope=t.scope||this,t.success_scope=t.success_scope||t.scope,t.error_scope=t.error_scope||t.scope,t.async=t.async===!1?!1:!0,t.data=t.data||"",n=o.XMLHttpRequest?new XMLHttpRequest:e("Microsoft.XMLHTTP")||e("Msxml2.XMLHTTP")){if(n.overrideMimeType&&n.overrideMimeType(t.content_type),n.open(t.type||(t.data?"POST":"GET"),t.url,t.async),t.content_type&&n.setRequestHeader("Content-Type",t.content_type),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(t.data),!t.async)return i();s=o.setTimeout(i,10)}}}),function(){var t=tinymce.extend,e=tinymce.util.JSON,i=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(e){this.settings=t({},e),this.count=0},send:function(n){var s=n.error,o=n.success;n=t(this.settings,n),n.success=function(t,i){t=e.parse(t),"undefined"==typeof t&&(t={error:"JSON Parse error."}),t.error?s.call(n.error_scope||n.scope,t.error,i):o.call(n.success_scope||n.scope,t.result)},n.error=function(t,e){s&&s.call(n.error_scope||n.scope,t,e)},n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",i.send(n)},"static":{sendRPC:function(t){return(new tinymce.util.JSONRequest).send(t)}}})}(),function(t){t.VK={DELETE:46,BACKSPACE:8}}(tinymce),function(t){function e(e){var i=e.dom,n=e.selection;e.onKeyDown.add(function(e,s){var o,r,u,h,c;if(c=s.keyCode==l,c||s.keyCode==a){if(s.preventDefault(),o=n.getRng(),r=i.getParent(o.startContainer,i.isBlock),c&&(r=i.getNext(r,i.isBlock)),r){for(u=r.firstChild;3==u.nodeType&&0==u.nodeValue.length;)u=u.nextSibling;u&&"SPAN"===u.nodeName&&(h=u.cloneNode(!1))}e.getDoc().execCommand(c?"ForwardDelete":"Delete",!1,null),r=i.getParent(o.startContainer,i.isBlock),t.each(i.select("span.Apple-style-span,font.Apple-style-span",r),function(t){var e=n.getBookmark();h?i.replace(h.cloneNode(!1),t,!0):i.remove(t,!0),n.moveToBookmark(e)})}})}function i(t){t.onKeyUp.add(function(t,e){var i=e.keyCode;return i!=l&&i!=a||!t.dom.isEmpty(t.getBody())?void 0:(t.setContent("",{format:"raw"}),t.nodeChanged(),void 0)})}function n(t){t.dom.bind(t.getDoc(),"focusin",function(){t.selection.setRng(t.selection.getRng())})}function s(t){Range.prototype.getClientRects||t.onMouseDown.add(function(t,e){if("HTML"===e.target.nodeName){var i=t.getBody();i.blur(),setTimeout(function(){i.focus()},0)}})}function o(t){t.onClick.add(function(t,e){e=e.target,/^(IMG|HR)$/.test(e.nodeName)&&t.selection.getSel().setBaseAndExtent(e,0,e,1),"A"==e.nodeName&&t.dom.hasClass(e,"mceItemAnchor")&&t.selection.select(e),t.nodeChanged()})}var r=t.VK,a=r.BACKSPACE,l=r.DELETE;t.create("tinymce.util.Quirks",{Quirks:function(r){t.isWebKit&&(e(r),i(r),n(r),o(r)),t.isIE&&i(r),t.isGecko&&s(r)}})}(tinymce),function(t){function e(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.textContent||e.innerText||t}function i(t,e){var i,n,o,r={};if(t){for(t=t.split(","),e=e||10,i=0;i<t.length;i+=2)n=String.fromCharCode(parseInt(t[i],e)),s[n]||(o="&"+t[i+1]+";",r[n]=o,r[o]=n);return r}}var n,s,o,r=/[&<>\"\u007E-\uD7FF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=/[<>&\u007E-\uD7FF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[<>&\"\']/g,u=/&(#x|#)?([\w]+);/g,h={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};s={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},o={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},n=i("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),t.html=t.html||{},t.html.Entities={encodeRaw:function(t,e){return t.replace(e?r:a,function(t){return s[t]||t})},encodeAllRaw:function(t){return(""+t).replace(l,function(t){return s[t]||t})},encodeNumeric:function(t,e){return t.replace(e?r:a,function(t){return t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":s[t]||"&#"+t.charCodeAt(0)+";"})},encodeNamed:function(t,e,i){return i=i||n,t.replace(e?r:a,function(t){return s[t]||i[t]||t})},getEncodeFunc:function(e,o){function l(t,e){return t.replace(e?r:a,function(t){return s[t]||o[t]||"&#"+t.charCodeAt(0)+";"||t})}function u(t,e){return h.encodeNamed(t,e,o)}var h=t.html.Entities;return o=i(o)||n,e=t.makeMap(e.replace(/\+/g,",")),e.named&&e.numeric?l:e.named?o?u:h.encodeNamed:e.numeric?h.encodeNumeric:h.encodeRaw},decode:function(t){return t.replace(u,function(t,i,s){return i?(s=parseInt(s,2===i.length?16:10),s>65535?(s-=65536,String.fromCharCode(55296+(s>>10),56320+(1023&s))):h[s]||String.fromCharCode(s)):o[t]||n[t]||e(t)})}}}(tinymce),tinymce.html.Styles=function(t,e){function i(t,e,i,n){function s(t){return t=parseInt(t).toString(16),t.length>1?t:"0"+t}return"#"+s(e)+s(i)+s(n)}var n,s,o,r=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,a=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,l=/\s*([^:]+):\s*([^;]+);?/g,u=/\s+$/,h={};for(t=t||{},o="\\\" \\' \\; \\: ; : ﻿".split(" "),s=0;s<o.length;s++)h[o[s]]="﻿"+s,h["﻿"+s]=o[s];return{toHex:function(t){return t.replace(r,i)},parse:function(e){function n(t,e){var i,n,s,o;i=v[t+"-top"+e],i&&(n=v[t+"-right"+e],i==n&&(s=v[t+"-bottom"+e],n==s&&(o=v[t+"-left"+e],s==o&&(v[t+e]=o,delete v[t+"-top"+e],delete v[t+"-right"+e],delete v[t+"-bottom"+e],delete v[t+"-left"+e]))))}function s(t){var e,i=v[t];if(i&&!(i.indexOf(" ")<0)){for(i=i.split(" "),e=i.length;e--;)if(i[e]!==i[0])return!1;return v[t]=i[0],!0}}function o(t,e,i,n){s(e)&&s(i)&&s(n)&&(v[t]=v[e]+" "+v[i]+" "+v[n],delete v[e],delete v[i],delete v[n])}function c(t){return m=!0,h[t]}function d(t,e){return m&&(t=t.replace(/\uFEFF[0-9]/g,function(t){return h[t]})),e||(t=t.replace(/\\([\'\";:])/g,"$1")),t}var f,p,g,m,v={},y=t.url_converter,b=t.url_converter_scope||this;if(e){for(e=e.replace(/\\[\"\';:\uFEFF]/g,c).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(t){return t.replace(/[;:]/g,c)});f=l.exec(e);)p=f[1].replace(u,"").toLowerCase(),g=f[2].replace(u,""),p&&g.length>0&&("font-weight"===p&&"700"===g?g="bold":("color"===p||"background-color"===p)&&(g=g.toLowerCase()),g=g.replace(r,i),g=g.replace(a,function(t,e,i,n,s,o){return(s=s||o)?(s=d(s),"'"+s.replace(/\'/g,"\\'")+"'"):(e=d(e||i||n),y&&(e=y.call(b,e,"style")),"url('"+e.replace(/\'/g,"\\'")+"')")}),v[p]=m?d(g,!0):g),l.lastIndex=f.index+f[0].length;n("border",""),n("border","-width"),n("border","-color"),n("border","-style"),n("padding",""),n("margin",""),o("border","border-width","border-style","border-color"),"medium none"===v.border&&delete v.border}return v},serialize:function(t,i){function s(i){var s,o,r,l;if(s=e.styles[i])for(o=0,r=s.length;r>o;o++)i=s[o],l=t[i],l!==n&&l.length>0&&(a+=(a.length>0?" ":"")+i+": "+l+";")}var o,r,a="";if(i&&e&&e.styles)s("*"),s(i);else for(o in t)r=t[o],r!==n&&r.length>0&&(a+=(a.length>0?" ":"")+o+": "+r+";");return a}}},function(t){function e(t,e){return t.split(e||",")}function i(t,i){function n(e){return e.replace(/[A-Z]+/g,function(e){return n(t[e])})}var s,o={};for(s in t)t.hasOwnProperty(s)&&(t[s]=n(t[s]));return n(i).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(t,i,n,s){n=e(n,"|"),o[i]={attributes:c(n),attributesOrder:n,children:c(s,"|",{"#comment":{}})}}),o}var n,s,o,r,a,l,u={},h={},c=t.makeMap,d=t.each;s="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup",s=c(s,",",c(s.toUpperCase())),u=i({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]"),n=c("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls"),o=c("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source"),r=t.extend(c("td,th,iframe,video,audio,object"),o),a=c("pre,script,style,textarea"),l=c("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),t.html.Schema=function(i){function f(t){return new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$")}function p(i){var n,s,o,r,a,l,u,h,d,p,g,m,v,y,b,_,w,x,C,T=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,k=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,S=/[*?+]/;if(i)for(i=e(i),A["@"]&&(_=A["@"].attributes,w=A["@"].attributesOrder),n=0,s=i.length;s>n;n++)if(a=T.exec(i[n])){if(y=a[1],d=a[2],b=a[3],h=a[4],m={},v=[],l={attributes:m,attributesOrder:v},"#"===y&&(l.paddEmpty=!0),"-"===y&&(l.removeEmpty=!0),_){for(x in _)m[x]=_[x];v.push.apply(v,w)}if(h)for(h=e(h,"|"),o=0,r=h.length;r>o;o++)if(a=k.exec(h[o])){if(u={},g=a[1],p=a[2].replace(/::/g,":"),y=a[3],C=a[4],"!"===g&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(p),u.required=!0),"-"===g){delete m[p],v.splice(t.inArray(v,p),1);continue}y&&("="===y&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:p,value:C}),u.defaultValue=C),":"===y&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:p,value:C}),u.forcedValue=C),"<"===y&&(u.validValues=c(C,"?"))),S.test(p)?(l.attributePatterns=l.attributePatterns||[],u.pattern=f(p),l.attributePatterns.push(u)):(m[p]||v.push(p),m[p]=u)}_||"@"!=d||(_=m,w=v),b&&(l.outputName=d,A[b]=l),S.test(d)?(l.pattern=f(d),j.push(l)):A[d]=l}}function g(t){A={},j=[],p(t),d(u,function(t,e){x[e]=t.children})}function m(t){var i=/^(~)?(.+)$/;t&&d(e(t),function(t){var e=i.exec(t),n="~"===e[1],o=n?"span":"div",r=e[2];x[r]=x[o],h[r]=o,n||(s[r]={}),d(x,function(t){t[o]&&(t[r]=t[o])})})}function v(t){var i=/^([+\-]?)(\w+)\[([^\]]+)\]$/;t&&d(e(t),function(t){var n,s,o=i.exec(t);o&&(s=o[1],n=s?x[o[2]]:x[o[2]]={"#comment":{}},n=x[o[2]],d(e(o[3],"|"),function(t){"-"===s?delete n[t]:n[t]={}}))})}function y(t){var e,i=A[t];if(i)return i;for(e=j.length;e--;)if(i=j[e],i.pattern.test(t))return i}var b,_,w=this,A={},x={},j=[];i=i||{},i.verify_html===!1&&(i.valid_elements="*[*]"),i.valid_styles&&(b={},d(i.valid_styles,function(e,i){b[i]=t.explode(e)})),_=i.whitespace_elements?c(i.whitespace_elements):a,i.valid_elements?g(i.valid_elements):(d(u,function(t,e){A[e]={attributes:t.attributes,attributesOrder:t.attributesOrder},x[e]=t.children}),d(e("strong/b,em/i"),function(t){t=e(t,"/"),A[t[1]].outputName=t[0]}),A.img.attributesDefault=[{name:"alt",value:""}],d(e("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(t){A[t].removeEmpty=!0}),d(e("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(t){A[t].paddEmpty=!0})),m(i.custom_elements),v(i.valid_children),p(i.extended_valid_elements),v("+ol[ul|ol],+ul[ul|ol]"),y("span")||p("span[!data-mce-type|*]"),i.invalid_elements&&t.each(t.explode(i.invalid_elements),function(t){A[t]&&delete A[t]}),w.children=x,w.styles=b,w.getBoolAttrs=function(){return n},w.getBlockElements=function(){return s},w.getShortEndedElements=function(){return o},w.getSelfClosingElements=function(){return l},w.getNonEmptyElements=function(){return r},w.getWhiteSpaceElements=function(){return _},w.isValidChild=function(t,e){var i=x[t];return!(!i||!i[e])},w.getElementRule=y,w.getCustomElements=function(){return h},w.addValidElements=p,w.setValidElements=g,w.addCustomElements=m,w.addValidChildren=v},t.html.Schema.boolAttrMap=n,t.html.Schema.blockElementsMap=s}(tinymce),function(t){t.html.SaxParser=function(e,i){var n=this,s=function(){};e=e||{},n.schema=i=i||new t.html.Schema,e.fix_self_closing!==!1&&(e.fix_self_closing=!0),t.each("comment cdata text start end pi doctype".split(" "),function(t){t&&(n[t]=e[t]||s)}),n.parse=function(n){function s(t){var e,i;for(e=O.length;e--&&O[e].name!==t;);if(e>=0){for(i=O.length-1;i>=e;i--)t=O[i],t.valid&&B.end(t.name);O.length=e}}var o,r,a,l,u,h,c,d,f,p,g,m,v,y,b,_,w,A,x,j,C,T,k,S,E,D,M,N,I,P,B=this,L=0,O=[],R=0,F=t.html.Entities.decode;for(E=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)\\s*((?:[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*)>))","g"),D=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g,M={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},p=i.getShortEndedElements(),S=i.getSelfClosingElements(),g=i.getBoolAttrs(),v=e.validate,f=e.remove_internals,I=e.fix_self_closing,P=t.isIE,A=/^:/;o=E.exec(n);){if(L<o.index&&B.text(F(n.substr(L,o.index-L))),r=o[6])r=r.toLowerCase(),P&&A.test(r)&&(r=r.substr(1)),s(r);else if(r=o[7]){if(r=r.toLowerCase(),P&&A.test(r)&&(r=r.substr(1)),m=r in p,I&&S[r]&&O.length>0&&O[O.length-1].name===r&&s(r),!v||(y=i.getElementRule(r))){if(b=!0,v&&(x=y.attributes,j=y.attributePatterns),(w=o[8])?(d=-1!==w.indexOf("data-mce-type"),d&&f&&(b=!1),l=[],l.map={},w.replace(D,function(t,e,i,n,s){var o,r;if(e=e.toLowerCase(),i=e in g?e:F(i||n||s||""),v&&!d&&0!==e.indexOf("data-")){if(o=x[e],!o&&j){for(r=j.length;r--&&(o=j[r],!o.pattern.test(e)););-1===r&&(o=null)}if(!o)return;if(o.validValues&&!(i in o.validValues))return}l.map[e]=i,l.push({name:e,value:i})})):(l=[],l.map={}),v&&!d){if(C=y.attributesRequired,T=y.attributesDefault,k=y.attributesForced)for(u=k.length;u--;)_=k[u],c=_.name,N=_.value,"{$uid}"===N&&(N="mce_"+R++),l.map[c]=N,l.push({name:c,value:N});if(T)for(u=T.length;u--;)_=T[u],c=_.name,c in l.map||(N=_.value,"{$uid}"===N&&(N="mce_"+R++),l.map[c]=N,l.push({name:c,value:N}));if(C){for(u=C.length;u--&&!(C[u]in l.map););-1===u&&(b=!1)}l.map["data-mce-bogus"]&&(b=!1)}b&&B.start(r,l,m)}else b=!1;if(a=M[r]){a.lastIndex=L=o.index+o[0].length,(o=a.exec(n))?(b&&(h=n.substr(L,o.index-L)),L=o.index+o[0].length):(h=n.substr(L),L=n.length),b&&h.length>0&&B.text(h,!0),b&&B.end(r),E.lastIndex=L;continue}m||(w&&w.indexOf("/")==w.length-1?b&&B.end(r):O.push({name:r,valid:b}))}else(r=o[1])?B.comment(r):(r=o[2])?B.cdata(r):(r=o[3])?B.doctype(r):(r=o[4])&&B.pi(r,o[5]);L=o.index+o[0].length}for(L<n.length&&B.text(F(n.substr(L))),u=O.length-1;u>=0;u--)r=O[u],r.valid&&B.end(r.name)}}}(tinymce),function(t){function e(t,e,i){var n,s,o=i?"lastChild":"firstChild",r=i?"prev":"next";if(t[o])return t[o];if(t!==e){if(n=t[r])return n;for(s=t.parent;s&&s!==e;s=s.parent)if(n=s[r])return n}}function i(t,e){this.name=t,this.type=e,1===e&&(this.attributes=[],this.attributes.map={})}var n=/^[ \t\r\n]*$/,s={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};t.extend(i.prototype,{replace:function(t){var e=this;return t.parent&&t.remove(),e.insert(t,e),e.remove(),e},attr:function(t,e){var i,n,s,o=this;if("string"!=typeof t){for(n in t)o.attr(n,t[n]);return o}if(i=o.attributes){if(e!==s){if(null===e){if(t in i.map)for(delete i.map[t],n=i.length;n--;)if(i[n].name===t)return i=i.splice(n,1),o;return o}if(t in i.map){for(n=i.length;n--;)if(i[n].name===t){i[n].value=e;break}}else i.push({name:t,value:e});return i.map[t]=e,o}return i.map[t]}},clone:function(){var t,e,n,s,o,r=this,a=new i(r.name,r.type);if(n=r.attributes){for(o=[],o.map={},t=0,e=n.length;e>t;t++)s=n[t],"id"!==s.name&&(o[o.length]={name:s.name,value:s.value},o.map[s.name]=s.value);a.attributes=o}return a.value=r.value,a.shortEnded=r.shortEnded,a},wrap:function(t){var e=this;return e.parent.insert(t,e),t.append(e),e},unwrap:function(){var t,e,i=this;for(t=i.firstChild;t;)e=t.next,i.insert(t,i,!0),t=e;i.remove()},remove:function(){var t=this,e=t.parent,i=t.next,n=t.prev;return e&&(e.firstChild===t?(e.firstChild=i,i&&(i.prev=null)):n.next=i,e.lastChild===t?(e.lastChild=n,n&&(n.next=null)):i.prev=n,t.parent=t.next=t.prev=null),t},append:function(t){var e,i=this;return t.parent&&t.remove(),e=i.lastChild,e?(e.next=t,t.prev=e,i.lastChild=t):i.lastChild=i.firstChild=t,t.parent=i,t},insert:function(t,e,i){var n;return t.parent&&t.remove(),n=e.parent||this,i?(e===n.firstChild?n.firstChild=t:e.prev.next=t,t.prev=e.prev,t.next=e,e.prev=t):(e===n.lastChild?n.lastChild=t:e.next.prev=t,t.next=e.next,t.prev=e,e.next=t),t.parent=n,t},getAll:function(t){var i,n=this,s=[];for(i=n.firstChild;i;i=e(i,n))i.name===t&&s.push(i);return s},empty:function(){var t,i,n,s=this;if(s.firstChild){for(t=[],n=s.firstChild;n;n=e(n,s))t.push(n);for(i=t.length;i--;)n=t[i],n.parent=n.firstChild=n.lastChild=n.next=n.prev=null}return s.firstChild=s.lastChild=null,s},isEmpty:function(t){var i,s,o=this,r=o.firstChild;if(r)do{if(1===r.type){if(r.attributes.map["data-mce-bogus"])continue;if(t[r.name])return!1;for(i=r.attributes.length;i--;)if(s=r.attributes[i].name,"name"===s||0===s.indexOf("data-"))return!1}if(3===r.type&&!n.test(r.value))return!1}while(r=e(r,o));return!0},walk:function(t){return e(this,null,t)}}),t.extend(i,{create:function(t,e){var n,o;if(n=new i(t,s[t]||1),e)for(o in e)n.attr(o,e[o]);return n}}),t.html.Node=i}(tinymce),function(t){var e=t.html.Node;t.html.DomParser=function(i,n){function s(i){var s,r,a,l,u,h,c,d,f,p,g,m,v;for(g=t.makeMap("tr,td,th,tbody,thead,tfoot,table"),p=n.getNonEmptyElements(),s=0;s<i.length;s++)if(r=i[s],r.parent){for(l=[r],a=r.parent;a&&!n.isValidChild(a.name,r.name)&&!g[a.name];a=a.parent)l.push(a);if(a&&l.length>1){for(l.reverse(),u=h=o.filterNode(l[0].clone()),f=0;f<l.length-1;f++){for(n.isValidChild(h.name,l[f].name)?(c=o.filterNode(l[f].clone()),h.append(c)):c=h,d=l[f].firstChild;d&&d!=l[f+1];)v=d.next,c.append(d),d=v;
h=c}u.isEmpty(p)?a.insert(r,l[0],!0):(a.insert(u,l[0],!0),a.insert(r,u)),a=l[0],(a.isEmpty(p)||a.firstChild===a.lastChild&&"br"===a.firstChild.name)&&a.empty().remove()}else if(r.parent){if("li"===r.name){if(m=r.prev,m&&("ul"===m.name||"ul"===m.name)){m.append(r);continue}if(m=r.next,m&&("ul"===m.name||"ul"===m.name)){m.insert(r,m.firstChild,!0);continue}r.wrap(o.filterNode(new e("ul",1)));continue}n.isValidChild(r.parent.name,"div")&&n.isValidChild("div",r.name)?r.wrap(o.filterNode(new e("div",1))):"style"===r.name||"script"===r.name?r.empty().remove():r.unwrap()}}}var o=this,r={},a=[],l={},u={};i=i||{},i.validate="validate"in i?i.validate:!0,i.root_name=i.root_name||"body",o.schema=n=n||new t.html.Schema,o.filterNode=function(t){var e,i,n;i in r&&(n=l[i],n?n.push(t):l[i]=[t]),e=a.length;for(;e--;)i=a[e].name,i in t.attributes.map&&(n=u[i],n?n.push(t):u[i]=[t]);return t},o.addNodeFilter=function(e,i){t.each(t.explode(e),function(t){var e=r[t];e||(r[t]=e=[]),e.push(i)})},o.addAttributeFilter=function(e,i){t.each(t.explode(e),function(t){var e;for(e=0;e<a.length;e++)if(a[e].name===t)return a[e].callbacks.push(i),void 0;a.push({name:t,callbacks:[i]})})},o.parse=function(o,h){function c(){for(var t,e,i=g.firstChild;i;)t=i.next,3==i.type||1==i.type&&"p"!==i.name&&!C[i.name]&&!i.attr("data-mce-type")?e?e.append(i):(e=d(N,1),g.insert(e,i),e.append(i)):e=null,i=t}function d(t,i){var n,s=new e(t,i);return t in r&&(n=l[t],n?n.push(s):l[t]=[s]),s}function f(t){var e,i,n;for(e=t.prev;e&&3===e.type;)i=e.value.replace(k,""),i.length>0?(e.value=i,e=e.prev):(n=e.prev,e.remove(),e=n)}var p,g,m,v,y,b,_,w,A,x,j,C,T,k,S,E,D,M,N,I=[];if(h=h||{},l={},u={},C=t.extend(t.makeMap("script,style,head,html,body,title,meta,param"),n.getBlockElements()),M=n.getNonEmptyElements(),D=n.children,j=i.validate,N="forced_root_block"in h?h.forced_root_block:i.forced_root_block,E=n.getWhiteSpaceElements(),T=/^[ \t\r\n]+/,k=/[ \t\r\n]+$/,S=/[ \t\r\n]+/g,p=new t.html.SaxParser({validate:j,fix_self_closing:!j,cdata:function(t){m.append(d("#cdata",4)).value=t},text:function(t,e){var i;E[m.name]||(t=t.replace(S," "),m.lastChild&&C[m.lastChild.name]&&(t=t.replace(T,""))),0!==t.length&&(i=d("#text",3),i.raw=!!e,m.append(i).value=t)},comment:function(t){m.append(d("#comment",8)).value=t},pi:function(t,e){m.append(d(t,7)).value=e,f(m)},doctype:function(t){var e;e=m.append(d("#doctype",10)),e.value=t,f(m)},start:function(t,e,i){var s,o,r,l,h;if(r=j?n.getElementRule(t):{}){for(s=d(r.outputName||t,1),s.attributes=e,s.shortEnded=i,m.append(s),h=D[m.name],h&&D[s.name]&&!h[s.name]&&I.push(s),o=a.length;o--;)l=a[o].name,l in e.map&&(A=u[l],A?A.push(s):u[l]=[s]);C[t]&&f(s),i||(m=s)}},end:function(t){var i,s,o,r,a;if(s=j?n.getElementRule(t):{}){if(C[t]){if(!E[m.name]){for(i=m.firstChild;i&&3===i.type;)o=i.value.replace(T,""),o.length>0?(i.value=o,i=i.next):(r=i.next,i.remove(),i=r);for(i=m.lastChild;i&&3===i.type;)o=i.value.replace(k,""),o.length>0?(i.value=o,i=i.prev):(r=i.prev,i.remove(),i=r)}i=m.prev,i&&3===i.type&&(o=i.value.replace(T,""),o.length>0?i.value=o:i.remove())}if((s.removeEmpty||s.paddEmpty)&&m.isEmpty(M))if(s.paddEmpty)m.empty().append(new e("#text","3")).value=" ";else if(!m.attributes.map.name)return a=m.parent,m.empty().remove(),m=a,void 0;m=m.parent}}},n),g=m=new e(h.context||i.root_name,11),p.parse(o),j&&I.length&&(h.context?h.invalid=!0:s(I)),N&&"body"==g.name&&c(),!h.invalid){for(x in l){for(A=r[x],v=l[x],_=v.length;_--;)v[_].parent||v.splice(_,1);for(y=0,b=A.length;b>y;y++)A[y](v,x,h)}for(y=0,b=a.length;b>y;y++)if(A=a[y],A.name in u){for(v=u[A.name],_=v.length;_--;)v[_].parent||v.splice(_,1);for(_=0,w=A.callbacks.length;w>_;_++)A.callbacks[_](v,A.name,h)}}return g},i.remove_trailing_brs&&o.addNodeFilter("br",function(e){var i,s,o,r,a,l=e.length,u=n.getBlockElements(),h=n.getNonEmptyElements();for(u.body=1,i=0;l>i;i++)if(s=e[i],o=s.parent,u[s.parent.name]&&s===o.lastChild){for(r=s.prev;r;){if(a=r.name,"span"!==a||"bookmark"!==r.attr("data-mce-type")){if("br"!==a)break;if("br"===a){s=null;break}}r=r.prev}s&&(s.remove(),o.isEmpty(h)&&(elementRule=n.getElementRule(o.name),elementRule&&(elementRule.removeEmpty?o.remove():elementRule.paddEmpty&&(o.empty().append(new t.html.Node("#text",3)).value=" "))))}})}}(tinymce),tinymce.html.Writer=function(t){var e,i,n,s,o,r=[];return t=t||{},e=t.indent,i=tinymce.makeMap(t.indent_before||""),n=tinymce.makeMap(t.indent_after||""),s=tinymce.html.Entities.getEncodeFunc(t.entity_encoding||"raw",t.entities),o="html"==t.element_format,{start:function(t,a,l){var u,h,c,d;if(e&&i[t]&&r.length>0&&(d=r[r.length-1],d.length>0&&"\n"!==d&&r.push("\n")),r.push("<",t),a)for(u=0,h=a.length;h>u;u++)c=a[u],r.push(" ",c.name,'="',s(c.value,!0),'"');r[r.length]=!l||o?">":" />",l&&e&&n[t]&&r.length>0&&(d=r[r.length-1],d.length>0&&"\n"!==d&&r.push("\n"))},end:function(t){var i;r.push("</",t,">"),e&&n[t]&&r.length>0&&(i=r[r.length-1],i.length>0&&"\n"!==i&&r.push("\n"))},text:function(t,e){t.length>0&&(r[r.length]=e?t:s(t))},cdata:function(t){r.push("<![CDATA[",t,"]]>")},comment:function(t){r.push("<!--",t,"-->")},pi:function(t,i){i?r.push("<?",t," ",i,"?>"):r.push("<?",t,"?>"),e&&r.push("\n")},doctype:function(t){r.push("<!DOCTYPE",t,">",e?"\n":"")},reset:function(){r.length=0},getContent:function(){return r.join("").replace(/\n$/,"")}}},function(t){t.html.Serializer=function(e,i){var n=this,s=new t.html.Writer(e);e=e||{},e.validate="validate"in e?e.validate:!0,n.schema=i=i||new t.html.Schema,n.writer=s,n.serialize=function(t){function n(t){var e,a,l,u,h,c,d,f,p,g=o[t.type];if(g)g(t);else{if(e=t.name,a=t.shortEnded,l=t.attributes,r&&l&&l.length>1){for(c=[],c.map={},p=i.getElementRule(t.name),d=0,f=p.attributesOrder.length;f>d;d++)u=p.attributesOrder[d],u in l.map&&(h=l.map[u],c.map[u]=h,c.push({name:u,value:h}));for(d=0,f=l.length;f>d;d++)u=l[d].name,u in c.map||(h=l.map[u],c.map[u]=h,c.push({name:u,value:h}));l=c}if(s.start(t.name,l,a),!a){if(t=t.firstChild)do n(t);while(t=t.next);s.end(e)}}}var o,r;return r=e.validate,o={3:function(t){s.text(t.value,t.raw)},8:function(t){s.comment(t.value)},7:function(t){s.pi(t.name,t.value)},10:function(t){s.doctype(t.value)},4:function(t){s.cdata(t.value)},11:function(t){if(t=t.firstChild)do n(t);while(t=t.next)}},s.reset(),1!=t.type||e.inner?o[11](t):n(t),s.getContent()}}}(tinymce),function(t){var e=t.each,i=t.is,n=t.isWebKit,s=t.isIE,o=t.html.Entities,r=/^([a-z0-9],?)+$/i,a=t.html.Schema.blockElementsMap,l=/^[ \t\r\n]*$/;t.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(e,i){var n,o=this;if(o.doc=e,o.win=window,o.files={},o.cssFlicker=!1,o.counter=0,o.stdMode=!t.isIE||e.documentMode>=8,o.boxModel=!t.isIE||"CSS1Compat"==e.compatMode||o.stdMode,o.hasOuterHTML="outerHTML"in e.createElement("a"),o.settings=i=t.extend({keep_values:!1,hex_colors:1},i),o.schema=i.schema,o.styles=new t.html.Styles({url_converter:i.url_converter,url_converter_scope:i.url_converter_scope},i.schema),t.isIE6)try{e.execCommand("BackgroundImageCache",!1,!0)}catch(r){o.cssFlicker=!0}if(s&&i.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(n in i.schema.getCustomElements())e.createElement(n)}t.addUnload(o.destroy,o)},getRoot:function(){var t=this,e=t.settings;return e&&t.get(e.root_element)||t.doc.body},getViewPort:function(t){var e,i;return t=t?t:this.win,e=t.document,i=this.boxModel?e.documentElement:e.body,{x:t.pageXOffset||i.scrollLeft,y:t.pageYOffset||i.scrollTop,w:t.innerWidth||i.clientWidth,h:t.innerHeight||i.clientHeight}},getRect:function(t){var e,i,n=this;return t=n.get(t),e=n.getPos(t),i=n.getSize(t),{x:e.x,y:e.y,w:i.w,h:i.h}},getSize:function(t){var e,i,n=this;return t=n.get(t),e=n.getStyle(t,"width"),i=n.getStyle(t,"height"),-1===e.indexOf("px")&&(e=0),-1===i.indexOf("px")&&(i=0),{w:parseInt(e)||t.offsetWidth||t.clientWidth,h:parseInt(i)||t.offsetHeight||t.clientHeight}},getParent:function(t,e,i){return this.getParents(t,e,i,!1)},getParents:function(t,e,n,s){var o,r=this,a=r.settings,l=[];for(t=r.get(t),s=void 0===s,a.strict_root&&(n=n||r.getRoot()),i(e,"string")&&(o=e,e="*"===e?function(t){return 1==t.nodeType}:function(t){return r.is(t,o)});t&&t!=n&&t.nodeType&&9!==t.nodeType;){if(!e||e(t)){if(!s)return t;l.push(t)}t=t.parentNode}return s?l:null},get:function(t){var e;return t&&this.doc&&"string"==typeof t&&(e=t,t=this.doc.getElementById(t),t&&t.id!==e)?this.doc.getElementsByName(e)[1]:t},getNext:function(t,e){return this._findSib(t,e,"nextSibling")},getPrev:function(t,e){return this._findSib(t,e,"previousSibling")},select:function(e,i){var n=this;return t.dom.Sizzle(e,n.get(i)||n.get(n.settings.root_element)||n.doc,[])},is:function(e,i){var n;if(void 0===e.length){if("*"===i)return 1==e.nodeType;if(r.test(i)){for(i=i.toLowerCase().split(/,/),e=e.nodeName.toLowerCase(),n=i.length-1;n>=0;n--)if(i[n]==e)return!0;return!1}}return t.dom.Sizzle.matches(i,e.nodeType?[e]:e).length>0},add:function(t,e,n,s,o){var r=this;return this.run(t,function(t){var a;return a=i(e,"string")?r.doc.createElement(e):e,r.setAttribs(a,n),s&&(s.nodeType?a.appendChild(s):r.setHTML(a,s)),o?a:t.appendChild(a)})},create:function(t,e,i){return this.add(this.doc.createElement(t),t,e,i,1)},createHTML:function(t,e,i){var n,s="",o=this;s+="<"+t;for(n in e)e.hasOwnProperty(n)&&(s+=" "+n+'="'+o.encode(e[n])+'"');return"undefined"!=typeof i?s+">"+i+"</"+t+">":s+" />"},remove:function(e,i){return this.run(e,function(e){var n,s=e.parentNode;if(!s)return null;if(i)for(;n=e.firstChild;)!t.isIE||3!==n.nodeType||n.nodeValue?s.insertBefore(n,e):e.removeChild(n);return s.removeChild(e)})},setStyle:function(e,i,n){var o=this;return o.run(e,function(r){var a;switch(a=r.style,i=i.replace(/-(\D)/g,function(t,e){return e.toUpperCase()}),o.pixelStyles.test(i)&&(t.is(n,"number")||/^[\-0-9\.]+$/.test(n))&&(n+="px"),i){case"opacity":s&&(a.filter=""===n?"":"alpha(opacity="+100*n+")",e.currentStyle&&e.currentStyle.hasLayout||(a.display="inline-block")),a[i]=a["-moz-opacity"]=a["-khtml-opacity"]=n||"";break;case"float":s?a.styleFloat=n:a.cssFloat=n;break;default:a[i]=n||""}o.settings.update_styles&&o.setAttrib(r,"data-mce-style")})},getStyle:function(t,e,i){if(t=this.get(t)){if(this.doc.defaultView&&i){e=e.replace(/[A-Z]/g,function(t){return"-"+t});try{return this.doc.defaultView.getComputedStyle(t,null).getPropertyValue(e)}catch(n){return null}}return e=e.replace(/-(\D)/g,function(t,e){return e.toUpperCase()}),"float"==e&&(e=s?"styleFloat":"cssFloat"),t.currentStyle&&i?t.currentStyle[e]:t.style?t.style[e]:void 0}},setStyles:function(t,i){var n,s=this,o=s.settings;n=o.update_styles,o.update_styles=0,e(i,function(e,i){s.setStyle(t,i,e)}),o.update_styles=n,o.update_styles&&s.setAttrib(t,o.cssText)},removeAllAttribs:function(t){return this.run(t,function(t){var e,i=t.attributes;for(e=i.length-1;e>=0;e--)t.removeAttributeNode(i.item(e))})},setAttrib:function(t,n,s){var o=this;if(t&&n)return o.settings.strict&&(n=n.toLowerCase()),this.run(t,function(t){var r=o.settings;switch(n){case"style":if(!i(s,"string"))return e(s,function(e,i){o.setStyle(t,i,e)}),void 0;r.keep_values&&(s&&!o._isRes(s)?t.setAttribute("data-mce-style",s,2):t.removeAttribute("data-mce-style",2)),t.style.cssText=s;break;case"class":t.className=s||"";break;case"src":case"href":r.keep_values&&(r.url_converter&&(s=r.url_converter.call(r.url_converter_scope||o,s,n,t)),o.setAttrib(t,"data-mce-"+n,s,2));break;case"shape":t.setAttribute("data-mce-style",s)}i(s)&&null!==s&&0!==s.length?t.setAttribute(n,""+s,2):t.removeAttribute(n,2)})},setAttribs:function(t,i){var n=this;return this.run(t,function(t){e(i,function(e,i){n.setAttrib(t,i,e)})})},getAttrib:function(e,o,r){var a,l,u=this;if(e=u.get(e),!e||1!==e.nodeType)return r===l?!1:r;if(i(r)||(r=""),/^(src|href|style|coords|shape)$/.test(o)&&(a=e.getAttribute("data-mce-"+o)))return a;if(s&&u.props[o]&&(a=e[u.props[o]],a=a&&a.nodeValue?a.nodeValue:a),a||(a=e.getAttribute(o,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(o))return e[u.props[o]]===!0&&""===a?o:a?o:"";if("FORM"===e.nodeName&&e.getAttributeNode(o))return e.getAttributeNode(o).nodeValue;if("style"===o&&(a=a||e.style.cssText,a&&(a=u.serializeStyle(u.parseStyle(a),e.nodeName),u.settings.keep_values&&!u._isRes(a)&&e.setAttribute("data-mce-style",a))),n&&"class"===o&&a&&(a=a.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),s)switch(o){case"rowspan":case"colspan":1===a&&(a="");break;case"size":("+0"===a||20===a||0===a)&&(a="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===a&&(a="");break;case"hspace":-1===a&&(a="");break;case"maxlength":case"tabindex":(32768===a||2147483647===a||"32768"===a)&&(a="");break;case"multiple":case"compact":case"noshade":case"nowrap":return 65535===a?o:r;case"shape":a=a.toLowerCase();break;default:0===o.indexOf("on")&&a&&(a=t._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+a))}return a!==l&&null!==a&&""!==a?""+a:r},getPos:function(t,e){var i,n,s=this,o=0,r=0,a=s.doc;if(t=s.get(t),e=e||a.body,t){if(t.getBoundingClientRect)return t=t.getBoundingClientRect(),i=s.boxModel?a.documentElement:a.body,o=t.left+(a.documentElement.scrollLeft||a.body.scrollLeft)-i.clientTop,r=t.top+(a.documentElement.scrollTop||a.body.scrollTop)-i.clientLeft,{x:o,y:r};for(n=t;n&&n!=e&&n.nodeType;)o+=n.offsetLeft||0,r+=n.offsetTop||0,n=n.offsetParent;for(n=t.parentNode;n&&n!=e&&n.nodeType;)o-=n.scrollLeft||0,r-=n.scrollTop||0,n=n.parentNode}return{x:o,y:r}},parseStyle:function(t){return this.styles.parse(t)},serializeStyle:function(t,e){return this.styles.serialize(t,e)},loadCSS:function(i){var n,o=this,r=o.doc;i||(i=""),n=o.select("head")[0],e(i.split(","),function(e){var i;o.files[e]||(o.files[e]=!0,i=o.create("link",{rel:"stylesheet",href:t._addVer(e)}),s&&r.documentMode&&r.recalc&&(i.onload=function(){r.recalc&&r.recalc(),i.onload=null}),n.appendChild(i))})},addClass:function(t,e){return this.run(t,function(t){var i;return e?this.hasClass(t,e)?t.className:(i=this.removeClass(t,e),t.className=(""!=i?i+" ":"")+e):0})},removeClass:function(e,i){var n,s=this;return s.run(e,function(e){var o;return s.hasClass(e,i)?(n||(n=new RegExp("(^|\\s+)"+i+"(\\s+|$)","g")),o=e.className.replace(n," "),o=t.trim(" "!=o?o:""),e.className=o,o||(e.removeAttribute("class"),e.removeAttribute("className")),o):e.className})},hasClass:function(t,e){return t=this.get(t),t&&e?-1!==(" "+t.className+" ").indexOf(" "+e+" "):!1},show:function(t){return this.setStyle(t,"display","block")},hide:function(t){return this.setStyle(t,"display","none")},isHidden:function(t){return t=this.get(t),!t||"none"==t.style.display||"none"==this.getStyle(t,"display")},uniqueId:function(t){return(t?t:"mce_")+this.counter++},setHTML:function(t,i){var n=this;return n.run(t,function(t){if(s){for(;t.firstChild;)t.removeChild(t.firstChild);try{t.innerHTML="<br />"+i,t.removeChild(t.firstChild)}catch(o){t=n.create("div"),t.innerHTML="<br />"+i,e(t.childNodes,function(e,i){i&&t.appendChild(e)})}}else t.innerHTML=i;return i})},getOuterHTML:function(t){var e,i=this;return(t=i.get(t))?1===t.nodeType&&i.hasOuterHTML?t.outerHTML:(e=(t.ownerDocument||i.doc).createElement("body"),e.appendChild(t.cloneNode(!0)),e.innerHTML):null},setOuterHTML:function(t,e,i){function n(t,e,i){var n,s;for(s=i.createElement("body"),s.innerHTML=e,n=s.lastChild;n;)o.insertAfter(n.cloneNode(!0),t),n=n.previousSibling;o.remove(t)}var o=this;return this.run(t,function(t){if(t=o.get(t),1==t.nodeType)if(i=i||t.ownerDocument||o.doc,s)try{s&&1==t.nodeType?t.outerHTML=e:n(t,e,i)}catch(r){n(t,e,i)}else n(t,e,i)})},decode:o.decode,encode:o.encodeAllRaw,insertAfter:function(t,e){return e=this.get(e),this.run(t,function(t){var i,n;return i=e.parentNode,n=e.nextSibling,n?i.insertBefore(t,n):i.appendChild(t),t})},isBlock:function(t){var e=t.nodeType;return e?!(1!==e||!a[t.nodeName]):!!a[t]},replace:function(n,s,o){var r=this;return i(s,"array")&&(n=n.cloneNode(!0)),r.run(s,function(i){return o&&e(t.grep(i.childNodes),function(t){n.appendChild(t)}),i.parentNode.replaceChild(n,i)})},rename:function(t,i){var n,s=this;return t.nodeName!=i.toUpperCase()&&(n=s.create(i),e(s.getAttribs(t),function(e){s.setAttrib(n,e.nodeName,s.getAttrib(t,e.nodeName))}),s.replace(n,t,1)),n||t},findCommonAncestor:function(t,e){for(var i,n=t;n;){for(i=e;i&&n!=i;)i=i.parentNode;if(n==i)break;n=n.parentNode}return!n&&t.ownerDocument?t.ownerDocument.documentElement:n},toHex:function(t){function e(t){return t=parseInt(t).toString(16),t.length>1?t:"0"+t}var i=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(t);return i?t="#"+e(i[1])+e(i[2])+e(i[3]):t},getClasses:function(){function i(s){e(s.imports,function(t){i(t)}),e(s.cssRules||s.rules,function(s){switch(s.type||1){case 1:s.selectorText&&e(s.selectorText.split(","),function(e){e=e.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(e)&&/\.[\w\-]+$/.test(e)&&(n=e,e=t._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",e),(!a||(e=a(e,n)))&&(r[e]||(o.push({"class":e}),r[e]=1)))});break;case 3:i(s.styleSheet)}})}var n,s=this,o=[],r={},a=s.settings.class_filter;if(s.classes)return s.classes;try{e(s.doc.styleSheets,i)}catch(l){}return o.length>0&&(s.classes=o),o},run:function(t,i,n){var s,o=this;return o.doc&&"string"==typeof t&&(t=o.get(t)),t?(n=n||this,t.nodeType||!t.length&&0!==t.length?i.call(n,t):(s=[],e(t,function(t,e){t&&("string"==typeof t&&(t=o.doc.getElementById(t)),s.push(i.call(n,t,e)))}),s)):!1},getAttribs:function(t){var e;return t=this.get(t),t?s?(e=[],"OBJECT"==t.nodeName?t.attributes:("OPTION"===t.nodeName&&this.getAttrib(t,"selected")&&e.push({specified:1,nodeName:"selected"}),t.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(t){e.push({specified:1,nodeName:t})}),e)):t.attributes:[]},isEmpty:function(e,i){var n,s,o,r,a,u,h=this;if(e=e.firstChild){r=new t.dom.TreeWalker(e),i=i||h.schema?h.schema.getNonEmptyElements():null;do{if(o=e.nodeType,1===o){if(e.getAttribute("data-mce-bogus"))continue;if(a=e.nodeName.toLowerCase(),i&&i[a]){if(u=e.parentNode,"br"===a&&h.isBlock(u)&&u.firstChild===e&&u.lastChild===e)continue;return!1}for(s=h.getAttribs(e),n=e.attributes.length;n--;)if(a=e.attributes[n].nodeName,"name"===a||"data-mce-bookmark"===a)return!1}if(3===o&&!l.test(e.nodeValue))return!1}while(e=r.next())}return!0},destroy:function(e){var i=this;i.events&&i.events.destroy(),i.win=i.doc=i.root=i.events=null,e||t.removeUnload(i.destroy)},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new t.dom.Range(this)},nodeIndex:function(t,e){var i,n,s,o=0;if(t)for(i=t.nodeType,t=t.previousSibling,n=t;t;t=t.previousSibling)s=t.nodeType,(!e||3!=s||s!=i&&t.nodeValue.length)&&(o++,i=s);return o},split:function(e,i,n){function s(e){var i,n=e.childNodes,o=e.nodeType;if(1!=o||"bookmark"!=e.getAttribute("data-mce-type")){for(i=n.length-1;i>=0;i--)s(n[i]);if(9!=o){if(3==o&&e.nodeValue.length>0){if(!l.isBlock(e.parentNode)||t.trim(e.nodeValue).length>0)return}else if(1==o&&(n=e.childNodes,1==n.length&&n[0]&&1==n[0].nodeType&&"bookmark"==n[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(n[0],e),n.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;l.remove(e)}return e}}var o,r,a,l=this,u=l.createRng();return e&&i?(u.setStart(e.parentNode,l.nodeIndex(e)),u.setEnd(i.parentNode,l.nodeIndex(i)),o=u.extractContents(),u=l.createRng(),u.setStart(i.parentNode,l.nodeIndex(i)+1),u.setEnd(e.parentNode,l.nodeIndex(e)+1),r=u.extractContents(),a=e.parentNode,a.insertBefore(s(o),e),n?a.replaceChild(n,i):a.insertBefore(i,e),a.insertBefore(s(r),e),l.remove(e),n||i):void 0},bind:function(e,i,n,s){var o=this;return o.events||(o.events=new t.dom.EventUtils),o.events.add(e,i,n,s||this)},unbind:function(e,i,n){var s=this;return s.events||(s.events=new t.dom.EventUtils),s.events.remove(e,i,n)},_findSib:function(t,e,n){var s=this,o=e;if(t)for(i(o,"string")&&(o=function(t){return s.is(t,e)}),t=t[n];t;t=t[n])if(o(t))return t;return null},_isRes:function(t){return/^(top|left|bottom|right|width|height)/i.test(t)||/;\s*(top|left|bottom|right|width|height)/i.test(t)}}),t.DOM=new t.dom.DOMUtils(document,{process_html:0})}(tinymce),function(t){function e(t){function i(t,e){w(L,t,e)}function n(t,e){w(O,t,e)}function s(t){i(t.parentNode,V(t))}function o(t){i(t.parentNode,V(t)+1)}function r(t){n(t.parentNode,V(t))}function a(t){n(t.parentNode,V(t)+1)}function l(t){t?(M[H]=M[F],M[U]=M[R]):(M[F]=M[H],M[R]=M[U]),M.collapsed=L}function u(t){s(t),a(t)}function h(t){i(t,0),n(t,1===t.nodeType?t.childNodes.length:t.nodeValue.length)}function c(t,e){var i=M[F],n=M[R],s=M[H],o=M[U],r=e.startContainer,a=e.startOffset,l=e.endContainer,u=e.endOffset;return 0===t?_(i,n,r,a):1===t?_(s,o,r,a):2===t?_(s,o,l,u):3===t?_(i,n,l,u):void 0}function d(){A(B)}function f(){return A(I)}function p(){return A(P)}function g(e){var i,n,s=this[F],o=this[R];3!==s.nodeType&&4!==s.nodeType||!s.nodeValue?(s.childNodes.length>0&&(n=s.childNodes[o]),n?s.insertBefore(e,n):s.appendChild(e)):o?o>=s.nodeValue.length?t.insertAfter(e,s):(i=s.splitText(o),s.parentNode.insertBefore(e,i)):s.parentNode.insertBefore(e,s)}function m(t){var e=M.extractContents();M.insertNode(t),t.appendChild(e),M.selectNode(t)}function v(){return z(new e(t),{startContainer:M[F],startOffset:M[R],endContainer:M[H],endOffset:M[U],collapsed:M.collapsed,commonAncestorContainer:M.commonAncestorContainer})}function y(t,e){var i;if(3==t.nodeType)return t;if(0>e)return t;for(i=t.firstChild;i&&e>0;)--e,i=i.nextSibling;return i?i:t}function b(){return M[F]==M[H]&&M[R]==M[U]}function _(e,i,n,s){var o,r,a,l,u,h;if(e==n)return i==s?0:s>i?-1:1;for(o=n;o&&o.parentNode!=e;)o=o.parentNode;if(o){for(r=0,a=e.firstChild;a!=o&&i>r;)r++,a=a.nextSibling;return r>=i?-1:1}for(o=e;o&&o.parentNode!=n;)o=o.parentNode;if(o){for(r=0,a=n.firstChild;a!=o&&s>r;)r++,a=a.nextSibling;return s>r?-1:1}for(l=t.findCommonAncestor(e,n),u=e;u&&u.parentNode!=l;)u=u.parentNode;for(u||(u=l),h=n;h&&h.parentNode!=l;)h=h.parentNode;if(h||(h=l),u==h)return 0;for(a=l.firstChild;a;){if(a==u)return-1;if(a==h)return 1;a=a.nextSibling}}function w(e,i,n){var s,o;for(e?(M[F]=i,M[R]=n):(M[H]=i,M[U]=n),s=M[H];s.parentNode;)s=s.parentNode;for(o=M[F];o.parentNode;)o=o.parentNode;o==s?_(M[F],M[R],M[H],M[U])>0&&M.collapse(e):M.collapse(e),M.collapsed=b(),M.commonAncestorContainer=t.findCommonAncestor(M[F],M[H])}function A(t){var e,i,n,s,o,r,a,l=0,u=0;if(M[F]==M[H])return x(t);for(e=M[H],i=e.parentNode;i;e=i,i=i.parentNode){if(i==M[F])return j(e,t);++l}for(e=M[F],i=e.parentNode;i;e=i,i=i.parentNode){if(i==M[H])return C(e,t);++u}for(n=u-l,s=M[F];n>0;)s=s.parentNode,n--;for(o=M[H];0>n;)o=o.parentNode,n++;for(r=s.parentNode,a=o.parentNode;r!=a;r=r.parentNode,a=a.parentNode)s=r,o=a;return T(s,o,t)}function x(t){var e,i,n,s,o,r,a;if(t!=B&&(e=N.createDocumentFragment()),M[R]==M[U])return e;if(3==M[F].nodeType){if(i=M[F].nodeValue,n=i.substring(M[R],M[U]),t!=P&&(M[F].deleteData(M[R],M[U]-M[R]),M.collapse(L)),t==B)return;return e.appendChild(N.createTextNode(n)),e}for(s=y(M[F],M[R]),o=M[U]-M[R];o>0;)r=s.nextSibling,a=D(s,t),e&&e.appendChild(a),--o,s=r;return t!=P&&M.collapse(L),e}function j(t,e){var i,n,s,o,r,a;if(e!=B&&(i=N.createDocumentFragment()),n=k(t,e),i&&i.appendChild(n),s=V(t),o=s-M[R],0>=o)return e!=P&&(M.setEndBefore(t),M.collapse(O)),i;for(n=t.previousSibling;o>0;)r=n.previousSibling,a=D(n,e),i&&i.insertBefore(a,i.firstChild),--o,n=r;return e!=P&&(M.setEndBefore(t),M.collapse(O)),i}function C(t,e){var i,n,s,o,r,a;for(e!=B&&(i=N.createDocumentFragment()),s=S(t,e),i&&i.appendChild(s),n=V(t),++n,o=M[U]-n,s=t.nextSibling;o>0;)r=s.nextSibling,a=D(s,e),i&&i.appendChild(a),--o,s=r;return e!=P&&(M.setStartAfter(t),M.collapse(L)),i}function T(t,e,i){var n,s,o,r,a,l,u,h;for(i!=B&&(s=N.createDocumentFragment()),n=S(t,i),s&&s.appendChild(n),o=t.parentNode,r=V(t),a=V(e),++r,l=a-r,u=t.nextSibling;l>0;)h=u.nextSibling,n=D(u,i),s&&s.appendChild(n),u=h,--l;return n=k(e,i),s&&s.appendChild(n),i!=P&&(M.setStartAfter(t),M.collapse(L)),s}function k(t,e){var i,n,s,o,r,a=y(M[H],M[U]-1),l=a!=M[H];if(a==t)return E(a,l,O,e);for(i=a.parentNode,n=E(i,O,O,e);i;){for(;a;)s=a.previousSibling,o=E(a,l,O,e),e!=B&&n.insertBefore(o,n.firstChild),l=L,a=s;if(i==t)return n;a=i.previousSibling,i=i.parentNode,r=E(i,O,O,e),e!=B&&r.appendChild(n),n=r}}function S(t,e){var i,n,s,o,r,a=y(M[F],M[R]),l=a!=M[F];if(a==t)return E(a,l,L,e);for(i=a.parentNode,n=E(i,O,L,e);i;){for(;a;)s=a.nextSibling,o=E(a,l,L,e),e!=B&&n.appendChild(o),l=L,a=s;if(i==t)return n;a=i.nextSibling,i=i.parentNode,r=E(i,O,L,e),e!=B&&r.appendChild(n),n=r}}function E(t,e,i,n){var s,o,r,a,l;if(e)return D(t,n);if(3==t.nodeType){if(s=t.nodeValue,i?(a=M[R],o=s.substring(a),r=s.substring(0,a)):(a=M[U],o=s.substring(0,a),r=s.substring(a)),n!=P&&(t.nodeValue=r),n==B)return;return l=t.cloneNode(O),l.nodeValue=o,l}if(n!=B)return t.cloneNode(O)}function D(t,e){return e!=B?e==P?t.cloneNode(L):t:(t.parentNode.removeChild(t),void 0)}var M=this,N=t.doc,I=0,P=1,B=2,L=!0,O=!1,R="startOffset",F="startContainer",H="endContainer",U="endOffset",z=tinymce.extend,V=t.nodeIndex;z(M,{startContainer:N,startOffset:0,endContainer:N,endOffset:0,collapsed:L,commonAncestorContainer:N,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:i,setEnd:n,setStartBefore:s,setStartAfter:o,setEndBefore:r,setEndAfter:a,collapse:l,selectNode:u,selectNodeContents:h,compareBoundaryPoints:c,deleteContents:d,extractContents:f,cloneContents:p,insertNode:g,surroundContents:m,cloneRange:v})}t.Range=e}(tinymce.dom),function(){function t(t){function e(e,i){var n,s,o,r,a,l,u,h,c=0,d=-1;if(n=e.duplicate(),n.collapse(i),h=n.parentElement(),h.ownerDocument===t.dom.doc){for(;"false"===h.contentEditable;)h=h.parentNode;if(!h.hasChildNodes())return{node:h,inside:1};for(r=h.children,s=r.length-1;s>=c;)if(u=Math.floor((c+s)/2),a=r[u],n.moveToElementText(a),d=n.compareEndPoints(i?"StartToStart":"EndToEnd",e),d>0)s=u-1;else{if(!(0>d))return{node:a};c=u+1}if(0>d){if(a?n.collapse(!1):(n.moveToElementText(h),n.collapse(!0),a=h,o=!0),n.setEndPoint(i?"EndToStart":"EndToEnd",e),n.compareEndPoints(i?"StartToStart":"StartToEnd",e)>0)for(n=e.duplicate(),n.collapse(i),l=-1;h==n.parentElement()&&0!=n.move("character",-1);)l++;l=l||n.text.replace("\r\n"," ").length}else n.collapse(!0),n.setEndPoint(i?"StartToStart":"StartToEnd",e),l=n.text.replace("\r\n"," ").length;return{node:a,position:d,offset:l,inside:o}}}function i(){function i(t){var i,n,s,o,r,a=e(h,t),l=0;if(i=a.node,n=a.offset,a.inside&&!i.hasChildNodes())return c[t?"setStart":"setEnd"](i,0),void 0;if(n===o)return c[t?"setStartBefore":"setEndAfter"](i),void 0;if(a.position<0){if(s=a.inside?i.firstChild:i.nextSibling,!s)return c[t?"setStartAfter":"setEndAfter"](i),void 0;if(!n)return 3==s.nodeType?c[t?"setStart":"setEnd"](s,0):c[t?"setStartBefore":"setEndBefore"](s),void 0;for(;s;){if(r=s.nodeValue,l+=r.length,l>=n){i=s,l-=n,l=r.length-l;break}s=s.nextSibling}}else{if(s=i.previousSibling,!s)return c[t?"setStartBefore":"setEndBefore"](i);if(!n)return 3==i.nodeType?c[t?"setStart":"setEnd"](s,i.nodeValue.length):c[t?"setStartAfter":"setEndAfter"](s),void 0;for(;s;){if(l+=s.nodeValue.length,l>=n){i=s,l-=n;break}s=s.previousSibling}}c[t?"setStart":"setEnd"](i,l)}var o,r,a,l,u,h=t.getRng(),c=s.createRng();if(o=h.item?h.item(0):h.parentElement(),o.ownerDocument!=s.doc)return c;if(r=t.isCollapsed(),h.item)return c.setStart(o.parentNode,s.nodeIndex(o)),c.setEnd(c.startContainer,c.startOffset+1),c;try{i(!0),r||i()}catch(d){if(-2147024809!=d.number)throw d;u=n.getBookmark(2),a=h.duplicate(),a.collapse(!0),o=a.parentElement(),r||(a=h.duplicate(),a.collapse(!1),l=a.parentElement(),l.innerHTML=l.innerHTML),o.innerHTML=o.innerHTML,n.moveToBookmark(u),h=t.getRng(),i(!0),r||i()}return c}var n=this,s=t.dom,o=!0;this.getBookmark=function(i){function n(t){var t,e,i,n,o,r=[];for(e=t.parentNode,i=s.getRoot().parentNode;e!=i;){for(n=e.children,o=n.length;o--;)if(t===n[o]){r.push(o);break}t=e,e=e.parentNode}return r}function o(t){var i;return i=e(r,t),i?{position:i.position,offset:i.offset,indexes:n(i.node),inside:i.inside}:void 0}var r=t.getRng(),a={};return 2===i&&(r.item?a.start={ctrl:!0,indexes:n(r.item(0))}:(a.start=o(!0),t.isCollapsed()||(a.end=o()))),a},this.moveToBookmark=function(t){function e(t){var e,i,n,o;for(e=s.getRoot(),i=t.length-1;i>=0;i--)o=e.children,n=t[i],n<=o.length-1&&(e=o[n]);return e}function i(i){var s,r,a,l=t[i?"start":"end"];l&&(s=l.position>0,r=o.createTextRange(),r.moveToElementText(e(l.indexes)),offset=l.offset,offset!==a?(r.collapse(l.inside||s),r.moveStart("character",s?-offset:offset)):r.collapse(i),n.setEndPoint(i?"StartToStart":"EndToStart",r),i&&n.collapse(!0))}var n,o=s.doc.body;t.start&&(t.start.ctrl?(n=o.createControlRange(),n.addElement(e(t.start.indexes)),n.select()):(n=o.createTextRange(),i(!0),i(),n.select()))},this.addRange=function(e){function i(t){var e,i,r,f,p;r=s.create("a"),e=t?a:u,i=t?l:h,f=n.duplicate(),(e==c||e==c.documentElement)&&(e=d,i=0),3==e.nodeType?(e.parentNode.insertBefore(r,e),f.moveToElementText(r),f.moveStart("character",i),s.remove(r),n.setEndPoint(t?"StartToStart":"EndToEnd",f)):(p=e.childNodes,p.length?(i>=p.length?s.insertAfter(r,p[p.length-1]):e.insertBefore(r,p[i]),f.moveToElementText(r)):(r=c.createTextNode("﻿"),e.appendChild(r),f.moveToElementText(r.parentNode),f.collapse(o)),n.setEndPoint(t?"StartToStart":"EndToEnd",f),s.remove(r))}var n,r,a,l,u,h,c=t.dom.doc,d=c.body;if(a=e.startContainer,l=e.startOffset,u=e.endContainer,h=e.endOffset,n=d.createTextRange(),a==u&&1==a.nodeType&&l==h-1&&l==h-1)try{return r=d.createControlRange(),r.addElement(a.childNodes[l]),r.select(),void 0}catch(f){}i(!0),i(),n.select()},this.getRangeAt=i}tinymce.dom.TridentSelection=t}(),function(){function t(t,e,i,n,s,o){for(var r=0,a=n.length;a>r;r++){var l=n[r];if(l){l=l[t];for(var u=!1;l;){if(l.sizcache===i){u=n[l.sizset];break}if(1!==l.nodeType||o||(l.sizcache=i,l.sizset=r),l.nodeName.toLowerCase()===e){u=l;break}l=l[t]}n[r]=u}}}function e(t,e,i,n,s,o){for(var r=0,l=n.length;l>r;r++){var u=n[r];if(u){u=u[t];for(var h=!1;u;){if(u.sizcache===i){h=n[u.sizset];break}if(1===u.nodeType)if(o||(u.sizcache=i,u.sizset=r),"string"!=typeof e){if(u===e){h=!0;break}}else if(a.filter(e,[u]).length>0){h=u;break}u=u[t]}n[r]=h}}}var i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,n=0,s=Object.prototype.toString,o=!1,r=!0;[0,0].sort(function(){return r=!1,0});var a=function(t,e,n,o){n=n||[],e=e||document;var r=e;if(1!==e.nodeType&&9!==e.nodeType)return[];if(!t||"string"!=typeof t)return n;var h,c,f,p,m,v,y,b,_=[],w=!0,A=a.isXML(e),x=t;do if(i.exec(""),h=i.exec(x),h&&(x=h[3],_.push(h[1]),h[2])){p=h[3];break}while(h);if(_.length>1&&u.exec(t))if(2===_.length&&l.relative[_[0]])c=g(_[0]+_[1],e);else for(c=l.relative[_[0]]?[e]:a(_.shift(),e);_.length;)t=_.shift(),l.relative[t]&&(t+=_.shift()),c=g(t,c);else if(!o&&_.length>1&&9===e.nodeType&&!A&&l.match.ID.test(_[0])&&!l.match.ID.test(_[_.length-1])&&(m=a.find(_.shift(),e,A),e=m.expr?a.filter(m.expr,m.set)[0]:m.set[0]),e)for(m=o?{expr:_.pop(),set:d(o)}:a.find(_.pop(),1!==_.length||"~"!==_[0]&&"+"!==_[0]||!e.parentNode?e:e.parentNode,A),c=m.expr?a.filter(m.expr,m.set):m.set,_.length>0?f=d(c):w=!1;_.length;)v=_.pop(),y=v,l.relative[v]?y=_.pop():v="",null==y&&(y=e),l.relative[v](f,y,A);else f=_=[];if(f||(f=c),f||a.error(v||t),"[object Array]"===s.call(f))if(w)if(e&&1===e.nodeType)for(b=0;null!=f[b];b++)f[b]&&(f[b]===!0||1===f[b].nodeType&&a.contains(e,f[b]))&&n.push(c[b]);else for(b=0;null!=f[b];b++)f[b]&&1===f[b].nodeType&&n.push(c[b]);else n.push.apply(n,f);else d(f,n);return p&&(a(p,r,n,o),a.uniqueSort(n)),n};a.uniqueSort=function(t){if(p&&(o=r,t.sort(p),o))for(var e=1;e<t.length;e++)t[e]===t[e-1]&&t.splice(e--,1);return t},a.matches=function(t,e){return a(t,null,null,e)},a.find=function(t,e,i){var n;if(!t)return[];for(var s=0,o=l.order.length;o>s;s++){var r,a=l.order[s];if(r=l.leftMatch[a].exec(t)){var u=r[1];if(r.splice(1,1),"\\"!==u.substr(u.length-1)&&(r[1]=(r[1]||"").replace(/\\/g,""),n=l.find[a](r,e,i),null!=n)){t=t.replace(l.match[a],"");break}}}return n||(n=e.getElementsByTagName("*")),{set:n,expr:t}},a.filter=function(t,e,i,n){for(var s,o,r=t,u=[],h=e,c=e&&e[0]&&a.isXML(e[0]);t&&e.length;){for(var d in l.filter)if(null!=(s=l.leftMatch[d].exec(t))&&s[2]){var f,p,g=l.filter[d],m=s[1];
if(o=!1,s.splice(1,1),"\\"===m.substr(m.length-1))continue;if(h===u&&(u=[]),l.preFilter[d])if(s=l.preFilter[d](s,h,i,u,n,c)){if(s===!0)continue}else o=f=!0;if(s)for(var v=0;null!=(p=h[v]);v++)if(p){f=g(p,s,v,h);var y=n^!!f;i&&null!=f?y?o=!0:h[v]=!1:y&&(u.push(p),o=!0)}if(void 0!==f){if(i||(h=u),t=t.replace(l.match[d],""),!o)return[];break}}if(t===r){if(null!=o)break;a.error(t)}r=t}return h},a.error=function(t){throw"Syntax error, unrecognized expression: "+t};var l=a.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(t){return t.getAttribute("href")}},relative:{"+":function(t,e){var i="string"==typeof e,n=i&&!/\W/.test(e),s=i&&!n;n&&(e=e.toLowerCase());for(var o,r=0,l=t.length;l>r;r++)if(o=t[r]){for(;(o=o.previousSibling)&&1!==o.nodeType;);t[r]=s||o&&o.nodeName.toLowerCase()===e?o||!1:o===e}s&&a.filter(e,t,!0)},">":function(t,e){var i,n="string"==typeof e,s=0,o=t.length;if(n&&!/\W/.test(e)){for(e=e.toLowerCase();o>s;s++)if(i=t[s]){var r=i.parentNode;t[s]=r.nodeName.toLowerCase()===e?r:!1}}else{for(;o>s;s++)i=t[s],i&&(t[s]=n?i.parentNode:i.parentNode===e);n&&a.filter(e,t,!0)}},"":function(i,s,o){var r,a=n++,l=e;"string"!=typeof s||/\W/.test(s)||(s=s.toLowerCase(),r=s,l=t),l("parentNode",s,a,i,r,o)},"~":function(i,s,o){var r,a=n++,l=e;"string"!=typeof s||/\W/.test(s)||(s=s.toLowerCase(),r=s,l=t),l("previousSibling",s,a,i,r,o)}},find:{ID:function(t,e,i){if("undefined"!=typeof e.getElementById&&!i){var n=e.getElementById(t[1]);return n?[n]:[]}},NAME:function(t,e){if("undefined"!=typeof e.getElementsByName){for(var i=[],n=e.getElementsByName(t[1]),s=0,o=n.length;o>s;s++)n[s].getAttribute("name")===t[1]&&i.push(n[s]);return 0===i.length?null:i}},TAG:function(t,e){return e.getElementsByTagName(t[1])}},preFilter:{CLASS:function(t,e,i,n,s,o){if(t=" "+t[1].replace(/\\/g,"")+" ",o)return t;for(var r,a=0;null!=(r=e[a]);a++)r&&(s^(r.className&&(" "+r.className+" ").replace(/[\t\n]/g," ").indexOf(t)>=0)?i||n.push(r):i&&(e[a]=!1));return!1},ID:function(t){return t[1].replace(/\\/g,"")},TAG:function(t){return t[1].toLowerCase()},CHILD:function(t){if("nth"===t[1]){var e=/(-?)(\d*)n((?:\+|-)?\d*)/.exec("even"===t[2]&&"2n"||"odd"===t[2]&&"2n+1"||!/\D/.test(t[2])&&"0n+"+t[2]||t[2]);t[2]=e[1]+(e[2]||1)-0,t[3]=e[3]-0}return t[0]=n++,t},ATTR:function(t,e,i,n,s,o){var r=t[1].replace(/\\/g,"");return!o&&l.attrMap[r]&&(t[1]=l.attrMap[r]),"~="===t[2]&&(t[4]=" "+t[4]+" "),t},PSEUDO:function(t,e,n,s,o){if("not"===t[1]){if(!((i.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var r=a.filter(t[3],e,n,!0^o);return n||s.push.apply(s,r),!1}t[3]=a(t[3],null,null,e)}else if(l.match.POS.test(t[0])||l.match.CHILD.test(t[0]))return!0;return t},POS:function(t){return t.unshift(!0),t}},filters:{enabled:function(t){return t.disabled===!1&&"hidden"!==t.type},disabled:function(t){return t.disabled===!0},checked:function(t){return t.checked===!0},selected:function(t){return t.parentNode.selectedIndex,t.selected===!0},parent:function(t){return!!t.firstChild},empty:function(t){return!t.firstChild},has:function(t,e,i){return!!a(i[3],t).length},header:function(t){return/h\d/i.test(t.nodeName)},text:function(t){return"text"===t.type},radio:function(t){return"radio"===t.type},checkbox:function(t){return"checkbox"===t.type},file:function(t){return"file"===t.type},password:function(t){return"password"===t.type},submit:function(t){return"submit"===t.type},image:function(t){return"image"===t.type},reset:function(t){return"reset"===t.type},button:function(t){return"button"===t.type||"button"===t.nodeName.toLowerCase()},input:function(t){return/input|select|textarea|button/i.test(t.nodeName)}},setFilters:{first:function(t,e){return 0===e},last:function(t,e,i,n){return e===n.length-1},even:function(t,e){return 0===e%2},odd:function(t,e){return 1===e%2},lt:function(t,e,i){return e<i[3]-0},gt:function(t,e,i){return e>i[3]-0},nth:function(t,e,i){return i[3]-0===e},eq:function(t,e,i){return i[3]-0===e}},filter:{PSEUDO:function(t,e,i,n){var s=e[1],o=l.filters[s];if(o)return o(t,i,e,n);if("contains"===s)return(t.textContent||t.innerText||a.getText([t])||"").indexOf(e[3])>=0;if("not"===s){for(var r=e[3],u=0,h=r.length;h>u;u++)if(r[u]===t)return!1;return!0}a.error("Syntax error, unrecognized expression: "+s)},CHILD:function(t,e){var i=e[1],n=t;switch(i){case"only":case"first":for(;n=n.previousSibling;)if(1===n.nodeType)return!1;if("first"===i)return!0;n=t;case"last":for(;n=n.nextSibling;)if(1===n.nodeType)return!1;return!0;case"nth":var s=e[2],o=e[3];if(1===s&&0===o)return!0;var r=e[0],a=t.parentNode;if(a&&(a.sizcache!==r||!t.nodeIndex)){var l=0;for(n=a.firstChild;n;n=n.nextSibling)1===n.nodeType&&(n.nodeIndex=++l);a.sizcache=r}var u=t.nodeIndex-o;return 0===s?0===u:0===u%s&&u/s>=0}},ID:function(t,e){return 1===t.nodeType&&t.getAttribute("id")===e},TAG:function(t,e){return"*"===e&&1===t.nodeType||t.nodeName.toLowerCase()===e},CLASS:function(t,e){return(" "+(t.className||t.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(t,e){var i=e[1],n=l.attrHandle[i]?l.attrHandle[i](t):null!=t[i]?t[i]:t.getAttribute(i),s=n+"",o=e[2],r=e[4];return null==n?"!="===o:"="===o?s===r:"*="===o?s.indexOf(r)>=0:"~="===o?(" "+s+" ").indexOf(r)>=0:r?"!="===o?s!==r:"^="===o?0===s.indexOf(r):"$="===o?s.substr(s.length-r.length)===r:"|="===o?s===r||s.substr(0,r.length+1)===r+"-":!1:s&&n!==!1},POS:function(t,e,i,n){var s=e[2],o=l.setFilters[s];return o?o(t,i,e,n):void 0}}},u=l.match.POS,h=function(t,e){return"\\"+(e-0+1)};for(var c in l.match)l.match[c]=new RegExp(l.match[c].source+/(?![^\[]*\])(?![^\(]*\))/.source),l.leftMatch[c]=new RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[c].source.replace(/\\(\d+)/g,h));var d=function(t,e){return t=Array.prototype.slice.call(t,0),e?(e.push.apply(e,t),e):t};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(f){d=function(t,e){var i=e||[],n=0;if("[object Array]"===s.call(t))Array.prototype.push.apply(i,t);else if("number"==typeof t.length)for(var o=t.length;o>n;n++)i.push(t[n]);else for(;t[n];n++)i.push(t[n]);return i}}var p;document.documentElement.compareDocumentPosition?p=function(t,e){if(!t.compareDocumentPosition||!e.compareDocumentPosition)return t==e&&(o=!0),t.compareDocumentPosition?-1:1;var i=4&t.compareDocumentPosition(e)?-1:t===e?0:1;return 0===i&&(o=!0),i}:"sourceIndex"in document.documentElement?p=function(t,e){if(!t.sourceIndex||!e.sourceIndex)return t==e&&(o=!0),t.sourceIndex?-1:1;var i=t.sourceIndex-e.sourceIndex;return 0===i&&(o=!0),i}:document.createRange&&(p=function(t,e){if(!t.ownerDocument||!e.ownerDocument)return t==e&&(o=!0),t.ownerDocument?-1:1;var i=t.ownerDocument.createRange(),n=e.ownerDocument.createRange();i.setStart(t,0),i.setEnd(t,0),n.setStart(e,0),n.setEnd(e,0);var s=i.compareBoundaryPoints(Range.START_TO_END,n);return 0===s&&(o=!0),s}),a.getText=function(t){for(var e,i="",n=0;t[n];n++)e=t[n],3===e.nodeType||4===e.nodeType?i+=e.nodeValue:8!==e.nodeType&&(i+=a.getText(e.childNodes));return i},function(){var t=document.createElement("div"),e="script"+(new Date).getTime();t.innerHTML="<a name='"+e+"'/>";var i=document.documentElement;i.insertBefore(t,i.firstChild),document.getElementById(e)&&(l.find.ID=function(t,e,i){if("undefined"!=typeof e.getElementById&&!i){var n=e.getElementById(t[1]);return n?n.id===t[1]||"undefined"!=typeof n.getAttributeNode&&n.getAttributeNode("id").nodeValue===t[1]?[n]:void 0:[]}},l.filter.ID=function(t,e){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return 1===t.nodeType&&i&&i.nodeValue===e}),i.removeChild(t),i=t=null}(),function(){var t=document.createElement("div");t.appendChild(document.createComment("")),t.getElementsByTagName("*").length>0&&(l.find.TAG=function(t,e){var i=e.getElementsByTagName(t[1]);if("*"===t[1]){for(var n=[],s=0;i[s];s++)1===i[s].nodeType&&n.push(i[s]);i=n}return i}),t.innerHTML="<a href='#'></a>",t.firstChild&&"undefined"!=typeof t.firstChild.getAttribute&&"#"!==t.firstChild.getAttribute("href")&&(l.attrHandle.href=function(t){return t.getAttribute("href",2)}),t=null}(),document.querySelectorAll&&function(){var t=a,e=document.createElement("div");if(e.innerHTML="<p class='TEST'></p>",!e.querySelectorAll||0!==e.querySelectorAll(".TEST").length){a=function(e,i,n,s){if(i=i||document,!s&&9===i.nodeType&&!a.isXML(i))try{return d(i.querySelectorAll(e),n)}catch(o){}return t(e,i,n,s)};for(var i in t)a[i]=t[i];e=null}}(),function(){var t=document.createElement("div");t.innerHTML="<div class='test e'></div><div class='test'></div>",t.getElementsByClassName&&0!==t.getElementsByClassName("e").length&&(t.lastChild.className="e",1!==t.getElementsByClassName("e").length&&(l.order.splice(1,0,"CLASS"),l.find.CLASS=function(t,e,i){return"undefined"==typeof e.getElementsByClassName||i?void 0:e.getElementsByClassName(t[1])},t=null))}(),a.contains=document.compareDocumentPosition?function(t,e){return!!(16&t.compareDocumentPosition(e))}:function(t,e){return t!==e&&(t.contains?t.contains(e):!0)},a.isXML=function(t){var e=(t?t.ownerDocument||t:0).documentElement;return e?"HTML"!==e.nodeName:!1};var g=function(t,e){for(var i,n=[],s="",o=e.nodeType?[e]:e;i=l.match.PSEUDO.exec(t);)s+=i[0],t=t.replace(l.match.PSEUDO,"");t=l.relative[t]?t+"*":t;for(var r=0,u=o.length;u>r;r++)a(t,o[r],n);return a.filter(s,n)};window.tinymce.dom.Sizzle=a}(),function(t){var e,i=t.each,n=t.DOM,s=t.isIE;t.isWebKit,t.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[],this.events=[]},add:function(e,o,r,a){var l,u,h=this,c=h.events;return o instanceof Array?(u=[],i(o,function(t){u.push(h.add(e,t,r,a))}),u):e&&e.hasOwnProperty&&e instanceof Array?(u=[],i(e,function(t){t=n.get(t),u.push(h.add(t,o,r,a))}),u):(e=n.get(e))?(l=function(e){return h.disabled?void 0:(e=e||window.event,e&&s&&(e.target||(e.target=e.srcElement),t.extend(e,h._stoppers)),a?r.call(a,e):r(e))},"unload"==o?(t.unloads.unshift({func:l}),l):"init"==o?(h.domLoaded?l():h.inits.push(l),l):(c.push({obj:e,name:o,func:r,cfunc:l,scope:a}),h._add(e,o,l),r)):void 0},remove:function(t,e,s){var o,r=this,a=r.events,l=!1;return t&&t.hasOwnProperty&&t instanceof Array?(o=[],i(t,function(t){t=n.get(t),o.push(r.remove(t,e,s))}),o):(t=n.get(t),i(a,function(i,n){return i.obj!=t||i.name!=e||s&&i.func!=s&&i.cfunc!=s?void 0:(a.splice(n,1),r._remove(t,e,i.cfunc),l=!0,!1)}),l)},clear:function(t){var e,i,s=this,o=s.events;if(t)for(t=n.get(t),e=o.length-1;e>=0;e--)i=o[e],i.obj===t&&(s._remove(i.obj,i.name,i.cfunc),i.obj=i.cfunc=null,o.splice(e,1))},cancel:function(t){return t?(this.stop(t),this.prevent(t)):!1},stop:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,!1},prevent:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,!1},destroy:function(){var t=this;i(t.events,function(e){t._remove(e.obj,e.name,e.cfunc),e.obj=e.cfunc=null}),t.events=[],t=null},_add:function(t,e,i){t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener?t.addEventListener(e,i,!1):t["on"+e]=i},_remove:function(t,e,i){if(t)try{t.detachEvent?t.detachEvent("on"+e,i):t.removeEventListener?t.removeEventListener(e,i,!1):t["on"+e]=null}catch(n){}},_pageInit:function(){var t=this;t.domLoaded||(t.domLoaded=!0,i(t.inits,function(t){t()}),t.inits=[])},_wait:function(t){var e=this,i=t.document;return t.tinyMCE_GZ&&tinyMCE_GZ.loaded?(e.domLoaded=1,void 0):(i.attachEvent?(i.attachEvent("onreadystatechange",function(){"complete"===i.readyState&&(i.detachEvent("onreadystatechange",arguments.callee),e._pageInit(t))}),i.documentElement.doScroll&&t==t.top&&function(){if(!e.domLoaded){try{i.documentElement.doScroll("left")}catch(n){return setTimeout(arguments.callee,0),void 0}e._pageInit(t)}}()):i.addEventListener&&e._add(t,"DOMContentLoaded",function(){e._pageInit(t)}),e._add(t,"load",function(){e._pageInit(t)}),void 0)},_stoppers:{preventDefault:function(){this.returnValue=!1},stopPropagation:function(){this.cancelBubble=!0}}}),e=t.dom.Event=new t.dom.EventUtils,e._wait(window),t.addUnload(function(){e.destroy()})}(tinymce),function(t){t.dom.Element=function(e,i){var n,s,o=this;o.settings=i=i||{},o.id=e,o.dom=n=i.dom||t.DOM,t.isIE||(s=n.get(o.id)),t.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(t){o[t]=function(){var i,s=[e];for(i=0;i<arguments.length;i++)s.push(arguments[i]);return s=n[t].apply(n,s),o.update(t),s}}),t.extend(o,{on:function(e,i,n){return t.dom.Event.add(o.id,e,i,n)},getXY:function(){return{x:parseInt(o.getStyle("left")),y:parseInt(o.getStyle("top"))}},getSize:function(){var t=n.get(o.id);return{w:parseInt(o.getStyle("width")||t.clientWidth),h:parseInt(o.getStyle("height")||t.clientHeight)}},moveTo:function(t,e){o.setStyles({left:t,top:e})},moveBy:function(t,e){var i=o.getXY();o.moveTo(i.x+t,i.y+e)},resizeTo:function(t,e){o.setStyles({width:t,height:e})},resizeBy:function(t,e){var i=o.getSize();o.resizeTo(i.w+t,i.h+e)},update:function(e){var s;if(t.isIE6&&i.blocker){if(e=e||"",0===e.indexOf("get")||0===e.indexOf("has")||0===e.indexOf("is"))return;if("remove"==e)return n.remove(o.blocker),void 0;o.blocker?s=n.get(o.blocker):(o.blocker=n.uniqueId(),s=n.add(i.container||n.getRoot(),"iframe",{id:o.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),n.setStyle(s,"opacity",0)),n.setStyles(s,{left:o.getStyle("left",1),top:o.getStyle("top",1),width:o.getStyle("width",1),height:o.getStyle("height",1),display:o.getStyle("display",1),zIndex:parseInt(o.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(t){var e=t.is,i=t.isIE,n=t.each;t.create("tinymce.dom.Selection",{Selection:function(e,i,s){var o=this;o.dom=e,o.win=i,o.serializer=s,n(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(e){o[e]=new t.util.Dispatcher(o)}),o.win.getSelection||(o.tridentSel=new t.dom.TridentSelection(o)),t.isIE&&e.boxModel&&this._fixIESelection(),t.addUnload(o.destroy,o)},setCursorLocation:function(t,e){var i=this,n=i.dom.createRng();n.setStart(t,e),n.setEnd(t,e),i.setRng(n),i.collapse(!1)},getContent:function(t){var i,n,s,o=this,r=o.getRng(),a=o.dom.create("body"),l=o.getSel();return t=t||{},i=n="",t.get=!0,t.format=t.format||"html",t.forced_root_block="",o.onBeforeGetContent.dispatch(o,t),"text"==t.format?o.isCollapsed()?"":r.text||(l.toString?l.toString():""):(r.cloneContents?(s=r.cloneContents(),s&&a.appendChild(s)):e(r.item)||e(r.htmlText)?(a.innerHTML="<br>"+(r.item?r.item(0).outerHTML:r.htmlText),a.removeChild(a.firstChild)):a.innerHTML=r.toString(),/^\s/.test(a.innerHTML)&&(i=" "),/\s+$/.test(a.innerHTML)&&(n=" "),t.getInner=!0,t.content=o.isCollapsed()?"":i+o.serializer.serialize(a,t)+n,o.onGetContent.dispatch(o,t),t.content)},setContent:function(t,e){var i,n,s,o=this,r=o.getRng(),a=o.win.document;if(e=e||{format:"html"},e.set=!0,t=e.content=t,e.no_events||o.onBeforeSetContent.dispatch(o,e),t=e.content,r.insertNode){t+='<span id="__caret">_</span>',r.startContainer==a&&r.endContainer==a?a.body.innerHTML=t:(r.deleteContents(),0==a.body.childNodes.length?a.body.innerHTML=t:r.createContextualFragment?r.insertNode(r.createContextualFragment(t)):(n=a.createDocumentFragment(),s=a.createElement("div"),n.appendChild(s),s.outerHTML=t,r.insertNode(n))),i=o.dom.get("__caret"),r=a.createRange(),r.setStartBefore(i),r.setEndBefore(i),o.setRng(r),o.dom.remove("__caret");try{o.setRng(r)}catch(l){}}else r.item&&(a.execCommand("Delete",!1,null),r=o.getRng()),/^\s+/.test(t)?(r.pasteHTML('<span id="__mce_tmp">_</span>'+t),o.dom.remove("__mce_tmp")):r.pasteHTML(t);e.no_events||o.onSetContent.dispatch(o,e)},getStart:function(){var t,e,i,n,s=this.getRng();if(s.duplicate||s.item){if(s.item)return s.item(0);for(i=s.duplicate(),i.collapse(1),t=i.parentElement(),e=n=s.parentElement();n=n.parentNode;)if(n==t){t=e;break}return t}return t=s.startContainer,1==t.nodeType&&t.hasChildNodes()&&(t=t.childNodes[Math.min(t.childNodes.length-1,s.startOffset)]),t&&3==t.nodeType?t.parentNode:t},getEnd:function(){var t,e,i=this,n=i.getRng();return n.duplicate||n.item?n.item?n.item(0):(n=n.duplicate(),n.collapse(0),t=n.parentElement(),t&&"BODY"==t.nodeName?t.lastChild||t:t):(t=n.endContainer,e=n.endOffset,1==t.nodeType&&t.hasChildNodes()&&(t=t.childNodes[e>0?e-1:e]),t&&3==t.nodeType?t.parentNode:t)},getBookmark:function(t,e){function i(t,e){var i=0;return n(f.select(t),function(t,n){t==e&&(i=n)}),i}function s(){function t(t,i){var s,o,r=t[i?"startContainer":"endContainer"],a=t[i?"startOffset":"endOffset"],l=[],u=0;if(3==r.nodeType){if(e)for(s=r.previousSibling;s&&3==s.nodeType;s=s.previousSibling)a+=s.nodeValue.length;l.push(a)}else o=r.childNodes,a>=o.length&&o.length&&(u=1,a=Math.max(0,o.length-1)),l.push(d.dom.nodeIndex(o[a],e)+u);for(;r&&r!=n;r=r.parentNode)l.push(d.dom.nodeIndex(r,e));return l}var i=d.getRng(!0),n=f.getRoot(),s={};return s.start=t(i,!0),d.isCollapsed()||(s.end=t(i)),s}var o,r,a,l,u,h,c,d=this,f=d.dom,p="﻿";if(2==t)return d.tridentSel?d.tridentSel.getBookmark(t):s();if(t)return{rng:d.getRng()};if(o=d.getRng(),a=f.uniqueId(),l=tinyMCE.activeEditor.selection.isCollapsed(),c="overflow:hidden;line-height:0px",o.duplicate||o.item){if(o.item)return h=o.item(0),u=h.nodeName,{name:u,index:i(u,h)};r=o.duplicate();try{o.collapse(),o.pasteHTML('<span data-mce-type="bookmark" id="'+a+'_start" style="'+c+'">'+p+"</span>"),l||(r.collapse(!1),o.moveToElementText(r.parentElement()),0==o.compareEndPoints("StartToEnd",r)&&r.move("character",-1),r.pasteHTML('<span data-mce-type="bookmark" id="'+a+'_end" style="'+c+'">'+p+"</span>"))}catch(g){return null}}else{if(h=d.getNode(),u=h.nodeName,"IMG"==u)return{name:u,index:i(u,h)};r=o.cloneRange(),l||(r.collapse(!1),r.insertNode(f.create("span",{"data-mce-type":"bookmark",id:a+"_end",style:c},p))),o.collapse(!0),o.insertNode(f.create("span",{"data-mce-type":"bookmark",id:a+"_start",style:c},p))}return d.moveToBookmark({id:a,keep:1}),{id:a}},moveToBookmark:function(e){function s(t){var i,n,s,o,r=e[t?"start":"end"];if(r){for(s=r[0],n=l,i=r.length-1;i>=1;i--){if(o=n.childNodes,r[i]>o.length-1)return;n=o[r[i]]}3===n.nodeType&&(s=Math.min(r[0],n.nodeValue.length)),1===n.nodeType&&(s=Math.min(r[0],n.childNodes.length)),t?a.setStart(n,s):a.setEnd(n,s)}return!0}function o(i){var s,o,r,a,l=p.get(e.id+"_"+i),f=e.keep;if(l&&(s=l.parentNode,"start"==i?(f?(s=l.firstChild,o=1):o=p.nodeIndex(l),u=h=s,c=d=o):(f?(s=l.firstChild,o=1):o=p.nodeIndex(l),h=s,d=o),!f)){for(a=l.previousSibling,r=l.nextSibling,n(t.grep(l.childNodes),function(t){3==t.nodeType&&(t.nodeValue=t.nodeValue.replace(/\uFEFF/g,""))});l=p.get(e.id+"_"+i);)p.remove(l,1);a&&r&&a.nodeType==r.nodeType&&3==a.nodeType&&!t.isOpera&&(o=a.nodeValue.length,a.appendData(r.nodeValue),p.remove(r),"start"==i?(u=h=a,c=d=o):(h=a,d=o))}}function r(t){return p.isBlock(t)&&!t.innerHTML&&(t.innerHTML=i?" ":'<br data-mce-bogus="1" />'),t}var a,l,u,h,c,d,f=this,p=f.dom;if(e)if(e.start){if(a=p.createRng(),l=p.getRoot(),f.tridentSel)return f.tridentSel.moveToBookmark(e);s(!0)&&s()&&f.setRng(a)}else e.id?(o("start"),o("end"),u&&(a=p.createRng(),a.setStart(r(u),c),a.setEnd(r(h),d),f.setRng(a))):e.name?f.select(p.select(e.name)[e.index]):e.rng&&f.setRng(e.rng)},select:function(e,i){function n(e,i){var n=new t.dom.TreeWalker(e,e);do{if(3==e.nodeType&&0!=t.trim(e.nodeValue).length)return i?a.setStart(e,0):a.setEnd(e,e.nodeValue.length),void 0;if("BR"==e.nodeName)return i?a.setStartBefore(e):a.setEndBefore(e),void 0}while(e=i?n.next():n.prev())}var s,o=this,r=o.dom,a=r.createRng();return e&&(s=r.nodeIndex(e),a.setStart(e.parentNode,s),a.setEnd(e.parentNode,s+1),i&&(n(e,1),n(e)),o.setRng(a)),e},isCollapsed:function(){var t=this,e=t.getRng(),i=t.getSel();return!e||e.item?!1:e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!i||e.collapsed},collapse:function(t){var e,i=this,n=i.getRng();n.item&&(e=n.item(0),n=i.win.document.body.createTextRange(),n.moveToElementText(e)),n.collapse(!!t),i.setRng(n)},getSel:function(){var t=this.win;return t.getSelection?t.getSelection():t.document.selection},getRng:function(e){var i,n,s,o=this,r=o.win.document;if(e&&o.tridentSel)return o.tridentSel.getRangeAt(0);try{(i=o.getSel())&&(n=i.rangeCount>0?i.getRangeAt(0):i.createRange?i.createRange():r.createRange())}catch(a){}return t.isIE&&n&&n.setStart&&r.selection.createRange().item&&(s=r.selection.createRange().item(0),n=r.createRange(),n.setStartBefore(s),n.setEndAfter(s)),n||(n=r.createRange?r.createRange():r.body.createTextRange()),o.selectedRange&&o.explicitRange&&(0===n.compareBoundaryPoints(n.START_TO_START,o.selectedRange)&&0===n.compareBoundaryPoints(n.END_TO_END,o.selectedRange)?n=o.explicitRange:(o.selectedRange=null,o.explicitRange=null)),n},setRng:function(t){var e,i=this;if(i.tridentSel){if(t.cloneRange)return i.tridentSel.addRange(t),void 0;try{t.select()}catch(n){}}else if(e=i.getSel()){i.explicitRange=t;try{e.removeAllRanges()}catch(n){}e.addRange(t),i.selectedRange=e.getRangeAt(0)}},setNode:function(t){var e=this;return e.setContent(e.dom.getOuterHTML(t)),t},getNode:function(){function t(t,e){for(var i=t;t&&3===t.nodeType&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||i}var e,i=this,n=i.getRng(),s=(i.getSel(),n.startContainer),o=n.endContainer;return n?n.setStart?(e=n.commonAncestorContainer,!n.collapsed&&(n.startContainer==n.endContainer&&n.endOffset-n.startOffset<2&&n.startContainer.hasChildNodes()&&(e=n.startContainer.childNodes[n.startOffset]),3===s.nodeType&&3===o.nodeType&&(s=s.length===n.startOffset?t(s.nextSibling,!0):s.parentNode,o=0===n.endOffset?t(o.previousSibling,!1):o.parentNode,s&&s===o))?s:e&&3==e.nodeType?e.parentNode:e):n.item?n.item(0):n.parentElement():i.dom.getRoot()},getSelectedBlocks:function(t,e){var i,n,s,o=this,r=o.dom,a=[];if(i=r.getParent(t||o.getStart(),r.isBlock),n=r.getParent(e||o.getEnd(),r.isBlock),i&&a.push(i),i&&n&&i!=n)for(s=i;(s=s.nextSibling)&&s!=n;)r.isBlock(s)&&a.push(s);return n&&i!=n&&a.push(n),a},normalize:function(){function e(e){var o,r,a,l,u=s.dom,h=u.getRoot();if(o=i[(e?"start":"end")+"Container"],r=i[(e?"start":"end")+"Offset"],9===o.nodeType&&(o=o.body,r=0),o===h&&o.hasChildNodes()&&(o=o.childNodes[Math.min(!e&&r>0?r-1:r,o.childNodes.length-1)],r=0,o.hasChildNodes())){l=o,a=new t.dom.TreeWalker(o,h);do{if(3===l.nodeType){r=e?0:l.nodeValue.length-1,o=l;break}if("BR"===l.nodeName){r=u.nodeIndex(l),o=l.parentNode;break}}while(l=e?a.next():a.prev());n=!0}n&&i["set"+(e?"Start":"End")](o,r)}var i,n,s=this;t.isIE||(i=s.getRng(),e(!0),i.collapsed&&e(),n&&s.setRng(i))},destroy:function(e){var i=this;i.win=null,e||t.removeUnload(i.destroy)},_fixIESelection:function(){function t(t,e){var i=l.createTextRange();try{i.moveToPoint(t,e)}catch(n){i=null}return i}function e(e){var n;e.button?(n=t(e.x,e.y),n&&(n.compareEndPoints("StartToStart",s)>0?n.setEndPoint("StartToStart",s):n.setEndPoint("EndToEnd",s),n.select())):i()}function i(){var t=a.selection.createRange();s&&!t.item&&0===t.compareEndPoints("StartToEnd",t)&&s.select(),r.unbind(a,"mouseup",i),r.unbind(a,"mousemove",e),s=n=0}var n,s,o,r=this.dom,a=r.doc,l=a.body;a.documentElement.unselectable=!0,r.bind(a,["mousedown","contextmenu"],function(l){if("HTML"===l.target.nodeName){if(n&&i(),o=a.documentElement,o.scrollHeight>o.clientHeight)return;n=1,s=t(l.x,l.y),s&&(r.bind(a,"mouseup",i),r.bind(a,"mousemove",e),r.win.focus(),s.select())}})}})}(tinymce),function(t){t.dom.Serializer=function(e,i,n){var s,o,r,a=t.isIE,l=t.each;return e.apply_source_formatting||(e.indent=!1),e.remove_trailing_brs=!0,i=i||t.DOM,n=n||new t.html.Schema(e),e.entity_encoding=e.entity_encoding||"named",s=new t.util.Dispatcher(self),o=new t.util.Dispatcher(self),r=new t.html.DomParser(e,n),r.addAttributeFilter("src,href,style",function(t,n){for(var s,o,r,a=t.length,l="data-mce-"+n,u=e.url_converter,h=e.url_converter_scope;a--;)s=t[a],o=s.attributes.map[l],o!==r?(s.attr(n,o.length>0?o:null),s.attr(l,null)):(o=s.attributes.map[n],"style"===n?o=i.serializeStyle(i.parseStyle(o),s.name):u&&(o=u.call(h,o,n,s.name)),s.attr(n,o.length>0?o:null))}),r.addAttributeFilter("class",function(t){for(var e,i,n=t.length;n--;)e=t[n],i=e.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,""),e.attr("class",i.length>0?i:null)}),r.addAttributeFilter("data-mce-type",function(t,e,i){for(var n,s=t.length;s--;)n=t[s],"bookmark"!==n.attributes.map["data-mce-type"]||i.cleanup||n.remove()}),r.addNodeFilter("script,style",function(t,e){function i(t){return t.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"").replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"")}for(var n,s,o=t.length;o--;)n=t[o],s=n.firstChild?n.firstChild.value:"","script"===e?(n.attr("type",(n.attr("type")||"text/javascript").replace(/^mce\-/,"")),s.length>0&&(n.firstChild.value="// <![CDATA[\n"+i(s)+"\n// ]]>")):s.length>0&&(n.firstChild.value="<!--\n"+i(s)+"\n-->")}),r.addNodeFilter("#comment",function(t){for(var e,i=t.length;i--;)e=t[i],0===e.value.indexOf("[CDATA[")?(e.name="#cdata",e.type=4,e.value=e.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===e.value.indexOf("mce:protected ")&&(e.name="#text",e.type=3,e.raw=!0,e.value=unescape(e.value).substr(14))}),r.addNodeFilter("xml:namespace,input",function(t,e){for(var i,n=t.length;n--;)i=t[n],7===i.type?i.remove():1===i.type&&("input"!==e||"type"in i.attributes.map||i.attr("type","text"))}),e.fix_list_elements&&r.addNodeFilter("ul,ol",function(t){for(var e,i,n=t.length;n--;)e=t[n],i=e.parent,("ul"===i.name||"ol"===i.name)&&e.prev&&"li"===e.prev.name&&e.prev.append(e)}),r.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(t,e){for(var i=t.length;i--;)t[i].attr(e,null)}),{schema:n,addNodeFilter:r.addNodeFilter,addAttributeFilter:r.addAttributeFilter,onPreProcess:s,onPostProcess:o,serialize:function(u,h){var c,d,f,p,g;return a&&i.select("script,style,select,map").length>0?(g=u.innerHTML,u=u.cloneNode(!1),i.setHTML(u,g)):u=u.cloneNode(!0),c=u.ownerDocument.implementation,c.createHTMLDocument&&(d=c.createHTMLDocument(""),l("BODY"==u.nodeName?u.childNodes:[u],function(t){d.body.appendChild(d.importNode(t,!0))}),u="BODY"!=u.nodeName?d.body.firstChild:d.body,f=i.doc,i.doc=d),h=h||{},h.format=h.format||"html",h.no_events||(h.node=u,s.dispatch(self,h)),p=new t.html.Serializer(e,n),h.content=p.serialize(r.parse(h.getInner?u.innerHTML:t.trim(i.getOuterHTML(u),h),h)),h.cleanup||(h.content=h.content.replace(/\uFEFF/g,"")),h.no_events||o.dispatch(self,h),f&&(i.doc=f),h.node=null,h.content},addRules:function(t){n.addValidElements(t)},setRules:function(t){n.setValidElements(t)}}}}(tinymce),function(t){t.dom.ScriptLoader=function(){function e(e,i){function n(){u.remove(l),o&&(o.onreadystatechange=o.onload=o=null),i()}function s(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+e)}var o,r,a,l,u=t.DOM;return l=u.uniqueId(),t.isIE6&&(r=new t.util.URI(e),a=location,r.host==a.hostname&&r.port==a.port&&r.protocol+":"==a.protocol&&"file"!=r.protocol.toLowerCase())?(t.util.XHR.send({url:t._addVer(r.getURI()),success:function(t){var e=u.create("script",{type:"text/javascript"});e.text=t,document.getElementsByTagName("head")[0].appendChild(e),u.remove(e),n()},error:s}),void 0):(o=u.create("script",{id:l,type:"text/javascript",src:t._addVer(e)}),t.isIE||(o.onload=n),o.onerror=s,t.isOpera||(o.onreadystatechange=function(){var t=o.readyState;("complete"==t||"loaded"==t)&&n()}),(document.getElementsByTagName("head")[0]||document.body).appendChild(o),void 0)}var i,n=0,s=1,o=2,r={},a=[],l={},u=[],h=0;this.isDone=function(t){return r[t]==o},this.markDone=function(t){r[t]=o},this.add=this.load=function(t,e,s){var o=r[t];o==i&&(a.push(t),r[t]=n),e&&(l[t]||(l[t]=[]),l[t].push({func:e,scope:s||this}))},this.loadQueue=function(t,e){this.loadScripts(a,t,e)},this.loadScripts=function(n,a,c){function d(e){t.each(l[e],function(t){t.func.call(t.scope)}),l[e]=i}var f;u.push({func:a,scope:c||this}),f=function(){var i=t.grep(n);n.length=0,t.each(i,function(t){return r[t]==o?(d(t),void 0):(r[t]!=s&&(r[t]=s,h++,e(t,function(){r[t]=o,h--,d(t),f()})),void 0)}),h||(t.each(u,function(t){t.func.call(t.scope)}),u.length=0)},f()}},t.ScriptLoader=new t.dom.ScriptLoader}(tinymce),tinymce.dom.TreeWalker=function(t,e){function i(t,i,n,s){var o,r;if(t){if(!s&&t[i])return t[i];if(t!=e){if(o=t[n])return o;for(r=t.parentNode;r&&r!=e;r=r.parentNode)if(o=r[n])return o}}}var n=t;this.current=function(){return n},this.next=function(t){return n=i(n,"firstChild","nextSibling",t)},this.prev=function(t){return n=i(n,"lastChild","previousSibling",t)}},function(t){t.dom.RangeUtils=function(e){this.walk=function(i,n){function s(t,e,i){for(var n=[];t&&t!=i;t=t[e])n.push(t);return n}function o(t,e){do{if(t.parentNode==e)return t;t=t.parentNode}while(t)}function r(t,e,i){var o=i?"nextSibling":"previousSibling";for(h=t,c=h.parentNode;h&&h!=e;h=c)c=h.parentNode,d=s(h==t?h:h[o],o),d.length&&(i||d.reverse(),n(d))}var a,l,u,h,c,d,f,p=i.startContainer,g=i.startOffset,m=i.endContainer,v=i.endOffset;if(f=e.select("td.mceSelected,th.mceSelected"),f.length>0)return t.each(f,function(t){n([t])}),void 0;if(1==p.nodeType&&p.hasChildNodes()&&(p=p.childNodes[g]),1==m.nodeType&&m.hasChildNodes()&&(m=m.childNodes[Math.min(v-1,m.childNodes.length-1)]),a=e.findCommonAncestor(p,m),p==m)return n([p]);for(h=p;h;h=h.parentNode){if(h==m)return r(p,a,!0);if(h==a)break}for(h=m;h;h=h.parentNode){if(h==p)return r(m,a);if(h==a)break}l=o(p,a)||p,u=o(m,a)||m,r(p,l,!0),d=s(l==p?l:l.nextSibling,"nextSibling",u==m?u.nextSibling:u),d.length&&n(d),r(m,u)}},t.dom.RangeUtils.compareRanges=function(t,e){if(t&&e){if(!t.item&&!t.duplicate)return t.startContainer==e.startContainer&&t.startOffset==e.startOffset;if(t.item&&e.item&&t.item(0)===e.item(0))return!0;if(t.isEqual&&e.isEqual&&e.isEqual(t))return!0}return!1}}(tinymce),function(t){var e=t.dom.Event,i=t.each;t.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(n,s){var o,r,a,l,u,h=this,c=n.root,d=n.items,f=n.enableUpDown,p=n.enableLeftRight||!n.enableUpDown,g=n.excludeFromTabOrder;s=s||t.DOM,o=function(t){u=t.target.id},r=function(t){s.setAttrib(t.target.id,"tabindex","-1")},l=function(){var t=s.get(u);s.setAttrib(t,"tabindex","0"),t.focus()},h.focus=function(){s.get(u).focus()},h.destroy=function(){i(d,function(t){s.unbind(s.get(t.id),"focus",o),s.unbind(s.get(t.id),"blur",r)}),s.unbind(s.get(c),"focus",l),s.unbind(s.get(c),"keydown",a),d=s=c=h.focus=o=r=a=l=null,h.destroy=function(){}},h.moveFocus=function(t,o){var r,a=-1;h.controls,u&&(i(d,function(t,e){return t.id===u?(a=e,!1):void 0}),a+=t,0>a?a=d.length-1:a>=d.length&&(a=0),r=d[a],s.setAttrib(u,"tabindex","-1"),s.setAttrib(r.id,"tabindex","0"),s.get(r.id).focus(),n.actOnFocus&&n.onAction(r.id),o&&e.cancel(o))},a=function(t){var i=37,s=39,o=38,r=40,a=27,l=14,c=13,d=32;switch(t.keyCode){case i:p&&h.moveFocus(-1);break;case s:p&&h.moveFocus(1);break;case o:f&&h.moveFocus(-1);break;case r:f&&h.moveFocus(1);break;case a:n.onCancel&&(n.onCancel(),e.cancel(t));break;case l:case c:case d:n.onAction&&(n.onAction(u),e.cancel(t))}},i(d,function(t,e){var i;t.id||(t.id=s.uniqueId("_mce_item_")),g?(s.bind(t.id,"blur",r),i="-1"):i=0===e?"0":"-1",s.setAttrib(t.id,"tabindex",i),s.bind(s.get(t.id),"focus",o)}),d[0]&&(u=d[0].id),s.setAttrib(c,"tabindex","-1"),s.bind(s.get(c),"focus",l),s.bind(s.get(c),"keydown",a)}})}(tinymce),function(t){var e=t.DOM,i=t.is;t.create("tinymce.ui.Control",{Control:function(e,i,n){this.id=e,this.settings=i=i||{},this.rendered=!1,this.onRender=new t.util.Dispatcher(this),this.classPrefix="",this.scope=i.scope||this,this.disabled=0,this.active=0,this.editor=n},setAriaProperty:function(t,i){var n=e.get(this.id+"_aria")||e.get(this.id);n&&e.setAttrib(n,"aria-"+t,!!i)},focus:function(){e.get(this.id).focus()},setDisabled:function(t){t!=this.disabled&&(this.setAriaProperty("disabled",t),this.setState("Disabled",t),this.setState("Enabled",!t),this.disabled=t)},isDisabled:function(){return this.disabled},setActive:function(t){t!=this.active&&(this.setState("Active",t),this.active=t,this.setAriaProperty("pressed",t))},isActive:function(){return this.active},setState:function(t,i){var n=e.get(this.id);t=this.classPrefix+t,i?e.addClass(n,t):e.removeClass(n,t)
},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(t){e.setHTML(t,this.renderHTML())},postRender:function(){var t,e=this;i(e.disabled)&&(t=e.disabled,e.disabled=-1,e.setDisabled(t)),i(e.active)&&(t=e.active,e.active=-1,e.setActive(t))},remove:function(){e.remove(this.id),this.destroy()},destroy:function(){t.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(t,e,i){this.parent(t,e,i),this.controls=[],this.lookup={}},add:function(t){return this.lookup[t.id]=t,this.controls.push(t),t},get:function(t){return this.lookup[t]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(t,e){this.parent(t,e),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(t){var e=t.is;t.DOM,t.each,t.walk,t.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(t,e){this.parent(t,e),this.classPrefix="mceMenuItem"},setSelected:function(t){this.setState("Selected",t),this.setAriaProperty("checked",!!t),this.selected=t},isSelected:function(){return this.selected},postRender:function(){var t=this;t.parent(),e(t.selected)&&t.setSelected(t.selected)}})}(tinymce),function(t){var e=(t.is,t.DOM),i=(t.each,t.walk);t.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(e,i){var n=this;n.parent(e,i),n.items={},n.collapsed=!1,n.menuCount=0,n.onAddItem=new t.util.Dispatcher(this)},expand:function(t){var e=this;t&&i(e,function(t){t.expand&&t.expand()},"items",e),e.collapsed=!1},collapse:function(t){var e=this;t&&i(e,function(t){t.collapse&&t.collapse()},"items",e),e.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(i){return i.settings||(i=new t.ui.MenuItem(i.id||e.uniqueId(),i)),this.onAddItem.dispatch(this,i),this.items[i.id]=i},addSeparator:function(){return this.add({separator:!0})},addMenu:function(t){return t.collapse||(t=this.createMenu(t)),this.menuCount++,this.add(t)},hasMenus:function(){return 0!==this.menuCount},remove:function(t){delete this.items[t.id]},removeAll:function(){var t=this;i(t,function(t){t.removeAll?t.removeAll():t.remove(),t.destroy()},"items",t),t.items={}},createMenu:function(i){var n=new t.ui.Menu(i.id||e.uniqueId(),i);return n.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),n}})}(tinymce),function(t){var e=t.is,i=t.DOM,n=t.each,s=t.dom.Event,o=t.dom.Element;t.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(n,s){s=s||{},s.container=s.container||i.doc.body,s.offset_x=s.offset_x||0,s.offset_y=s.offset_y||0,s.vp_offset_x=s.vp_offset_x||0,s.vp_offset_y=s.vp_offset_y||0,e(s.icons)&&!s.icons&&(s["class"]+=" mceNoIcons"),this.parent(n,s),this.onShowMenu=new t.util.Dispatcher(this),this.onHideMenu=new t.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(e){var n,s=this,o=s.settings;return e.container=e.container||o.container,e.parent=s,e.constrain=e.constrain||o.constrain,e["class"]=e["class"]||o["class"],e.vp_offset_x=e.vp_offset_x||o.vp_offset_x,e.vp_offset_y=e.vp_offset_y||o.vp_offset_y,e.keyboard_focus=o.keyboard_focus,n=new t.ui.DropMenu(e.id||i.uniqueId(),e),n.onAddItem.add(s.onAddItem.dispatch,s.onAddItem),n},focus:function(){var t=this;t.keyboardNav&&t.keyboardNav.focus()},update:function(){var t,e,n=this,s=n.settings,o=i.get("menu_"+n.id+"_tbl"),r=i.get("menu_"+n.id+"_co");t=s.max_width?Math.min(o.clientWidth,s.max_width):o.clientWidth,e=s.max_height?Math.min(o.clientHeight,s.max_height):o.clientHeight,i.boxModel?n.element.setStyles({width:t,height:e}):n.element.setStyles({width:t+2,height:e+2}),s.max_width&&i.setStyle(r,"width",t),s.max_height&&(i.setStyle(r,"height",e),o.clientHeight<s.max_height&&i.setStyle(r,"overflow","hidden"))},showMenu:function(e,r,a){var l,u,h,c,d,f,p=this,g=p.settings,m=i.getViewPort(),v=2,y=p.classPrefix;p.collapse(1),p.isMenuVisible||(p.rendered?l=i.get("menu_"+p.id):(l=i.add(p.settings.container,p.renderNode()),n(p.items,function(t){t.postRender()}),p.element=new o("menu_"+p.id,{blocker:1,container:g.container})),t.isOpera||i.setStyles(l,{left:-65535,top:-65535}),i.show(l),p.update(),e+=g.offset_x||0,r+=g.offset_y||0,m.w-=4,m.h-=4,g.constrain&&(u=l.clientWidth-v,h=l.clientHeight-v,c=m.x+m.w,d=m.y+m.h,e+g.vp_offset_x+u>c&&(e=a?a-u:Math.max(0,c-g.vp_offset_x-u)),r+g.vp_offset_y+h>d&&(r=Math.max(0,d-g.vp_offset_y-h))),i.setStyles(l,{left:e,top:r}),p.element.update(),p.isMenuVisible=1,p.mouseClickFunc=s.add(l,"click",function(t){var e;if(t=t.target,t&&(t=i.getParent(t,"tr"))&&!i.hasClass(t,y+"ItemSub")){if(e=p.items[t.id],e.isDisabled())return;for(f=p;f;)f.hideMenu&&f.hideMenu(),f=f.settings.parent;return e.settings.onclick&&e.settings.onclick(t),s.cancel(t)}}),p.hasMenus()&&(p.mouseOverFunc=s.add(l,"mouseover",function(t){var e,n;if(t=t.target,t&&(t=i.getParent(t,"tr"))){if(e=p.items[t.id],p.lastMenu&&p.lastMenu.collapse(1),e.isDisabled())return;t&&i.hasClass(t,y+"ItemSub")&&(n=i.getRect(t),e.showMenu(n.x+n.w-v,n.y-v,n.x),p.lastMenu=e,i.addClass(i.get(e.id).firstChild,y+"ItemActive"))}})),s.add(l,"keydown",p._keyHandler,p),p.onShowMenu.dispatch(p),g.keyboard_focus&&p._setupKeyboardNav())},hideMenu:function(t){var e,n=this,o=i.get("menu_"+n.id);n.isMenuVisible&&(n.keyboardNav&&n.keyboardNav.destroy(),s.remove(o,"mouseover",n.mouseOverFunc),s.remove(o,"click",n.mouseClickFunc),s.remove(o,"keydown",n._keyHandler),i.hide(o),n.isMenuVisible=0,t||n.collapse(1),n.element&&n.element.hide(),(e=i.get(n.id))&&i.removeClass(e.firstChild,n.classPrefix+"ItemActive"),n.onHideMenu.dispatch(n))},add:function(t){var e,n=this;return t=n.parent(t),n.isRendered&&(e=i.get("menu_"+n.id))&&n._add(i.select("tbody",e)[0],t),t},collapse:function(t){this.parent(t),this.hideMenu(1)},remove:function(t){return i.remove(t.id),this.destroy(),this.parent(t)},destroy:function(){var t=this,e=i.get("menu_"+t.id);t.keyboardNav&&t.keyboardNav.destroy(),s.remove(e,"mouseover",t.mouseOverFunc),s.remove(i.select("a",e),"focus",t.mouseOverFunc),s.remove(e,"click",t.mouseClickFunc),s.remove(e,"keydown",t._keyHandler),t.element&&t.element.remove(),i.remove(e)},renderNode:function(){var t,e,s,r,a=this,l=a.settings;return r=i.create("div",{role:"listbox",id:"menu_"+a.id,"class":l["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),a.settings.parent&&i.setAttrib(r,"aria-parent","menu_"+a.settings.parent.id),s=i.add(r,"div",{role:"presentation",id:"menu_"+a.id+"_co","class":a.classPrefix+(l["class"]?" "+l["class"]:"")}),a.element=new o("menu_"+a.id,{blocker:1,container:l.container}),l.menu_line&&i.add(s,"span",{"class":a.classPrefix+"Line"}),t=i.add(s,"table",{role:"presentation",id:"menu_"+a.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),e=i.add(t,"tbody"),n(a.items,function(t){a._add(e,t)}),a.rendered=!0,r},_setupKeyboardNav:function(){var e,n,s=this;e=i.select("#menu_"+s.id)[0],n=i.select("a[role=option]","menu_"+s.id),n.splice(0,0,e),s.keyboardNav=new t.ui.KeyboardNavigation({root:"menu_"+s.id,items:n,onCancel:function(){s.hideMenu()},enableUpDown:!0}),e.focus()},_keyHandler:function(t){var e=this;switch(t.keyCode){case 37:e.settings.parent&&(e.hideMenu(),e.settings.parent.focus(),s.cancel(t));break;case 39:e.mouseOverFunc&&e.mouseOverFunc(t)}},_add:function(t,e){var n,s,o,r,a,l=e.settings,u=this.classPrefix;return l.separator?(o=i.add(t,"tr",{id:e.id,"class":u+"ItemSeparator"}),i.add(o,"td",{"class":u+"ItemSeparator"}),(n=o.previousSibling)&&i.addClass(n,"mceLast"),void 0):(n=o=i.add(t,"tr",{id:e.id,"class":u+"Item "+u+"ItemEnabled"}),n=r=i.add(n,l.titleItem?"th":"td"),n=s=i.add(n,"a",{id:e.id+"_aria",role:l.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),l.parent&&(i.setAttrib(s,"aria-haspopup","true"),i.setAttrib(s,"aria-owns","menu_"+e.id)),i.addClass(r,l["class"]),a=i.add(n,"span",{"class":"mceIcon"+(l.icon?" mce_"+l.icon:"")}),l.icon_src&&i.add(a,"img",{src:l.icon_src}),n=i.add(n,l.element||"span",{"class":"mceText",title:e.settings.title},e.settings.title),e.settings.style&&i.setAttrib(n,"style",e.settings.style),1==t.childNodes.length&&i.addClass(o,"mceFirst"),(n=o.previousSibling)&&i.hasClass(n,u+"ItemSeparator")&&i.addClass(o,"mceFirst"),e.collapse&&i.addClass(o,u+"ItemSub"),(n=o.previousSibling)&&i.removeClass(n,"mceLast"),i.addClass(o,"mceLast"),void 0)}})}(tinymce),function(t){var e=t.DOM;t.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(t,e,i){this.parent(t,e,i),this.classPrefix="mceButton"},renderHTML:function(){var t,i,n=this.classPrefix,s=this.settings;return i=e.encode(s.label||""),t='<a role="button" id="'+this.id+'" href="javascript:;" class="'+n+" "+n+"Enabled "+s["class"]+(i?" "+n+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+e.encode(s.title)+'">',t+=!s.image||this.editor&&this.editor.forcedHighContrastMode?'<span class="mceIcon '+s["class"]+'"></span>'+(i?'<span class="'+n+'Label">'+i+"</span>":""):'<img class="mceIcon" src="'+s.image+'" alt="'+e.encode(s.title)+'" />'+i,t+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+s.title+"</span>",t+="</a>"},postRender:function(){var e=this,i=e.settings;t.dom.Event.add(e.id,"click",function(t){return e.isDisabled()?void 0:i.onclick.call(i.scope,t)})}})}(tinymce),function(t){var e=t.DOM,i=t.dom.Event,n=t.each,s=t.util.Dispatcher;t.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(e,i,n){var o=this;o.parent(e,i,n),o.items=[],o.onChange=new s(o),o.onPostRender=new s(o),o.onAdd=new s(o),o.onRenderMenu=new t.util.Dispatcher(this),o.classPrefix="mceListBox"},select:function(t){var e,i,s=this;return void 0==t?s.selectByIndex(-1):(i=t&&t.call?t:function(e){return e==t},t!=s.selectedValue&&(n(s.items,function(t,n){return i(t.value)?(e=1,s.selectByIndex(n),!1):void 0}),e||s.selectByIndex(-1)),void 0)},selectByIndex:function(t){var i,n,s,o=this;t!=o.selectedIndex&&(i=e.get(o.id+"_text"),s=e.get(o.id+"_voiceDesc"),n=o.items[t],n?(o.selectedValue=n.value,o.selectedIndex=t,e.setHTML(i,e.encode(n.title)),e.setHTML(s,o.settings.title+" - "+n.title),e.removeClass(i,"mceTitle"),e.setAttrib(o.id,"aria-valuenow",n.title)):(e.setHTML(i,e.encode(o.settings.title)),e.setHTML(s,e.encode(o.settings.title)),e.addClass(i,"mceTitle"),o.selectedValue=o.selectedIndex=null,e.setAttrib(o.id,"aria-valuenow",o.settings.title)),i=0)},add:function(e,i,n){var s=this;n=n||{},n=t.extend(n,{title:e,value:i}),s.items.push(n),s.onAdd.dispatch(s,n)},getLength:function(){return this.items.length},renderHTML:function(){var t="",i=this,n=i.settings,s=i.classPrefix;return t='<span role="listbox" aria-haspopup="true" aria-labelledby="'+i.id+'_voiceDesc" aria-describedby="'+i.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+i.id+'" cellpadding="0" cellspacing="0" class="'+s+" "+s+"Enabled"+(n["class"]?" "+n["class"]:"")+'"><tbody><tr>',t+="<td>"+e.createHTML("span",{id:i.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},i.settings.title),t+=e.createHTML("a",{id:i.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},e.encode(i.settings.title))+"</td>",t+="<td>"+e.createHTML("a",{id:i.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>",t+="</tr></tbody></table></span>"},showMenu:function(){var s,o,r=this,a=e.get(this.id);if(!r.isDisabled()&&0!=r.items.length){if(r.menu&&r.menu.isMenuVisible)return r.hideMenu();r.isMenuRendered||(r.renderMenu(),r.isMenuRendered=!0),s=e.getPos(a),o=r.menu,o.settings.offset_x=s.x,o.settings.offset_y=s.y,o.settings.keyboard_focus=!t.isOpera,r.oldID&&o.items[r.oldID].setSelected(0),n(r.items,function(t){t.value===r.selectedValue&&(o.items[t.id].setSelected(1),r.oldID=t.id)}),o.showMenu(0,a.clientHeight),i.add(e.doc,"mousedown",r.hideMenu,r),e.addClass(r.id,r.classPrefix+"Selected")}},hideMenu:function(t){var n=this;if(n.menu&&n.menu.isMenuVisible){if(e.removeClass(n.id,n.classPrefix+"Selected"),t&&"mousedown"==t.type&&(t.target.id==n.id+"_text"||t.target.id==n.id+"_open"))return;t&&e.getParent(t.target,".mceMenu")||(e.removeClass(n.id,n.classPrefix+"Selected"),i.remove(e.doc,"mousedown",n.hideMenu,n),n.menu.hideMenu())}},renderMenu:function(){var t,i=this;t=i.settings.control_manager.createDropMenu(i.id+"_menu",{menu_line:1,"class":i.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150}),t.onHideMenu.add(function(){i.hideMenu(),i.focus()}),t.add({title:i.settings.title,"class":"mceMenuItemTitle",onclick:function(){i.settings.onselect("")!==!1&&i.select("")}}),n(i.items,function(n){void 0===n.value?t.add({title:n.title,role:"option","class":"mceMenuItemTitle",onclick:function(){i.settings.onselect("")!==!1&&i.select("")}}):(n.id=e.uniqueId(),n.role="option",n.onclick=function(){i.settings.onselect(n.value)!==!1&&i.select(n.value)},t.add(n))}),i.onRenderMenu.dispatch(i,t),i.menu=t},postRender:function(){var n=this,s=n.classPrefix;i.add(n.id,"click",n.showMenu,n),i.add(n.id,"keydown",function(t){32==t.keyCode&&(n.showMenu(t),i.cancel(t))}),i.add(n.id,"focus",function(){n._focused||(n.keyDownHandler=i.add(n.id,"keydown",function(t){40==t.keyCode&&(n.showMenu(),i.cancel(t))}),n.keyPressHandler=i.add(n.id,"keypress",function(t){var e;13==t.keyCode&&(e=n.selectedValue,n.selectedValue=null,i.cancel(t),n.settings.onselect(e))})),n._focused=1}),i.add(n.id,"blur",function(){i.remove(n.id,"keydown",n.keyDownHandler),i.remove(n.id,"keypress",n.keyPressHandler),n._focused=0}),(t.isIE6||!e.boxModel)&&(i.add(n.id,"mouseover",function(){e.hasClass(n.id,s+"Disabled")||e.addClass(n.id,s+"Hover")}),i.add(n.id,"mouseout",function(){e.hasClass(n.id,s+"Disabled")||e.removeClass(n.id,s+"Hover")})),n.onPostRender.dispatch(n,e.get(n.id))},destroy:function(){this.parent(),i.clear(this.id+"_text"),i.clear(this.id+"_open")}})}(tinymce),function(t){var e=t.DOM,i=t.dom.Event,n=t.each;t.util.Dispatcher,t.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(t,e){this.parent(t,e),this.classPrefix="mceNativeListBox"},setDisabled:function(t){e.get(this.id).disabled=t,this.setAriaProperty("disabled",t)},isDisabled:function(){return e.get(this.id).disabled},select:function(t){var e,i,s=this;return void 0==t?s.selectByIndex(-1):(i=t&&t.call?t:function(e){return e==t},t!=s.selectedValue&&(n(s.items,function(t,n){return i(t.value)?(e=1,s.selectByIndex(n),!1):void 0}),e||s.selectByIndex(-1)),void 0)},selectByIndex:function(t){e.get(this.id).selectedIndex=t+1,this.selectedValue=this.items[t]?this.items[t].value:null},add:function(t,i,n){var s,o=this;n=n||{},n.value=i,o.isRendered()&&e.add(e.get(this.id),"option",n,t),s={title:t,value:i,attribs:n},o.items.push(s),o.onAdd.dispatch(o,s)},getLength:function(){return this.items.length},renderHTML:function(){var t,i=this;return t=e.createHTML("option",{value:""},"-- "+i.settings.title+" --"),n(i.items,function(i){t+=e.createHTML("option",{value:i.value},i.title)}),t=e.createHTML("select",{id:i.id,"class":"mceNativeListBox","aria-labelledby":i.id+"_aria"},t),t+=e.createHTML("span",{id:i.id+"_aria",style:"display: none"},i.settings.title)},postRender:function(){function n(t){var e=o.items[t.target.selectedIndex-1];e&&(e=e.value)&&(o.onChange.dispatch(o,e),o.settings.onselect&&o.settings.onselect(e))}var s,o=this,r=!0;o.rendered=!0,i.add(o.id,"change",n),i.add(o.id,"keydown",function(e){var a;return i.remove(o.id,"change",s),r=!1,a=i.add(o.id,"blur",function(){r||(r=!0,i.add(o.id,"change",n),i.remove(o.id,"blur",a))}),!t.isWebKit||37!=e.keyCode&&39!=e.keyCode?13==e.keyCode||32==e.keyCode?(n(e),i.cancel(e)):void 0:i.prevent(e)}),o.onPostRender.dispatch(o,e.get(o.id))}})}(tinymce),function(t){var e=t.DOM,i=t.dom.Event;t.each,t.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(i,n,s){this.parent(i,n,s),this.onRenderMenu=new t.util.Dispatcher(this),n.menu_container=n.menu_container||e.doc.body},showMenu:function(){var t,n,s,o=this,r=e.get(o.id);if(!o.isDisabled()){if(o.isMenuRendered||(o.renderMenu(),o.isMenuRendered=!0),o.isMenuVisible)return o.hideMenu();t=e.getPos(o.settings.menu_container),n=e.getPos(r),s=o.menu,s.settings.offset_x=n.x,s.settings.offset_y=n.y,s.settings.vp_offset_x=n.x,s.settings.vp_offset_y=n.y,s.settings.keyboard_focus=o._focused,s.showMenu(0,r.clientHeight),i.add(e.doc,"mousedown",o.hideMenu,o),o.setState("Selected",1),o.isMenuVisible=1}},renderMenu:function(){var t,e=this;t=e.settings.control_manager.createDropMenu(e.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:e.settings.icons}),t.onHideMenu.add(function(){e.hideMenu(),e.focus()}),e.onRenderMenu.dispatch(e,t),e.menu=t},hideMenu:function(t){var n=this;t&&"mousedown"==t.type&&e.getParent(t.target,function(t){return t.id===n.id||t.id===n.id+"_open"})||(t&&e.getParent(t.target,".mceMenu")||(n.setState("Selected",0),i.remove(e.doc,"mousedown",n.hideMenu,n),n.menu&&n.menu.hideMenu()),n.isMenuVisible=0)},postRender:function(){var t=this,e=t.settings;i.add(t.id,"click",function(){t.isDisabled()||(e.onclick&&e.onclick(t.value),t.showMenu())})}})}(tinymce),function(t){var e=t.DOM,i=t.dom.Event;t.each,t.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(t,e,i){this.parent(t,e,i),this.classPrefix="mceSplitButton"},renderHTML:function(){var t,i,n=this,s=n.settings;return t="<tbody><tr>",i=s.image?e.createHTML("img ",{src:s.image,role:"presentation","class":"mceAction "+s["class"]}):e.createHTML("span",{"class":"mceAction "+s["class"]},""),i+=e.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:n.id+"_voice",style:"display:none;"},s.title),t+="<td >"+e.createHTML("a",{role:"button",id:n.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+s["class"],onclick:"return false;",onmousedown:"return false;",title:s.title},i)+"</td>",i=e.createHTML("span",{"class":"mceOpen "+s["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),t+="<td >"+e.createHTML("a",{role:"button",id:n.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+s["class"],onclick:"return false;",onmousedown:"return false;",title:s.title},i)+"</td>",t+="</tr></tbody>",t=e.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+s["class"],cellpadding:"0",cellspacing:"0",title:s.title},t),e.createHTML("div",{id:n.id,role:"button",tabindex:"0","aria-labelledby":n.id+"_voice","aria-haspopup":"true"},t)},postRender:function(){var n,s=this,o=s.settings;o.onclick&&(n=function(t){s.isDisabled()||(o.onclick(s.value),i.cancel(t))},i.add(s.id+"_action","click",n),i.add(s.id,["click","keydown"],function(t){var e=40;32!==t.keyCode&&13!==t.keyCode&&14!==t.keyCode||t.altKey||t.ctrlKey||t.metaKey?("click"===t.type||t.keyCode===e)&&(s.showMenu(),i.cancel(t)):(n(),i.cancel(t))})),i.add(s.id+"_open","click",function(t){s.showMenu(),i.cancel(t)}),i.add([s.id,s.id+"_open"],"focus",function(){s._focused=1}),i.add([s.id,s.id+"_open"],"blur",function(){s._focused=0}),(t.isIE6||!e.boxModel)&&(i.add(s.id,"mouseover",function(){e.hasClass(s.id,"mceSplitButtonDisabled")||e.addClass(s.id,"mceSplitButtonHover")}),i.add(s.id,"mouseout",function(){e.hasClass(s.id,"mceSplitButtonDisabled")||e.removeClass(s.id,"mceSplitButtonHover")}))},destroy:function(){this.parent(),i.clear(this.id+"_action"),i.clear(this.id+"_open"),i.clear(this.id)}})}(tinymce),function(t){var e=t.DOM,i=t.dom.Event,n=t.is,s=t.each;t.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(e,i,n){var s=this;s.parent(e,i,n),s.settings=i=t.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},s.settings),s.onShowMenu=new t.util.Dispatcher(s),s.onHideMenu=new t.util.Dispatcher(s),s.value=i.default_color},showMenu:function(){var t,n,s=this;if(!s.isDisabled()){if(s.isMenuRendered||(s.renderMenu(),s.isMenuRendered=!0),s.isMenuVisible)return s.hideMenu();t=e.get(s.id),e.show(s.id+"_menu"),e.addClass(t,"mceSplitButtonSelected"),n=e.getPos(t),e.setStyles(s.id+"_menu",{left:n.x,top:n.y+t.clientHeight,zIndex:2e5}),t=0,i.add(e.doc,"mousedown",s.hideMenu,s),s.onShowMenu.dispatch(s),s._focused&&(s._keyHandler=i.add(s.id+"_menu","keydown",function(t){27==t.keyCode&&s.hideMenu()}),e.select("a",s.id+"_menu")[0].focus()),s.isMenuVisible=1}},hideMenu:function(t){var n=this;if(n.isMenuVisible){if(t&&"mousedown"==t.type&&e.getParent(t.target,function(t){return t.id===n.id+"_open"}))return;t&&e.getParent(t.target,".mceSplitButtonMenu")||(e.removeClass(n.id,"mceSplitButtonSelected"),i.remove(e.doc,"mousedown",n.hideMenu,n),i.remove(n.id+"_menu","keydown",n._keyHandler),e.hide(n.id+"_menu")),n.isMenuVisible=0,n.onHideMenu.dispatch()}},renderMenu:function(){var o,r,a,l,u,h,c=this,d=0,f=c.settings;return u=e.add(f.menu_container,"div",{role:"listbox",id:c.id+"_menu","class":f.menu_class+" "+f["class"],style:"position:absolute;left:0;top:-1000px;"}),o=e.add(u,"div",{"class":f["class"]+" mceSplitButtonMenu"}),e.add(o,"span",{"class":"mceMenuLine"}),r=e.add(o,"table",{role:"presentation","class":"mceColorSplitMenu"}),a=e.add(r,"tbody"),d=0,s(n(f.colors,"array")?f.colors:f.colors.split(","),function(t){t=t.replace(/^#/,""),d--||(l=e.add(a,"tr"),d=f.grid_width-1),r=e.add(l,"td"),r=e.add(r,"a",{role:"option",href:"javascript:;",style:{backgroundColor:"#"+t},title:c.editor.getLang("colors."+t,t),"data-mce-color":"#"+t}),c.editor.forcedHighContrastMode&&(r=e.add(r,"canvas",{width:16,height:16,"aria-hidden":"true"}),r.getContext&&(h=r.getContext("2d"))?(h.fillStyle="#"+t,h.fillRect(0,0,16,16)):e.remove(r))}),f.more_colors_func&&(r=e.add(a,"tr"),r=e.add(r,"td",{colspan:f.grid_width,"class":"mceMoreColors"}),r=e.add(r,"a",{role:"option",id:c.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},f.more_colors_title),i.add(r,"click",function(t){return f.more_colors_func.call(f.more_colors_scope||this),i.cancel(t)})),e.addClass(o,"mceColorSplitMenu"),new t.ui.KeyboardNavigation({root:c.id+"_menu",items:e.select("a",c.id+"_menu"),onCancel:function(){c.hideMenu(),c.focus()}}),i.add(c.id+"_menu","mousedown",function(t){return i.cancel(t)}),i.add(c.id+"_menu","click",function(t){var n;return t=e.getParent(t.target,"a",a),t&&"a"==t.nodeName.toLowerCase()&&(n=t.getAttribute("data-mce-color"))&&c.setColor(n),i.cancel(t)}),u},setColor:function(t){this.displayColor(t),this.hideMenu(),this.settings.onselect(t)},displayColor:function(t){var i=this;e.setStyle(i.id+"_preview","backgroundColor",t),i.value=t},postRender:function(){var t=this,i=t.id;t.parent(),e.add(i+"_action","div",{id:i+"_preview","class":"mceColorPreview"}),e.setStyle(t.id+"_preview","backgroundColor",t.value)},destroy:function(){this.parent(),i.clear(this.id+"_menu"),i.clear(this.id+"_more"),e.remove(this.id+"_menu")}})}(tinymce),function(t){var e=t.DOM,i=t.each,n=t.dom.Event;t.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var i=this,n=[],s=i.controls,o=t.each,r=i.settings;return n.push('<div id="'+i.id+'" role="group" aria-labelledby="'+i.id+'_voice">'),n.push("<span role='application'>"),n.push('<span id="'+i.id+'_voice" class="mceVoiceLabel" style="display:none;">'+e.encode(r.name)+"</span>"),o(s,function(t){n.push(t.renderHTML())}),n.push("</span>"),n.push("</div>"),n.join("")},focus:function(){var t=this;e.get(t.id).focus()},postRender:function(){var n=this,s=[];i(n.controls,function(t){i(t.controls,function(t){t.id&&s.push(t)})}),n.keyNav=new t.ui.KeyboardNavigation({root:n.id,items:s,onCancel:function(){t.isWebKit&&e.get(n.editor.id+"_ifr").focus(),n.editor.focus()},excludeFromTabOrder:!n.settings.tab_focus_toolbar})},destroy:function(){var t=this;t.parent(),t.keyNav.destroy(),n.clear(t.id)}})}(tinymce),function(t){var e=t.DOM;t.each,t.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var t,i,n,s,o,r,a=this,l="",u=a.settings;for(r=a.controls,n=0;n<r.length;n++)i=r[n],s=r[n-1],o=r[n+1],0===n&&(t="mceToolbarStart",i.Button?t+=" mceToolbarStartButton":i.SplitButton?t+=" mceToolbarStartSplitButton":i.ListBox&&(t+=" mceToolbarStartListBox"),l+=e.createHTML("td",{"class":t},e.createHTML("span",null,"<!-- IE -->"))),s&&i.ListBox&&(s.Button||s.SplitButton)&&(l+=e.createHTML("td",{"class":"mceToolbarEnd"},e.createHTML("span",null,"<!-- IE -->"))),l+=e.stdMode?'<td style="position: relative">'+i.renderHTML()+"</td>":"<td>"+i.renderHTML()+"</td>",o&&i.ListBox&&(o.Button||o.SplitButton)&&(l+=e.createHTML("td",{"class":"mceToolbarStart"},e.createHTML("span",null,"<!-- IE -->")));return t="mceToolbarEnd",i.Button?t+=" mceToolbarEndButton":i.SplitButton?t+=" mceToolbarEndSplitButton":i.ListBox&&(t+=" mceToolbarEndListBox"),l+=e.createHTML("td",{"class":t},e.createHTML("span",null,"<!-- IE -->")),e.createHTML("table",{id:a.id,"class":"mceToolbar"+(u["class"]?" "+u["class"]:""),cellpadding:"0",cellspacing:"0",align:a.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+l+"</tr></tbody>")}})}(tinymce),function(t){var e=t.util.Dispatcher;t.each,t.create("tinymce.AddOnManager",{AddOnManager:function(){var t=this;t.items=[],t.urls={},t.lookup={},t.onAdd=new e(t)},get:function(t){return this.lookup[t]?this.lookup[t].instance:void 0},dependencies:function(t){var e;return this.lookup[t]&&(e=this.lookup[t].dependencies),e||[]},requireLangPack:function(e){var i=t.settings;i&&i.language&&i.language_load!==!1&&t.ScriptLoader.add(this.urls[e]+"/langs/"+i.language+".js")},add:function(t,e,i){return this.items.push(e),this.lookup[t]={instance:e,dependencies:i},this.onAdd.dispatch(this,t,e),e},createUrl:function(t,e){return"object"==typeof e?e:{prefix:t.prefix,resource:e,suffix:t.suffix}},addComponents:function(e,i){var n=this.urls[e];t.each(i,function(e){t.ScriptLoader.add(n+"/"+e)})},load:function(e,i,n,s){function o(){var o=r.dependencies(e);t.each(o,function(t){var e=r.createUrl(i,t);r.load(e.resource,e,void 0,void 0)}),n&&(s?n.call(s):n.call(t.ScriptLoader))}var r=this,a=i;r.urls[e]||("object"==typeof i&&(a=i.prefix+i.resource+i.suffix),0!=a.indexOf("/")&&-1==a.indexOf("://")&&(a=t.baseURL+"/"+a),r.urls[e]=a.substring(0,a.lastIndexOf("/")),r.lookup[e]?o():t.ScriptLoader.add(a,o,s))}}),t.PluginManager=new t.AddOnManager,t.ThemeManager=new t.AddOnManager}(tinymce),function(t){var e,i=t.each,n=t.extend,s=t.DOM,o=t.dom.Event,r=(t.ThemeManager,t.PluginManager,t.explode),a=t.util.Dispatcher,l=0;t.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t.documentBaseURL)||(t.documentBaseURL+="/"),t.baseURL=new t.util.URI(t.documentBaseURL).toAbsolute(t.baseURL),t.baseURI=new t.util.URI(t.baseURL),t.onBeforeUnload=new a(t),o.add(window,"beforeunload",function(e){t.onBeforeUnload.dispatch(t,e)}),t.onAddEditor=new a(t),t.onRemoveEditor=new a(t),t.EditorManager=n(t,{editors:[],i18n:{},activeEditor:null,init:function(e){function a(e,i,n){var s=e[i];if(s)return t.is(s,"string")&&(n=s.replace(/\.\w+$/,""),n=n?t.resolve(n):0,s=t.resolve(s)),s.apply(n||this,Array.prototype.slice.call(arguments,2))}var u,h,c=this,d=(t.ScriptLoader,[]);e=n({theme:"simple",language:"en"},e),c.settings=e,o.add(document,"init",function(){function n(t,e){return e.constructor===RegExp?e.test(t.className):s.hasClass(t,e)}var o,f;switch(a(e,"onpageload"),e.mode){case"exact":o=e.elements||"",o.length>0&&i(r(o),function(n){s.get(n)?(h=new t.Editor(n,e),d.push(h),h.render(1)):i(document.forms,function(o){i(o.elements,function(i){i.name===n&&(n="mce_editor_"+l++,s.setAttrib(i,"id",n),h=new t.Editor(n,e),d.push(h),h.render(1))})})});break;case"textareas":case"specific_textareas":i(s.select("textarea"),function(i){e.editor_deselector&&n(i,e.editor_deselector)||(!e.editor_selector||n(i,e.editor_selector))&&(u=s.get(i.name),i.id||u||(i.id=i.name),(!i.id||c.get(i.id))&&(i.id=s.uniqueId()),h=new t.Editor(i.id,e),d.push(h),h.render(1))})}e.oninit&&(o=f=0,i(d,function(t){f++,t.initialized?o++:t.onInit.add(function(){o++,o==f&&a(e,"oninit")}),o==f&&a(e,"oninit")}))})},get:function(t){return t===e?this.editors:this.editors[t]},getInstanceById:function(t){return this.get(t)},add:function(t){var e=this,i=e.editors;return i[t.id]=t,i.push(t),e._setActive(t),e.onAddEditor.dispatch(e,t),t},remove:function(t){var e,i=this,n=i.editors;if(!n[t.id])return null;for(delete n[t.id],e=0;e<n.length;e++)if(n[e]==t){n.splice(e,1);break}return i.activeEditor==t&&i._setActive(n[0]),t.destroy(),i.onRemoveEditor.dispatch(i,t),t},execCommand:function(e,i,n){function s(){a.destroy(),o.detachEvent("onunload",s),o=o.tinyMCE=o.tinymce=null}var o,r=this,a=r.get(n);switch(e){case"mceFocus":return a.focus(),!0;case"mceAddEditor":case"mceAddControl":return r.get(n)||new t.Editor(n,r.settings).render(),!0;case"mceAddFrameControl":return o=n.window,o.tinyMCE=tinyMCE,o.tinymce=t,t.DOM.doc=o.document,t.DOM.win=o,a=new t.Editor(n.element_id,n),a.render(),t.isIE&&o.attachEvent("onunload",s),n.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return a&&a.remove(),!0;case"mceToggleEditor":return a?(a.isHidden()?a.show():a.hide(),!0):(r.execCommand("mceAddControl",0,n),!0)}return r.activeEditor?r.activeEditor.execCommand(e,i,n):!1},execInstanceCommand:function(t,e,i,n){var s=this.get(t);return s?s.execCommand(e,i,n):!1},triggerSave:function(){i(this.editors,function(t){t.save()})},addI18n:function(e,n){var s=this.i18n;t.is(e,"string")?i(n,function(t,i){s[e+"."+i]=t}):i(e,function(t,e){i(t,function(t,n){i(t,function(t,i){"common"===n?s[e+"."+i]=t:s[e+"."+n+"."+i]=t})})})},_setActive:function(t){this.selectedInstance=this.activeEditor=t}})}(tinymce),function(t){var e=t.DOM,i=t.dom.Event,n=t.extend,s=t.util.Dispatcher,o=t.each,r=t.isGecko,a=t.isIE,l=(t.isWebKit,t.is),u=t.ThemeManager,h=t.PluginManager,c=(t.inArray,t.grep,t.explode);t.create("tinymce.Editor",{Editor:function(e,i){var r=this;r.id=r.editorId=e,r.execCommands={},r.queryStateCommands={},r.queryValueCommands={},r.isNotDirty=!1,r.plugins={},o(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(t){r[t]=new s(r)}),r.settings=i=n({id:e,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:t.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:t.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:!0,entity_encoding:"named",url_converter:r.convertURL,url_converter_scope:r,ie7_compat:!0},i),r.documentBaseURI=new t.util.URI(i.document_base_url||t.documentBaseURL,{base_uri:tinyMCE.baseURI}),r.baseURI=t.baseURI,r.contentCSS=[],r.execCallback("setup",r)},render:function(){function n(){r.language&&r.language_load!==!1&&l.add(t.baseURL+"/langs/"+r.language+".js"),r.theme&&"-"!=r.theme.charAt(0)&&!u.urls[r.theme]&&u.load(r.theme,"themes/"+r.theme+"/editor_template"+t.suffix+".js"),o(c(r.plugins),function(e){if(e&&!h.urls[e])if("-"==e.charAt(0)){e=e.substr(1,e.length);var i=h.dependencies(e);o(i,function(e){var i={prefix:"plugins/",resource:e,suffix:"/editor_plugin"+t.suffix+".js"},e=h.createUrl(i,e);
h.load(e.resource,e)})}else{if("safari"==e)return;h.load(e,{prefix:"plugins/",resource:e,suffix:"/editor_plugin"+t.suffix+".js"})}}),l.loadQueue(function(){s.removed||s.init()})}var s=this,r=s.settings,a=s.id,l=t.ScriptLoader;return i.domLoaded?(tinyMCE.settings=r,s.getElement()&&(!t.isIDevice||t.isIOS5)&&(!/TEXTAREA|INPUT/i.test(s.getElement().nodeName)&&r.hidden_input&&e.getParent(a,"form")&&e.insertAfter(e.create("input",{type:"hidden",name:a}),a),t.WindowManager&&(s.windowManager=new t.WindowManager(s)),"xml"==r.encoding&&s.onGetContent.add(function(t,i){i.save&&(i.content=e.encode(i.content))}),r.add_form_submit_trigger&&s.onSubmit.addToTop(function(){s.initialized&&(s.save(),s.isNotDirty=1)}),r.add_unload_trigger&&(s._beforeUnload=tinyMCE.onBeforeUnload.add(function(){!s.initialized||s.destroyed||s.isHidden()||s.save({format:"raw",no_events:!0})})),t.addUnload(s.destroy,s),r.submit_patch&&s.onBeforeRenderUI.add(function(){var e=s.getElement().form;e&&(e._mceOldSubmit||(e.submit.nodeType||e.submit.length||(s.formElement=e,e._mceOldSubmit=e.submit,e.submit=function(){return t.triggerSave(),s.isNotDirty=1,s.formElement._mceOldSubmit(s.formElement)}),e=null))}),n()),void 0):(i.add(document,"init",function(){s.render()}),void 0)},init:function(){function i(e){var n,s=h.get(e),r=h.urls[e]||t.documentBaseURL.replace(/\/$/,"");s&&-1===t.inArray(A,e)&&(o(h.dependencies(e),function(t){i(t)}),n=new s(b,r),b.plugins[e]=n,n.init&&(n.init(b,r),A.push(e)))}function n(t,e){e&&e.initial||b.execCommand("mceRepaint")}var s,l,d,f,p,g,m,v,y,b=this,_=b.settings,w=b.getElement(),A=[];for(t.add(b),_.aria_label=_.aria_label||e.getAttrib(w,"aria-label",b.getLang("aria.rich_text_area")),_.theme&&(_.theme=_.theme.replace(/-/,""),f=u.get(_.theme),b.theme=new f,b.theme.init&&_.init_theme&&b.theme.init(b,u.urls[_.theme]||t.documentBaseURL.replace(/\/$/,""))),o(c(_.plugins.replace(/\-/g,"")),i),_.popup_css!==!1&&(_.popup_css=_.popup_css?b.documentBaseURI.toAbsolute(_.popup_css):b.baseURI.toAbsolute("themes/"+_.theme+"/skins/"+_.skin+"/dialog.css")),_.popup_css_add&&(_.popup_css+=","+b.documentBaseURI.toAbsolute(_.popup_css_add)),b.controlManager=new t.ControlManager(b),_.custom_undo_redo&&(b.onBeforeExecCommand.add(function(t,e,i,n,s){"Undo"==e||"Redo"==e||"mceRepaint"==e||s&&s.skip_undo||b.undoManager.beforeChange()}),b.onExecCommand.add(function(t,e,i,n,s){"Undo"==e||"Redo"==e||"mceRepaint"==e||s&&s.skip_undo||b.undoManager.add()})),b.onExecCommand.add(function(t,e){/^(FontName|FontSize)$/.test(e)||b.nodeChanged()}),r&&(b.onUndo.add(n),b.onRedo.add(n),b.onSetContent.add(n)),b.onBeforeRenderUI.dispatch(b,b.controlManager),_.render_ui&&(l=_.width||w.style.width||w.offsetWidth,d=_.height||w.style.height||w.offsetHeight,b.orgDisplay=w.style.display,v=/^[0-9\.]+(|px)$/i,v.test(""+l)&&(l=Math.max(parseInt(l)+(f.deltaWidth||0),100)),v.test(""+d)&&(d=Math.max(parseInt(d)+(f.deltaHeight||0),100)),f=b.theme.renderUI({targetNode:w,width:l,height:d,deltaWidth:_.delta_width,deltaHeight:_.delta_height}),b.editorContainer=f.editorContainer),document.domain&&location.hostname!=document.domain&&(t.relaxedDomain=document.domain),e.setStyles(f.sizeContainer||f.editorContainer,{width:l,height:d}),_.content_css&&t.each(c(_.content_css),function(t){b.contentCSS.push(b.documentBaseURI.toAbsolute(t))}),d=(f.iframeHeight||d)+("number"==typeof d?f.deltaHeight||0:""),100>d&&(d=100),b.iframeHTML=_.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',_.document_base_url!=t.documentBaseURL&&(b.iframeHTML+='<base href="'+b.documentBaseURI.getURI()+'" />'),b.iframeHTML+=_.ie7_compat?'<meta http-equiv="X-UA-Compatible" content="IE=7" />':'<meta http-equiv="X-UA-Compatible" content="IE=edge" />',b.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',y=0;y<b.contentCSS.length;y++)b.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+b.contentCSS[y]+'" />';g=_.body_id||"tinymce",-1!=g.indexOf("=")&&(g=b.getParam("body_id","","hash"),g=g[b.id]||g),m=_.body_class||"",-1!=m.indexOf("=")&&(m=b.getParam("body_class","","hash"),m=m[b.id]||""),b.iframeHTML+='</head><body id="'+g+'" class="mceContentBody '+m+'"><br></body></html>',t.relaxedDomain&&(a||t.isOpera&&parseFloat(opera.version())<11)&&(p='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+b.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'),s=e.add(f.iframeContainer,"iframe",{id:b.id+"_ifr",src:p||'javascript:""',frameBorder:"0",allowTransparency:"true",title:_.aria_label,style:{width:"100%",height:d,display:"block"}}),b.contentAreaContainer=f.iframeContainer,e.get(f.editorContainer).style.display=b.orgDisplay,e.get(b.id).style.display="none",e.setAttrib(b.id,"aria-hidden",!0),t.relaxedDomain&&p||b.setupIframe(),w=s=f=null},setupIframe:function(){function n(t){o(t.dom.select("a"),function(e){var i=e.parentNode;t.dom.isBlock(i)&&i.lastChild===e&&t.dom.add(i,"br",{"data-mce-bogus":1})})}var s,l=this,u=l.settings,h=e.get(l.id),c=l.getDoc();a&&t.relaxedDomain||(c.open(),c.write(l.iframeHTML),c.close(),t.relaxedDomain&&(c.domain=t.relaxedDomain)),s=l.getBody(),s.disabled=!0,u.readonly||(s.contentEditable=!0),s.disabled=!1,l.schema=new t.html.Schema(u),l.dom=new t.dom.DOMUtils(l.getDoc(),{keep_values:!0,url_converter:l.convertURL,url_converter_scope:l,hex_colors:u.force_hex_style_colors,class_filter:u.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:l.schema}),l.parser=new t.html.DomParser(u,l.schema),l.settings.allow_html_in_named_anchor||l.parser.addAttributeFilter("name",function(t){for(var e,i,n,s,o=t.length;o--;)if(s=t[o],"a"===s.name&&s.firstChild){n=s.parent,e=s.lastChild;do i=e.prev,n.insert(e,s),e=i;while(e)}}),l.parser.addAttributeFilter("src,href,style",function(t,e){for(var i,n,s,o=t.length,r=l.dom;o--;)i=t[o],n=i.attr(e),s="data-mce-"+e,i.attributes.map[s]||("style"===e?i.attr(s,r.serializeStyle(r.parseStyle(n),i.name)):i.attr(s,l.convertURL(n,e,i.name)))}),l.parser.addNodeFilter("script",function(t){for(var e=t.length;e--;)t[e].attr("type","mce-text/javascript")}),l.parser.addNodeFilter("#cdata",function(t){for(var e,i=t.length;i--;)e=t[i],e.type=8,e.name="#comment",e.value="[CDATA["+e.value+"]]"}),l.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var i,n=e.length,s=l.schema.getNonEmptyElements();n--;)i=e[n],i.isEmpty(s)&&(i.empty().append(new t.html.Node("br",1)).shortEnded=!0)}),l.serializer=new t.dom.Serializer(u,l.dom,l.schema),l.selection=new t.dom.Selection(l.dom,l.getWin(),l.serializer),l.formatter=new t.Formatter(this),l.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(t,e,i){o(i,function(e,i){l.dom.setAttrib(t,i,e)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),o("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(t){l.formatter.register(t,{block:t,remove:"all"})}),l.formatter.register(l.settings.formats),l.undoManager=new t.UndoManager(l),l.undoManager.onAdd.add(function(t,e){return t.hasUndo()?l.onChange.dispatch(l,e,t):void 0}),l.undoManager.onUndo.add(function(t,e){return l.onUndo.dispatch(l,e,t)}),l.undoManager.onRedo.add(function(t,e){return l.onRedo.dispatch(l,e,t)}),l.forceBlocks=new t.ForceBlocks(l,{forced_root_block:u.forced_root_block}),l.editorCommands=new t.EditorCommands(l),l.serializer.onPreProcess.add(function(t,e){return l.onPreProcess.dispatch(l,e,t)}),l.serializer.onPostProcess.add(function(t,e){return l.onPostProcess.dispatch(l,e,t)}),l.onPreInit.dispatch(l),u.gecko_spellcheck||(l.getBody().spellcheck=0),u.readonly||l._addEvents(),l.controlManager.onPostRender.dispatch(l,l.controlManager),l.onPostRender.dispatch(l),l.quirks=new t.util.Quirks(this),u.directionality&&(l.getBody().dir=u.directionality),u.nowrap&&(l.getBody().style.whiteSpace="nowrap"),u.handle_node_change_callback&&l.onNodeChange.add(function(t,e,i){l.execCallback("handle_node_change_callback",l.id,i,-1,-1,!0,l.selection.isCollapsed())}),u.save_callback&&l.onSaveContent.add(function(t,e){var i=l.execCallback("save_callback",l.id,e.content,l.getBody());i&&(e.content=i)}),u.onchange_callback&&l.onChange.add(function(t,e){l.execCallback("onchange_callback",l,e)}),u.protect&&l.onBeforeSetContent.add(function(t,e){u.protect&&o(u.protect,function(t){e.content=e.content.replace(t,function(t){return"<!--mce:protected "+escape(t)+"-->"})})}),u.convert_newlines_to_brs&&l.onBeforeSetContent.add(function(t,e){e.initial&&(e.content=e.content.replace(/\r?\n/g,"<br />"))}),u.preformatted&&l.onPostProcess.add(function(t,e){e.content=e.content.replace(/^\s*<pre.*?>/,""),e.content=e.content.replace(/<\/pre>\s*$/,""),e.set&&(e.content='<pre class="mceItemHidden">'+e.content+"</pre>")}),u.verify_css_classes&&(l.serializer.attribValueFilter=function(t,e){var i,n;return"class"==t?(l.classesRE||(n=l.dom.getClasses(),n.length>0&&(i="",o(n,function(t){i+=(i?"|":"")+t["class"]}),l.classesRE=new RegExp("("+i+")","gi"))),!l.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(e)||l.classesRE.test(e)?e:""):e}),u.cleanup_callback&&(l.onBeforeSetContent.add(function(t,e){e.content=l.execCallback("cleanup_callback","insert_to_editor",e.content,e)}),l.onPreProcess.add(function(t,e){e.set&&l.execCallback("cleanup_callback","insert_to_editor_dom",e.node,e),e.get&&l.execCallback("cleanup_callback","get_from_editor_dom",e.node,e)}),l.onPostProcess.add(function(t,e){e.set&&(e.content=l.execCallback("cleanup_callback","insert_to_editor",e.content,e)),e.get&&(e.content=l.execCallback("cleanup_callback","get_from_editor",e.content,e))})),u.save_callback&&l.onGetContent.add(function(t,e){e.save&&(e.content=l.execCallback("save_callback",l.id,e.content,l.getBody()))}),u.handle_event_callback&&l.onEvent.add(function(t,e,n){l.execCallback("handle_event_callback",e,t,n)===!1&&i.cancel(e)}),l.onSetContent.add(function(){l.addVisual(l.getBody())}),u.padd_empty_editor&&l.onPostProcess.add(function(t,e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),r&&(l.onExecCommand.add(function(t,e){"CreateLink"===e&&n(t)}),l.onSetContent.add(l.selection.onSetContent.add(n))),l.load({initial:!0,format:"html"}),l.startContent=l.getContent({format:"raw"}),l.undoManager.add(),l.initialized=!0,l.onInit.dispatch(l),l.execCallback("setupcontent_callback",l.id,l.getBody(),l.getDoc()),l.execCallback("init_instance_callback",l),l.focus(!0),l.nodeChanged({initial:1}),o(l.contentCSS,function(t){l.dom.loadCSS(t)}),u.auto_focus&&setTimeout(function(){var e=t.get(u.auto_focus);e.selection.select(e.getBody(),1),e.selection.collapse(1),e.getBody().focus(),e.getWin().focus()},100),h=null},focus:function(e){var i,n,s,o=this,r=o.selection,a=o.settings.content_editable,l=o.getDoc();e||(n=r.getRng(),n.item&&(s=n.item(0)),o._refreshContentEditable(),r.normalize(),a||o.getWin().focus(),t.isGecko&&o.getBody().focus(),s&&s.ownerDocument==l&&(n=l.body.createControlRange(),n.addElement(s),n.select())),t.activeEditor!=o&&(null!=(i=t.activeEditor)&&i.onDeactivate.dispatch(i,o),o.onActivate.dispatch(o,i)),t._setActive(o)},execCallback:function(e){var i,n=this,s=n.settings[e];if(s)return n.callbackLookup&&(i=n.callbackLookup[e])&&(s=i.func,i=i.scope),l(s,"string")&&(i=s.replace(/\.\w+$/,""),i=i?t.resolve(i):0,s=t.resolve(s),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[e]={func:s,scope:i}),s.apply(i||n,Array.prototype.slice.call(arguments,1))},translate:function(e){var i=this.settings.language||"en",n=t.i18n;return e?n[i+"."+e]||e.replace(/{\#([^}]+)\}/g,function(t,e){return n[i+"."+e]||"{#"+e+"}"}):""},getLang:function(e,i){return t.i18n[(this.settings.language||"en")+"."+e]||(l(i)?i:"{#"+e+"}")},getParam:function(e,i,n){var s,r=t.trim,a=l(this.settings[e])?this.settings[e]:i;return"hash"===n?(s={},l(a,"string")?o(a.indexOf("=")>0?a.split(/[;,](?![^=;,]*(?:[;,]|$))/):a.split(","),function(t){t=t.split("="),s[r(t[0])]=t.length>1?r(t[1]):r(t)}):s=a,s):a},nodeChanged:function(t){var e=this,i=e.selection,n=i.getStart()||e.getBody();e.initialized&&(t=t||{},n=a&&n.ownerDocument!=e.getDoc()?e.getBody():n,t.parents=[],e.dom.getParent(n,function(e){return"BODY"==e.nodeName?!0:(t.parents.push(e),void 0)}),e.onNodeChange.dispatch(e,t?t.controlManager||e.controlManager:e.controlManager,n,i.isCollapsed(),t))},addButton:function(t,e){var i=this;i.buttons=i.buttons||{},i.buttons[t]=e},addCommand:function(t,e,i){this.execCommands[t]={func:e,scope:i||this}},addQueryStateHandler:function(t,e,i){this.queryStateCommands[t]={func:e,scope:i||this}},addQueryValueHandler:function(t,e,i){this.queryValueCommands[t]={func:e,scope:i||this}},addShortcut:function(t,e,i,n){var s,r=this;return r.settings.custom_shortcuts?(r.shortcuts=r.shortcuts||{},l(i,"string")&&(s=i,i=function(){r.execCommand(s,!1,null)}),l(i,"object")&&(s=i,i=function(){r.execCommand(s[0],s[1],s[2])}),o(c(t),function(t){var s={func:i,scope:n||this,desc:e,alt:!1,ctrl:!1,shift:!1};o(c(t,"+"),function(t){switch(t){case"alt":case"ctrl":case"shift":s[t]=!0;break;default:s.charCode=t.charCodeAt(0),s.keyCode=t.toUpperCase().charCodeAt(0)}}),r.shortcuts[(s.ctrl?"ctrl":"")+","+(s.alt?"alt":"")+","+(s.shift?"shift":"")+","+s.keyCode]=s}),!0):!1},execCommand:function(t,e,i,n){var s,r,a=this,l=0;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(t)||n&&n.skip_focus||a.focus(),s={},a.onBeforeExecCommand.dispatch(a,t,e,i,s),s.terminate?!1:a.execCallback("execcommand_callback",a.id,a.selection.getNode(),t,e,i)?(a.onExecCommand.dispatch(a,t,e,i,n),!0):(s=a.execCommands[t])&&(r=s.func.call(s.scope,e,i),r!==!0)?(a.onExecCommand.dispatch(a,t,e,i,n),r):(o(a.plugins,function(s){return s.execCommand&&s.execCommand(t,e,i)?(a.onExecCommand.dispatch(a,t,e,i,n),l=1,!1):void 0}),l?!0:a.theme&&a.theme.execCommand&&a.theme.execCommand(t,e,i)?(a.onExecCommand.dispatch(a,t,e,i,n),!0):a.editorCommands.execCommand(t,e,i)?(a.onExecCommand.dispatch(a,t,e,i,n),!0):(a.getDoc().execCommand(t,e,i),a.onExecCommand.dispatch(a,t,e,i,n),void 0))},queryCommandState:function(t){var e,i,n=this;if(!n._isHidden()){if((e=n.queryStateCommands[t])&&(i=e.func.call(e.scope),i!==!0))return i;if(e=n.editorCommands.queryCommandState(t),-1!==e)return e;try{return this.getDoc().queryCommandState(t)}catch(s){}}},queryCommandValue:function(t){var e,i,n=this;if(!n._isHidden()){if((e=n.queryValueCommands[t])&&(i=e.func.call(e.scope),i!==!0))return i;if(e=n.editorCommands.queryCommandValue(t),l(e))return e;try{return this.getDoc().queryCommandValue(t)}catch(s){}}},show:function(){var t=this;e.show(t.getContainer()),e.hide(t.id),t.load()},hide:function(){var t=this,i=t.getDoc();a&&i&&i.execCommand("SelectAll"),t.save(),e.hide(t.getContainer()),e.setStyle(t.id,"display",t.orgDisplay)},isHidden:function(){return!e.isHidden(this.id)},setProgressState:function(t,e,i){return this.onSetProgressState.dispatch(this,t,e,i),t},load:function(t){var e,i=this,n=i.getElement();return n?(t=t||{},t.load=!0,e=i.setContent(l(n.value)?n.value:n.innerHTML,t),t.element=n,t.no_events||i.onLoadContent.dispatch(i,t),t.element=n=null,e):void 0},save:function(t){var i,n,s=this,r=s.getElement();if(r&&s.initialized)return t=t||{},t.save=!0,t.no_events||(s.undoManager.typing=!1,s.undoManager.add()),t.element=r,i=t.content=s.getContent(t),t.no_events||s.onSaveContent.dispatch(s,t),i=t.content,/TEXTAREA|INPUT/i.test(r.nodeName)?r.value=i:(r.innerHTML=i,(n=e.getParent(s.id,"form"))&&o(n.elements,function(t){return t.name==s.id?(t.value=i,!1):void 0})),t.element=r=null,i},setContent:function(e,i){var n,s=this,o=s.getBody();return i=i||{},i.format=i.format||"html",i.set=!0,i.content=e,i.no_events||s.onBeforeSetContent.dispatch(s,i),e=i.content,t.isIE||0!==e.length&&!/^\s+$/.test(e)?("raw"!==i.format&&(e=new t.html.Serializer({},s.schema).serialize(s.parser.parse(e))),i.content=t.trim(e),s.dom.setHTML(o,i.content),i.no_events||s.onSetContent.dispatch(s,i),s.selection.normalize(),i.content):(n=s.settings.forced_root_block,e=n?"<"+n+'><br data-mce-bogus="1"></'+n+">":'<br data-mce-bogus="1">',o.innerHTML=e,s.selection.select(o,!0),s.selection.collapse(!0),void 0)},getContent:function(e){var i,n=this;return e=e||{},e.format=e.format||"html",e.get=!0,e.no_events||n.onBeforeGetContent.dispatch(n,e),i="raw"==e.format?n.getBody().innerHTML:n.serializer.serialize(n.getBody(),e),e.content=t.trim(i),e.no_events||n.onGetContent.dispatch(n,e),e.content},isDirty:function(){var e=this;return t.trim(e.startContent)!=t.trim(e.getContent({format:"raw",no_events:1}))&&!e.isNotDirty},getContainer:function(){var t=this;return t.container||(t.container=e.get(t.editorContainer||t.id+"_parent")),t.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return e.get(this.settings.content_element||this.id)},getWin:function(){var t,i=this;return i.contentWindow||(t=e.get(i.id+"_ifr"),t&&(i.contentWindow=t.contentWindow)),i.contentWindow},getDoc:function(){var t,e=this;return e.contentDocument||(t=e.getWin(),t&&(e.contentDocument=t.document)),e.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(t,e,i){var n=this,s=n.settings;return s.urlconverter_callback?n.execCallback("urlconverter_callback",t,i,!0,e):!s.convert_urls||i&&"LINK"==i.nodeName||0===t.indexOf("file:")?t:s.relative_urls?n.documentBaseURI.toRelative(t):t=n.documentBaseURI.toAbsolute(t,s.remove_script_host)},addVisual:function(t){var e=this,i=e.settings;t=t||e.getBody(),l(e.hasVisual)||(e.hasVisual=i.visual),o(e.dom.select("table,a",t),function(t){var n;switch(t.nodeName){case"TABLE":return n=e.dom.getAttrib(t,"border"),n&&"0"!=n||(e.hasVisual?e.dom.addClass(t,i.visual_table_class):e.dom.removeClass(t,i.visual_table_class)),void 0;case"A":return n=e.dom.getAttrib(t,"name"),n&&(e.hasVisual?e.dom.addClass(t,"mceItemAnchor"):e.dom.removeClass(t,"mceItemAnchor")),void 0}}),e.onVisualAid.dispatch(e,t,e.hasVisual)},remove:function(){var i=this,n=i.getContainer();i.removed=1,i.hide(),i.execCallback("remove_instance_callback",i),i.onRemove.dispatch(i),i.onExecCommand.listeners=[],t.remove(i),e.remove(n)},destroy:function(e){var n=this;n.destroyed||(e||(t.removeUnload(n.destroy),tinyMCE.onBeforeUnload.remove(n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),n.controlManager.destroy(),n.selection.destroy(),n.dom.destroy(),n.settings.content_editable||(i.clear(n.getWin()),i.clear(n.getDoc())),i.clear(n.getBody()),i.clear(n.formElement)),n.formElement&&(n.formElement.submit=n.formElement._mceOldSubmit,n.formElement._mceOldSubmit=null),n.contentAreaContainer=n.formElement=n.container=n.settings.content_element=n.bodyElement=n.contentDocument=n.contentWindow=null,n.selection&&(n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null),n.destroyed=1)},_addEvents:function(){function n(t,e){t.type,d.removed||d.onEvent.dispatch(d,t,e)!==!1&&d[g[t.fakeType||t.type]].dispatch(d,t,e)}function s(){var t=this,e=t.getDoc(),i=t.settings;if(r&&!i.readonly){t._refreshContentEditable();try{e.execCommand("styleWithCSS",0,!1)}catch(n){if(!t._isHidden())try{e.execCommand("useCSS",0,!0)}catch(n){}}if(!i.table_inline_editing)try{e.execCommand("enableInlineTableEditing",!1,!1)}catch(n){}if(!i.object_resizing)try{e.execCommand("enableObjectResizing",!1,!1)}catch(n){}}}function a(e){var i=null;return e.altKey||e.ctrlKey||e.metaKey?(o(d.shortcuts,function(n){return t.isMac&&n.ctrl!=e.metaKey||!t.isMac&&n.ctrl!=e.ctrlKey||n.alt!=e.altKey||n.shift!=e.shiftKey?void 0:e.keyCode==n.keyCode||e.charCode&&e.charCode==n.charCode?(i=n,!1):void 0}),i):i}function l(){d.undoManager.typing=!1,d.undoManager.add()}function u(){var t=d.dom.getAttribs(d.selection.getStart().cloneNode(!1));return function(){var e=d.selection.getStart();e!==d.getBody()&&(d.dom.removeAllAttribs(e),o(t,function(t){e.setAttributeNode(t.cloneNode(!0))}))}}function h(){var t=d.selection;return!t.isCollapsed()&&t.getStart()!=t.getEnd()}var c,d=this,f=d.settings,p=d.dom,g={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};if(o(g,function(t,i){switch(i){case"contextmenu":p.bind(d.getDoc(),i,n);break;case"paste":p.bind(d.getBody(),i,function(t){n(t)});break;case"submit":case"reset":p.bind(d.getElement().form||e.getParent(d.id,"form"),i,n);break;default:p.bind(f.content_editable?d.getBody():d.getDoc(),i,n)}}),p.bind(f.content_editable?d.getBody():r?d.getDoc():d.getWin(),"focus",function(){d.focus(!0)}),t.isGecko&&p.bind(d.getDoc(),"DOMNodeInserted",function(t){var e;t=t.target,1===t.nodeType&&"IMG"===t.nodeName&&(e=t.getAttribute("data-mce-src"))&&(t.src=d.documentBaseURI.toAbsolute(e))}),r&&(d.onBeforeExecCommand.add(s),d.onMouseDown.add(s)),d.onMouseUp.add(d.nodeChanged),d.onKeyUp.add(function(e,i){var n=i.keyCode;(n>=33&&36>=n||n>=37&&40>=n||13==n||45==n||46==n||8==n||t.isMac&&(91==n||93==n)||i.ctrlKey)&&d.nodeChanged()}),d.onKeyDown.add(function(t,e){if(8==e.keyCode){for(var i=t.selection.getRng().startContainer,n=t.selection.getRng().startOffset;i&&i.nodeType&&1!=i.nodeType&&i.parentNode;)i=i.parentNode;if(i&&i.parentNode&&"BLOCKQUOTE"===i.parentNode.tagName&&i.parentNode.firstChild==i&&0==n){t.formatter.toggle("blockquote",null,i.parentNode);var s=t.selection.getRng();s.setStart(i,0),s.setEnd(i,0),t.selection.setRng(s),t.selection.collapse(!1)}}}),d.onReset.add(function(){d.setContent(d.startContent,{format:"raw"})}),f.custom_shortcuts){for(f.custom_undo_redo_keyboard_shortcuts&&(d.addShortcut("ctrl+z",d.getLang("undo_desc"),"Undo"),d.addShortcut("ctrl+y",d.getLang("redo_desc"),"Redo")),d.addShortcut("ctrl+b",d.getLang("bold_desc"),"Bold"),d.addShortcut("ctrl+i",d.getLang("italic_desc"),"Italic"),d.addShortcut("ctrl+u",d.getLang("underline_desc"),"Underline"),c=1;6>=c;c++)d.addShortcut("ctrl+"+c,"",["FormatBlock",!1,"h"+c]);d.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),d.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),d.addShortcut("ctrl+9","",["FormatBlock",!1,"address"]),d.onKeyUp.add(function(t,e){var n=a(e);return n?i.cancel(e):void 0}),d.onKeyPress.add(function(t,e){var n=a(e);return n?i.cancel(e):void 0}),d.onKeyDown.add(function(t,e){var n=a(e);return n?(n.func.call(n.scope),i.cancel(e)):void 0})}t.isIE&&p.bind(d.getDoc(),"controlselect",function(t){var e,n=d.resizeInfo;t=t.target,"IMG"===t.nodeName&&(n&&p.unbind(n.node,n.ev,n.cb),p.hasClass(t,"mceItemNoResize")?(ev="resizestart",e=p.bind(t,"resizestart",i.cancel,i)):(ev="resizeend",e=p.bind(t,ev,function(t){var e;t=t.target,(e=p.getStyle(t,"width"))&&(p.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),p.setStyle(t,"width","")),(e=p.getStyle(t,"height"))&&(p.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),p.setStyle(t,"height",""))})),n=d.resizeInfo={node:t,ev:ev,cb:e})}),t.isOpera&&d.onClick.add(function(t,e){i.prevent(e)}),f.custom_undo_redo&&(p.bind(d.getDoc(),"focusout",function(){!d.removed&&d.undoManager.typing&&l()}),d.dom.bind(d.dom.getRoot(),"dragend",function(){l()}),d.onKeyUp.add(function(t,e){var i=e.keyCode;(i>=33&&36>=i||i>=37&&40>=i||13==i||45==i||e.ctrlKey)&&l()}),d.onKeyDown.add(function(e,n){var s,o=n.keyCode;return 8==o&&(s=d.getDoc().selection,s&&s.createRange&&s.createRange().item)?(d.undoManager.beforeChange(),e.dom.remove(s.createRange().item(0)),l(),i.cancel(n)):o>=33&&36>=o||o>=37&&40>=o||13==o||45==o?(t.isIE&&13==o&&d.undoManager.beforeChange(),d.undoManager.typing&&l(),void 0):((16>o||o>20)&&224!=o&&91!=o&&!d.undoManager.typing&&(d.undoManager.beforeChange(),d.undoManager.typing=!0,d.undoManager.add()),void 0)}),d.onMouseDown.add(function(){d.undoManager.typing&&l()})),t.isWebKit&&p.bind(d.getDoc(),"selectionchange",function(){d.selectionTimer&&(clearTimeout(d.selectionTimer),d.selectionTimer=0),d.selectionTimer=window.setTimeout(function(){d.nodeChanged()},50)}),t.isGecko&&(d.onKeyPress.add(function(t,e){var n;return 8!=e.keyCode&&46!=e.keyCode||!h()?void 0:(n=u(),d.getDoc().execCommand("delete",!1,null),n(),i.cancel(e))}),d.dom.bind(d.getDoc(),"cut",function(){var t;h()&&(t=u(),d.onKeyUp.addToTop(i.cancel,i),setTimeout(function(){t(),d.onKeyUp.remove(i.cancel,i)},0))}))},_refreshContentEditable:function(){var t,e,i=this;i._isHidden()&&(t=i.getBody(),e=t.parentNode,e.removeChild(t),e.appendChild(t),t.focus())},_isHidden:function(){var t;return r?(t=this.selection.getSel(),!t||!t.rangeCount||0==t.rangeCount):0}})}(tinymce),function(t){var e,i=t.each,n=!0,s=!1;t.EditorCommands=function(o){function r(t,e,i){var o;return t=t.toLowerCase(),(o=y.exec[t])?(o(t,e,i),n):s}function a(t){var e;return t=t.toLowerCase(),(e=y.state[t])?e(t):-1}function l(t){var e;return t=t.toLowerCase(),(e=y.value[t])?e(t):s}function u(t,e){e=e||"exec",i(t,function(t,n){i(n.toLowerCase().split(","),function(i){y[e][i]=t})})}function h(t,i,n){return i===e&&(i=s),n===e&&(n=null),o.getDoc().execCommand(t,i,n)}function c(t){return _.match(t)}function d(t,i){_.toggle(t,i?{value:i}:e)}function f(t){g=v.getBookmark(t)}function p(){v.moveToBookmark(g)}var g,m=o.dom,v=o.selection,y={state:{},exec:{},value:{}},b=o.settings,_=o.formatter;t.extend(this,{execCommand:r,queryCommandState:a,queryCommandValue:l,addCommands:u}),u({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){o.undoManager.add()},"Cut,Copy,Paste":function(e){var i,s=o.getDoc();try{h(e)}catch(r){i=n}(i||!s.queryCommandSupported(e))&&(t.isGecko?o.windowManager.confirm(o.getLang("clipboard_msg"),function(t){t&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):o.windowManager.alert(o.getLang("clipboard_no_support")))},unlink:function(t){v.isCollapsed()&&v.select(v.getNode()),h(t),v.collapse(s)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(t){var e=t.substring(7);i("left,center,right,full".split(","),function(t){e!=t&&_.remove("align"+t)}),d("align"+e),r("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(t){var e,i;h(t),e=m.getParent(v.getNode(),"ol,ul"),e&&(i=e.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(i.nodeName)&&(f(),m.split(i,e),p()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(t){d(t)},"ForeColor,HiliteColor,FontName":function(t,e,i){d(t,i)},FontSize:function(e,i,n){var s,o;n>=1&&7>=n&&(o=t.explode(b.font_size_style_values),s=t.explode(b.font_size_classes),n=s?s[n-1]||n:o[n-1]||n),d(e,n)},RemoveFormat:function(t){_.remove(t)},mceBlockQuote:function(){d("blockquote")},FormatBlock:function(t,e,i){return d(i||"p")},mceCleanup:function(){var t=v.getBookmark();o.setContent(o.getContent({cleanup:n}),{cleanup:n}),v.moveToBookmark(t)},mceRemoveNode:function(t,e,i){var s=i||v.getNode();s!=o.getBody()&&(f(),o.dom.remove(s,n),p())},mceSelectNodeDepth:function(t,e,i){var n=0;m.getParent(v.getNode(),function(t){return 1==t.nodeType&&n++==i?(v.select(t),s):void 0},o.getBody())},mceSelectNode:function(t,e,i){v.select(i)},mceInsertContent:function(e,i,n){var s,r,a,l,u,h,c,d,f,p,g,y,b,_;if(s=o.parser,r=new t.html.Serializer({},o.schema),b='<span id="mce_marker" data-mce-type="bookmark">﻿</span>',h={content:n,format:"html"},v.onBeforeSetContent.dispatch(v,h),n=h.content,-1==n.indexOf("{$caret}")&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,b),v.isCollapsed()||o.getDoc().execCommand("Delete",!1,null),a=v.getNode(),h={context:a.nodeName.toLowerCase()},u=s.parse(n,h),g=u.lastChild,"mce_marker"==g.attr("id"))for(c=g,g=g.prev;g;g=g.walk(!0))if(3==g.type||!m.isBlock(g.name)){g.parent.insert(c,g,"br"===g.name);break}if(h.invalid){for(v.setContent(b),a=o.selection.getNode(),l=o.getBody(),9==a.nodeType?a=g=l:g=a;g!==l;)a=g,g=g.parentNode;n=a==l?l.innerHTML:m.getOuterHTML(a),n=r.serialize(s.parse(n.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return r.serialize(u)}))),a==l?m.setHTML(l,n):m.setOuterHTML(a,n)}else n=r.serialize(u),g=a.firstChild,y=a.lastChild,!g||g===y&&"BR"===g.nodeName?m.setHTML(a,n):v.setContent(n);c=m.get("mce_marker"),d=m.getRect(c),f=m.getViewPort(o.getWin()),(d.y+d.h>f.y+f.h||d.y<f.y||d.x>f.x+f.w||d.x<f.x)&&(_=t.isIE?o.getDoc().documentElement:o.getBody(),_.scrollLeft=d.x,_.scrollTop=d.y-f.h+25),p=m.createRng(),g=c.previousSibling,g&&3==g.nodeType?p.setStart(g,g.nodeValue.length):(p.setStartBefore(c),p.setEndBefore(c)),m.remove(c),v.setRng(p),v.onSetContent.dispatch(v,h),o.addVisual()},mceInsertRawHTML:function(t,e,i){v.setContent("tiny_mce_marker"),o.setContent(o.getContent().replace(/tiny_mce_marker/g,function(){return i}))},mceSetContent:function(t,e,i){o.setContent(i)},"Indent,Outdent":function(t){var e,n,s;e=b.indentation,n=/[a-z%]+$/i.exec(e),e=parseInt(e),a("InsertUnorderedList")||a("InsertOrderedList")?h(t):i(v.getSelectedBlocks(),function(i){"outdent"==t?(s=Math.max(0,parseInt(i.style.paddingLeft||0)-e),m.setStyle(i,"paddingLeft",s?s+n:"")):m.setStyle(i,"paddingLeft",parseInt(i.style.paddingLeft||0)+e+n)})},mceRepaint:function(){if(t.isGecko)try{f(n),v.getSel()&&v.getSel().selectAllChildren(o.getBody()),v.collapse(n),p()}catch(e){}},mceToggleFormat:function(t,e,i){_.toggle(i)},InsertHorizontalRule:function(){o.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){o.hasVisual=!o.hasVisual,o.addVisual()},mceReplaceContent:function(t,e,i){o.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,v.getContent({format:"text"})))},mceInsertLink:function(t,e,i){var n;"string"==typeof i&&(i={href:i}),n=m.getParent(v.getNode(),"a"),i.href=i.href.replace(" ","%20"),n&&i.href||_.remove("link"),i.href&&_.apply("link",i,n)},selectAll:function(){var t=m.getRoot(),e=m.createRng();e.setStart(t,0),e.setEnd(t,t.childNodes.length),o.selection.setRng(e)}}),u({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(t){return c("align"+t.substring(7))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(t){return c(t)},mceBlockQuote:function(){return c("blockquote")},Outdent:function(){var t;if(b.inline_styles){if((t=m.getParent(v.getStart(),m.isBlock))&&parseInt(t.style.paddingLeft)>0)return n;if((t=m.getParent(v.getEnd(),m.isBlock))&&parseInt(t.style.paddingLeft)>0)return n}return a("InsertUnorderedList")||a("InsertOrderedList")||!b.inline_styles&&!!m.getParent(v.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(t){return m.getParent(v.getNode(),"insertunorderedlist"==t?"UL":"OL")}},"state"),u({"FontSize,FontName":function(t){var e,i=0;return(e=m.getParent(v.getNode(),"span"))&&(i="fontsize"==t?e.style.fontSize:e.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),i}},"value"),b.custom_undo_redo&&u({Undo:function(){o.undoManager.undo()},Redo:function(){o.undoManager.redo()}})}}(tinymce),function(t){var e=t.util.Dispatcher;t.UndoManager=function(i){function n(){return t.trim(i.getContent({format:"raw",no_events:1}))}var s,o,r=0,a=[];return s={typing:!1,onAdd:new e(s),onUndo:new e(s),onRedo:new e(s),beforeChange:function(){o=i.selection.getBookmark(2,!0)},add:function(t){var e,l,u=i.settings;
if(t=t||{},t.content=n(),l=a[r],l&&l.content==t.content)return null;if(a[r]&&(a[r].beforeBookmark=o),u.custom_undo_redo_levels&&a.length>u.custom_undo_redo_levels){for(e=0;e<a.length-1;e++)a[e]=a[e+1];a.length--,r=a.length}return t.bookmark=i.selection.getBookmark(2,!0),r<a.length-1&&(a.length=r+1),a.push(t),r=a.length-1,s.onAdd.dispatch(s,t),i.isNotDirty=0,t},undo:function(){var t;return s.typing&&(s.add(),s.typing=!1),r>0&&(t=a[--r],i.setContent(t.content,{format:"raw"}),i.selection.moveToBookmark(t.beforeBookmark),s.onUndo.dispatch(s,t)),t},redo:function(){var t;return r<a.length-1&&(t=a[++r],i.setContent(t.content,{format:"raw"}),i.selection.moveToBookmark(t.bookmark),s.onRedo.dispatch(s,t)),t},clear:function(){a=[],r=0,s.typing=!1},hasUndo:function(){return r>0||this.typing},hasRedo:function(){return r<a.length-1&&!this.typing}}}}(tinymce),function(t){function e(t){var e,i,n;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(t.nodeName)&&(e?(i=t.cloneNode(!1),i.appendChild(e),e=i):e=n=t.cloneNode(!1),e.removeAttribute("id"));while(t=t.parentNode);return e?{wrapper:e,inner:n}:void 0}function i(t,e){var i=e.ownerDocument.createRange();return i.setStart(t.endContainer,t.endOffset),i.setEndAfter(e),0==i.cloneContents().textContent.length}function n(t,e,i){var n,s;return e.isEmpty(i)?(n=e.getParent(i,"ul,ol"),e.getParent(n.parentNode,"ul,ol")||(e.split(n,i),s=e.create("p",0,'<br data-mce-bogus="1" />'),e.replace(s,i),t.select(s,1)),u):l}var s=t.dom.Event,o=t.isIE,r=t.isGecko,a=t.isOpera,l=(t.each,t.extend,!0),u=!1;t.create("tinymce.ForceBlocks",{ForceBlocks:function(t){var e,i=this,n=t.settings;i.editor=t,i.dom=t.dom,e=(n.forced_root_block||"p").toLowerCase(),n.element=e.toUpperCase(),t.onPreInit.add(i.setup,i)},setup:function(){function i(){var t,e,i,n,s,o,r,a=d.getStart(),l=u.getBody(),p=-16777215;if(a&&1===a.nodeType){for(;a!=l;){if(f[a.nodeName])return;a=a.parentNode}for(t=d.getRng(),t.setStart?(e=t.startContainer,i=t.startOffset,n=t.endContainer,s=t.endOffset):(t.item&&(t=u.getDoc().body.createTextRange(),t.moveToElementText(t.item(0))),tmpRng=t.duplicate(),tmpRng.collapse(!0),i=-1*tmpRng.move("character",p),tmpRng.collapsed||(tmpRng=t.duplicate(),tmpRng.collapse(!1),s=-1*tmpRng.move("character",p)-i)),a=l.firstChild;a;a)3===a.nodeType||1==a.nodeType&&!f[a.nodeName]?(o||(o=c.create(h.forced_root_block),a.parentNode.insertBefore(o,a)),r=a,a=a.nextSibling,o.appendChild(r)):(o=null,a=a.nextSibling);if(t.setStart)t.setStart(e,i),t.setEnd(n,s),d.setRng(t);else try{t=u.getDoc().body.createTextRange(),t.moveToElementText(l),t.collapse(!0),t.moveStart("character",i),s>0&&t.moveEnd("character",s),t.select()}catch(g){}u.nodeChanged()}}function n(t){var e,i,n=d.getRng(),s=c.create("div",null," "),o=c.getViewPort(t.getWin()).h;n.insertNode(e=c.create("br")),n.setStartAfter(e),n.setEndAfter(e),d.setRng(n),d.getSel().focusNode==e.previousSibling&&(d.select(c.insertAfter(c.doc.createTextNode(" "),e)),d.collapse(l)),c.insertAfter(s,e),i=c.getPos(s).y,c.remove(s),i>o&&t.getWin().scrollTo(0,i)}var a=this,u=a.editor,h=u.settings,c=u.dom,d=u.selection,f=u.schema.getBlockElements();h.forced_root_block&&(u.onKeyUp.add(i),u.onClick.add(i)),h.force_br_newlines&&o&&u.onKeyPress.add(function(t,e){var i;return 13==e.keyCode&&"LI"!=d.getNode().nodeName?(d.setContent('<br id="__" /> ',{format:"raw"}),i=c.get("__"),i.removeAttribute("id"),d.select(i),d.collapse(),s.cancel(e)):void 0}),h.force_p_newlines&&(o?(t.addUnload(function(){a._previousFormats=0}),u.onKeyPress.add(function(t,i){a._previousFormats=0,13==i.keyCode&&!i.shiftKey&&t.selection.isCollapsed()&&h.keep_styles&&(a._previousFormats=e(t.selection.getStart()))}),u.onKeyUp.add(function(t,e){if(13==e.keyCode&&!e.shiftKey){var i=t.selection.getStart(),n=a._previousFormats;!i.hasChildNodes()&&n&&(i=c.getParent(i,c.isBlock),i&&"LI"!=i.nodeName&&(i.innerHTML="",a._previousFormats?(i.appendChild(n.wrapper),n.inner.innerHTML="﻿"):i.innerHTML="﻿",d.select(i,1),d.collapse(!0),t.getDoc().execCommand("Delete",!1,null),a._previousFormats=0))}})):u.onKeyPress.add(function(t,e){13!=e.keyCode||e.shiftKey||a.insertPara(e)||s.cancel(e)}),r&&u.onKeyDown.add(function(t,e){8!=e.keyCode&&46!=e.keyCode||e.shiftKey||a.backspaceDelete(e,8==e.keyCode)})),t.isWebKit&&u.onKeyPress.add(function(t,e){13==e.keyCode&&(e.shiftKey||h.force_br_newlines&&!c.getParent(d.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))&&(n(t),s.cancel(e))}),o&&"P"!=h.element&&(u.onKeyPress.add(function(){a.lastElm=d.getNode().nodeName}),u.onKeyUp.add(function(t,e){var i,n=d.getNode(),s=t.getBody();1===s.childNodes.length&&"P"==n.nodeName?(n=c.rename(n,h.element),d.select(n),d.collapse(),t.nodeChanged()):13!=e.keyCode||e.shiftKey||"P"==a.lastElm||(i=c.getParent(n,"p"),i&&(c.rename(i,h.element),t.nodeChanged()))}))},getParentBlock:function(t){var e=this.dom;return e.getParent(t,e.isBlock)},insertPara:function(){function t(t,e){var i,n,s,o=[];if(t.innerHTML="",k.keep_styles){n=e;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(n.nodeName)&&(i=n.cloneNode(u),C.setAttrib(i,"id",""),o.push(i));while(n=n.parentNode)}if(o.length>0){for(s=o.length-1,i=t;s>=0;s--)i=i.appendChild(o[s]);return o[0].innerHTML=a?" ":"<br />",o[0]}t.innerHTML=a?" ":"<br />"}var e,s,o,r,h,c,d,f,p,g,m,v,y,b,_,w,A,x=this,j=x.editor,C=j.dom,T=j.getDoc(),k=j.settings,S=j.selection.getSel(),E=S.getRangeAt(0),D=T.body,M=C.getViewPort(j.getWin());if(j.undoManager.beforeChange(),e=T.createRange(),e.setStart(S.anchorNode,S.anchorOffset),e.collapse(l),s=T.createRange(),s.setStart(S.focusNode,S.focusOffset),s.collapse(l),o=e.compareBoundaryPoints(e.START_TO_END,s)<0,r=o?S.anchorNode:S.focusNode,h=o?S.anchorOffset:S.focusOffset,c=o?S.focusNode:S.anchorNode,d=o?S.focusOffset:S.anchorOffset,r===c&&/^(TD|TH)$/.test(r.nodeName))return"BR"==r.firstChild.nodeName&&C.remove(r.firstChild),0==r.childNodes.length?(j.dom.add(r,k.element,null,"<br />"),v=j.dom.add(r,k.element,null,"<br />")):(_=r.innerHTML,r.innerHTML="",j.dom.add(r,k.element,null,_),v=j.dom.add(r,k.element,null,"<br />")),E=T.createRange(),E.selectNodeContents(v),E.collapse(1),j.selection.setRng(E),u;if(r==D&&c==D&&D.firstChild&&j.dom.isBlock(D.firstChild)&&(r=c=r.firstChild,h=d=0,e=T.createRange(),e.setStart(r,0),s=T.createRange(),s.setStart(c,0)),T.body.hasChildNodes()||T.body.appendChild(C.create("br")),r="HTML"==r.nodeName?T.body:r,r="BODY"==r.nodeName?r.firstChild:r,c="HTML"==c.nodeName?T.body:c,c="BODY"==c.nodeName?c.firstChild:c,f=x.getParentBlock(r),p=x.getParentBlock(c),g=f?f.nodeName:k.element,_=x.dom.getParent(f,"li,pre"))return"LI"==_.nodeName?n(j.selection,x.dom,_):l;f&&("CAPTION"==f.nodeName||/absolute|relative|fixed/gi.test(C.getStyle(f,"position",1)))&&(g=k.element,f=null),p&&("CAPTION"==p.nodeName||/absolute|relative|fixed/gi.test(C.getStyle(f,"position",1)))&&(g=k.element,p=null),(/(TD|TABLE|TH|CAPTION)/.test(g)||f&&"DIV"==g&&/left|right/gi.test(C.getStyle(f,"float",1)))&&(g=k.element,f=p=null),m=f&&f.nodeName==g?f.cloneNode(0):j.dom.create(g),v=p&&p.nodeName==g?p.cloneNode(0):j.dom.create(g),v.removeAttribute("id"),/^(H[1-6])$/.test(g)&&i(E,f)&&(v=j.dom.create(k.element)),_=y=r;do{if(_==D||9==_.nodeType||x.dom.isBlock(_)||/(TD|TABLE|TH|CAPTION)/.test(_.nodeName))break;y=_}while(_=_.previousSibling?_.previousSibling:_.parentNode);_=b=c;do{if(_==D||9==_.nodeType||x.dom.isBlock(_)||/(TD|TABLE|TH|CAPTION)/.test(_.nodeName))break;b=_}while(_=_.nextSibling?_.nextSibling:_.parentNode);y.nodeName==g?e.setStart(y,0):e.setStartBefore(y),e.setEnd(r,h),m.appendChild(e.cloneContents()||T.createTextNode(""));try{s.setEndAfter(b)}catch(N){}return s.setStart(c,d),v.appendChild(s.cloneContents()||T.createTextNode("")),E=T.createRange(),y.previousSibling||y.parentNode.nodeName!=g?e.startContainer.nodeName==g&&0==e.startOffset?E.setStartBefore(e.startContainer):E.setStart(e.startContainer,e.startOffset):E.setStartBefore(y.parentNode),b.nextSibling||b.parentNode.nodeName!=g?E.setEnd(s.endContainer,s.endOffset):E.setEndAfter(b.parentNode),E.deleteContents(),a&&j.getWin().scrollTo(0,M.y),m.firstChild&&m.firstChild.nodeName==g&&(m.innerHTML=m.firstChild.innerHTML),v.firstChild&&v.firstChild.nodeName==g&&(v.innerHTML=v.firstChild.innerHTML),C.isEmpty(m)&&t(m,r),C.isEmpty(v)&&(A=t(v,c)),a&&parseFloat(opera.version())<9.5?(E.insertNode(m),E.insertNode(v)):(E.insertNode(v),E.insertNode(m)),v.normalize(),m.normalize(),j.selection.select(v,!0),j.selection.collapse(!0),w=j.dom.getPos(v).y,(w<M.y||w+25>M.y+M.h)&&j.getWin().scrollTo(0,w<M.y?w:w-M.h+25),j.undoManager.add(),u},backspaceDelete:function(e,i){var n,n,o,r,a,l=this,h=l.editor,c=h.getBody(),d=(h.dom,h.selection),f=d.getRng(),p=f.startContainer;if(!i&&f.collapsed&&1==p.nodeType&&f.startOffset==p.childNodes.length)for(a=new t.dom.TreeWalker(p.lastChild,p),n=p.lastChild;n;n=a.prev())if(3==n.nodeType)return f.setStart(n,n.nodeValue.length),f.collapse(!0),d.setRng(f),void 0;if(p&&h.dom.isBlock(p)&&!/^(TD|TH)$/.test(p.nodeName)&&i&&(0==p.childNodes.length||1==p.childNodes.length&&"BR"==p.firstChild.nodeName)){for(n=p;(n=n.previousSibling)&&!h.dom.isBlock(n););if(n){if(p!=c.firstChild){for(o=h.dom.doc.createTreeWalker(n,NodeFilter.SHOW_TEXT,null,u);r=o.nextNode();)n=r;f=h.getDoc().createRange(),f.setStart(n,n.nodeValue?n.nodeValue.length:0),f.setEnd(n,n.nodeValue?n.nodeValue.length:0),d.setRng(f),h.dom.remove(p)}return s.cancel(e)}}}})}(tinymce),function(t){var e=(t.DOM,t.dom.Event),i=t.each,n=t.extend;t.create("tinymce.ControlManager",{ControlManager:function(e,n){var s=this;n=n||{},s.editor=e,s.controls={},s.onAdd=new t.util.Dispatcher(s),s.onPostRender=new t.util.Dispatcher(s),s.prefix=n.prefix||e.id+"_",s._cls={},s.onPostRender.add(function(){i(s.controls,function(t){t.postRender()})})},get:function(t){return this.controls[this.prefix+t]||this.controls[t]},setActive:function(t,e){var i=null;return(i=this.get(t))&&i.setActive(e),i},setDisabled:function(t,e){var i=null;return(i=this.get(t))&&i.setDisabled(e),i},add:function(t){var e=this;return t&&(e.controls[t.id]=t,e.onAdd.dispatch(t,e)),t},createControl:function(t){var e,n=this,s=n.editor;switch(i(s.plugins,function(i){return i.createControl&&(e=i.createControl(t,n))?!1:void 0}),t){case"|":case"separator":return n.createSeparator()}return!e&&s.buttons&&(e=s.buttons[t])?n.createButton(t,e):n.add(e)},createDropMenu:function(e,i,s){var o,r,a,l,u=this,h=u.editor;return i=n({"class":"mceDropDown",constrain:h.settings.constrain_menus},i),i["class"]=i["class"]+" "+h.getParam("skin")+"Skin",(a=h.getParam("skin_variant"))&&(i["class"]+=" "+h.getParam("skin")+"Skin"+a.substring(0,1).toUpperCase()+a.substring(1)),e=u.prefix+e,l=s||u._cls.dropmenu||t.ui.DropMenu,o=u.controls[e]=new l(e,i),o.onAddItem.add(function(t,e){var i=e.settings;i.title=h.getLang(i.title,i.title),i.onclick||(i.onclick=function(){i.cmd&&h.execCommand(i.cmd,i.ui||!1,i.value)})}),h.onRemove.add(function(){o.destroy()}),t.isIE&&(o.onShowMenu.add(function(){h.focus(),r=h.selection.getBookmark(1)}),o.onHideMenu.add(function(){r&&(h.selection.moveToBookmark(r),r=0)})),u.add(o)},createListBox:function(i,s,o){function r(e){return e.settings.use_accessible_selects&&!t.isGecko}var a,l,u=this,h=u.editor;return u.get(i)?null:(s.title=h.translate(s.title),s.scope=s.scope||h,s.onselect||(s.onselect=function(t){h.execCommand(s.cmd,s.ui||!1,t||s.value)}),s=n({title:s.title,"class":"mce_"+i,scope:s.scope,control_manager:u},s),i=u.prefix+i,h.settings.use_native_selects||r(h)?a=new t.ui.NativeListBox(i,s):(l=o||u._cls.listbox||t.ui.ListBox,a=new l(i,s,h)),u.controls[i]=a,t.isWebKit&&a.onPostRender.add(function(t,i){e.add(i,"mousedown",function(){h.bookmark=h.selection.getBookmark(1)}),e.add(i,"focus",function(){h.selection.moveToBookmark(h.bookmark),h.bookmark=null})}),a.hideMenu&&h.onMouseDown.add(a.hideMenu,a),u.add(a))},createButton:function(e,i,s){var o,r,a=this,l=a.editor;return a.get(e)?null:(i.title=l.translate(i.title),i.label=l.translate(i.label),i.scope=i.scope||l,i.onclick||i.menu_button||(i.onclick=function(){l.execCommand(i.cmd,i.ui||!1,i.value)}),i=n({title:i.title,"class":"mce_"+e,unavailable_prefix:l.getLang("unavailable",""),scope:i.scope,control_manager:a},i),e=a.prefix+e,i.menu_button?(r=s||a._cls.menubutton||t.ui.MenuButton,o=new r(e,i,l),l.onMouseDown.add(o.hideMenu,o)):(r=a._cls.button||t.ui.Button,o=new r(e,i,l)),a.add(o))},createMenuButton:function(t,e,i){return e=e||{},e.menu_button=1,this.createButton(t,e,i)},createSplitButton:function(e,i,s){var o,r,a=this,l=a.editor;return a.get(e)?null:(i.title=l.translate(i.title),i.scope=i.scope||l,i.onclick||(i.onclick=function(t){l.execCommand(i.cmd,i.ui||!1,t||i.value)}),i.onselect||(i.onselect=function(t){l.execCommand(i.cmd,i.ui||!1,t||i.value)}),i=n({title:i.title,"class":"mce_"+e,scope:i.scope,control_manager:a},i),e=a.prefix+e,r=s||a._cls.splitbutton||t.ui.SplitButton,o=a.add(new r(e,i,l)),l.onMouseDown.add(o.hideMenu,o),o)},createColorSplitButton:function(e,i,s){var o,r,a,l=this,u=l.editor;return l.get(e)?null:(i.title=u.translate(i.title),i.scope=i.scope||u,i.onclick||(i.onclick=function(e){t.isIE&&(a=u.selection.getBookmark(1)),u.execCommand(i.cmd,i.ui||!1,e||i.value)}),i.onselect||(i.onselect=function(t){u.execCommand(i.cmd,i.ui||!1,t||i.value)}),i=n({title:i.title,"class":"mce_"+e,menu_class:u.getParam("skin")+"Skin",scope:i.scope,more_colors_title:u.getLang("more_colors")},i),e=l.prefix+e,r=s||l._cls.colorsplitbutton||t.ui.ColorSplitButton,o=new r(e,i,u),u.onMouseDown.add(o.hideMenu,o),u.onRemove.add(function(){o.destroy()}),t.isIE&&(o.onShowMenu.add(function(){u.focus(),a=u.selection.getBookmark(1)}),o.onHideMenu.add(function(){a&&(u.selection.moveToBookmark(a),a=0)})),l.add(o))},createToolbar:function(e,i,n){var s,o,r=this;return e=r.prefix+e,o=n||r._cls.toolbar||t.ui.Toolbar,s=new o(e,i,r.editor),r.get(e)?null:r.add(s)},createToolbarGroup:function(e,i,n){var s,o,r=this;return e=r.prefix+e,o=n||this._cls.toolbarGroup||t.ui.ToolbarGroup,s=new o(e,i,r.editor),r.get(e)?null:r.add(s)},createSeparator:function(e){var i=e||this._cls.separator||t.ui.Separator;return new i},setControlType:function(t,e){return this._cls[t.toLowerCase()]=e},destroy:function(){i(this.controls,function(t){t.destroy()}),this.controls=null}})}(tinymce),function(t){var e=t.util.Dispatcher,i=t.each,n=t.isIE,s=t.isOpera;t.create("tinymce.WindowManager",{WindowManager:function(t){var i=this;i.editor=t,i.onOpen=new e(i),i.onClose=new e(i),i.params={},i.features={}},open:function(e,o){var r,a,l,u,h=this,c="",d="modal"==h.editor.settings.dialog_type,f=t.DOM.getViewPort();e=e||{},o=o||{},a=s?f.w:screen.width,l=s?f.h:screen.height,e.name=e.name||"mc_"+(new Date).getTime(),e.width=parseInt(e.width||320),e.height=parseInt(e.height||240),e.resizable=!0,e.left=e.left||parseInt(a/2)-e.width/2,e.top=e.top||parseInt(l/2)-e.height/2,o.inline=!1,o.mce_width=e.width,o.mce_height=e.height,o.mce_auto_focus=e.auto_focus,d&&n&&(e.center=!0,e.help=!1,e.dialogWidth=e.width+"px",e.dialogHeight=e.height+"px",e.scroll=e.scrollbars||!1),i(e,function(e,i){t.is(e,"boolean")&&(e=e?"yes":"no"),/^(name|url)$/.test(i)||(c+=n&&d?(c?";":"")+i+":"+e:(c?",":"")+i+"="+e)}),h.features=e,h.params=o,h.onOpen.dispatch(h,e,o),u=e.url||e.file,u=t._addVer(u);try{n&&d?(r=1,window.showModalDialog(u,window,c)):r=window.open(u,e.name,c)}catch(p){}r||alert(h.editor.getLang("popup_blocked"))},close:function(t){t.close(),this.onClose.dispatch(this)},createInstance:function(e,i,n,s,o,r){var a=t.resolve(e);return new a(i,n,s,o,r)},confirm:function(t,e,i,n){n=n||window,e.call(i||this,n.confirm(this._decode(this.editor.getLang(t,t))))},alert:function(t,e,i,n){var s=this;n=n||window,n.alert(s._decode(s.editor.getLang(t,t))),e&&e.call(i||s)},resizeBy:function(t,e,i){i.resizeBy(t,e)},_decode:function(e){return t.DOM.decode(e).replace(/\\n/g,"\n")}})}(tinymce),function(t){t.Formatter=function(e){function i(t,e){return M.getParents(t,e,M.getRoot())}function n(t){return 1===t.nodeType&&("mceinline"===t.face||"mceinline"===t.style.fontFamily)}function s(t){return t?E[t]:E}function o(t,e){t&&("string"!=typeof t?D(t,function(t,e){o(e,t)}):(e=e.length?e:[e],D(e,function(t){t.deep===S&&(t.deep=!t.selector),t.split===S&&(t.split=!t.selector||t.inline),t.remove===S&&t.selector&&!t.inline&&(t.remove="none"),t.selector&&t.inline&&(t.mixed=!0,t.block_expand=!0),"string"==typeof t.classes&&(t.classes=t.classes.split(/\s+/))}),E[t]=e))}function r(i,o,r){function a(t){var e,i,n=t.startContainer,s=t.startOffset;if((1==n.nodeType||""===n.nodeValue)&&(n=1==n.nodeType?n.childNodes[s]:n))for(e=new I(n,n.parentNode),i=e.current();i;i=e.next())if(3==i.nodeType&&!v(i)){t.setStart(i,0);break}return t}function l(t,e){e=e||T,t&&(e.onformat&&e.onformat(t,e,o,r),D(e.styles,function(e,i){M.setStyle(t,i,m(e,o))}),D(e.attributes,function(e,i){M.setAttrib(t,i,m(e,o))}),D(e.classes,function(e){e=m(e,o),M.hasClass(t,e)||M.addClass(t,e)}))}function h(){function t(t,e){var i=new I(e);for(r=i.current();r;r=i.prev())if(r.childNodes.length>1||r==t)return r}var i=e.selection.getRng(),n=i.startContainer,s=i.endContainer;if(n!=s&&0==i.endOffset){var o=t(n,s),a=3==o.nodeType?o.length:o.childNodes.length;i.setEnd(o,a)}return i}function c(e,i,n,s,o){var r,a,l=[],u=-1,h=-1,c=-1;return D(e.childNodes,function(t,e){return"UL"===t.nodeName||"OL"===t.nodeName?(u=e,r=t,!1):void 0}),D(e.childNodes,function(t,e){"SPAN"===t.nodeName&&"bookmark"==M.getAttrib(t,"data-mce-type")&&(t.id==i.id+"_start"?h=e:t.id==i.id+"_end"&&(c=e))}),0>=u||u>h&&c>u?(D(t.grep(e.childNodes),o),0):(a=n.cloneNode(U),D(t.grep(e.childNodes),function(t,e){(u>h&&u>e||h>u&&e>u)&&(l.push(t),t.parentNode.removeChild(t))}),u>h?e.insertBefore(a,r):h>u&&e.insertBefore(a,r.nextSibling),s.push(a),D(l,function(t){a.appendChild(t)}),a)}function d(e,s){var r,a,h=[];r=T.inline||T.block,a=M.create(r),l(a),P.walk(e,function(e){function d(e){var g,m=e.nodeName.toLowerCase(),v=e.parentNode.nodeName.toLowerCase();return p(m,"br")?(f=0,T.block&&M.remove(e),void 0):T.wrapper&&u(e,i,o)?(f=0,void 0):T.block&&!T.wrapper&&C(m)?(e=M.rename(e,r),l(e),h.push(e),f=0,void 0):T.selector&&(D(w,function(t){"collapsed"in t&&t.collapsed!==S||M.is(e,t.selector)&&!n(e)&&(l(e,t),g=!0)}),!T.inline||g)?(f=0,void 0):(B(r,m)&&B(v,r)&&(3!==e.nodeType||1!==e.nodeValue.length||65279!==e.nodeValue.charCodeAt(0))?(f||(f=a.cloneNode(U),e.parentNode.insertBefore(f,e),h.push(f)),f.appendChild(e)):"li"==m&&s?f=c(e,s,a,h,d):(f=0,D(t.grep(e.childNodes),d),f=0),void 0)}var f;D(e,d)}),T.wrap_links===!1&&D(h,function(e){function i(e){var n,s,o;if("A"===e.nodeName){for(s=a.cloneNode(U),h.push(s),o=t.grep(e.childNodes),n=0;n<o.length;n++)s.appendChild(o[n]);e.appendChild(s)}D(t.grep(e.childNodes),i)}i(e)}),D(h,function(t){function e(t){var e=0;return D(t.childNodes,function(t){v(t)||x(t)||e++}),e}function s(t){var e,i;return D(t.childNodes,function(t){return 1!=t.nodeType||x(t)||n(t)?void 0:(e=t,U)}),e&&f(e,T)&&(i=e.cloneNode(U),l(i),M.replace(i,t,z),M.remove(e,1)),i||t}var r;if(r=e(t),(h.length>1||!L(t))&&0===r)return M.remove(t,1),void 0;if(T.inline||T.wrapper){if(T.exact||1!==r||(t=s(t)),D(w,function(e){D(M.select(e.inline,t),function(t){var i;if(e.wrap_links===!1){i=t.parentNode;do if("A"===i.nodeName)return;while(i=i.parentNode)}_(e,o,t,e.exact?t:null)})}),u(t.parentNode,i,o))return M.remove(t,1),t=0,z;T.merge_with_parents&&M.getParent(t.parentNode,function(e){return u(e,i,o)?(M.remove(t,1),t=0,z):void 0}),t&&T.merge_siblings!==!1&&(t=j(A(t),t),t=j(t,A(t,z)))}})}var g,y,w=s(i),T=w[0],S=N.isCollapsed();if(T)if(r)y=M.createRng(),y.setStartBefore(r),y.setEndAfter(r),d(b(y,w));else if(S&&T.inline&&!M.select("td.mceSelected,th.mceSelected").length)k("apply",i,o);else{var E=e.selection.getNode();e.selection.setRng(h()),g=N.getBookmark(),d(b(N.getRng(z),w),g),T.styles&&(T.styles.color||T.styles.textDecoration)&&(t.walk(E,q,"childNodes"),q(E)),N.moveToBookmark(g),N.setRng(a(N.getRng(z))),e.nodeChanged()}}function a(n,o,r){function a(t){var e,i,n,s,o=t.startContainer,r=t.startOffset;if(3==o.nodeType&&r>=o.nodeValue.length-1&&(o=o.parentNode,r=R(o)+1),1==o.nodeType)for(n=o.childNodes,o=n[Math.min(r,n.length-1)],e=new I(o),r>n.length-1&&e.next(),i=e.current();i;i=e.next())if(3==i.nodeType&&!v(i))return s=M.create("a",null,F),i.parentNode.insertBefore(s,i),t.setStart(i,0),N.setRng(t),M.remove(s),void 0}function l(e){var i,n,s;for(i=t.grep(e.childNodes),n=0,s=A.length;s>n&&!_(A[n],o,e,e);n++);if(j.deep)for(n=0,s=i.length;s>n;n++)l(i[n])}function c(t){var e;return D(i(t.parentNode).reverse(),function(t){var i;e||"_start"==t.id||"_end"==t.id||(i=u(t,n,o),i&&i.split!==!1&&(e=t))}),e}function d(t,e,i,n){var s,r,a,l,u,h;if(t){for(h=t.parentNode,s=e.parentNode;s&&s!=h;s=s.parentNode){for(r=s.cloneNode(U),u=0;u<A.length;u++)if(_(A[u],o,r,r)){r=0;break}r&&(a&&r.appendChild(a),l||(l=r),a=r)}!n||j.mixed&&L(t)||(e=M.split(t,e)),a&&(i.parentNode.insertBefore(a,i),l.appendChild(i))}return e}function f(t){return d(c(t),t,t,!0)}function p(t){var e=M.get(t?"_start":"_end"),i=e[t?"firstChild":"lastChild"];return x(i)&&(i=i[t?"firstChild":"lastChild"]),M.remove(e,!0),i}function g(t){var i,n;t=b(t,A,z),j.split&&(i=T(t,z),n=T(t),i!=n?(i=y(i,"span",{id:"_start","data-mce-type":"bookmark"}),n=y(n,"span",{id:"_end","data-mce-type":"bookmark"}),f(i),f(n),i=p(z),n=p()):i=n=f(i),t.startContainer=i.parentNode,t.startOffset=R(i),t.endContainer=n.parentNode,t.endOffset=R(n)+1),P.walk(t,function(t){D(t,function(t){l(t),1===t.nodeType&&"underline"===e.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===G(t.parentNode)&&_({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)})})}var m,w,A=s(n),j=A[0];return r?(w=M.createRng(),w.setStartBefore(r),w.setEndAfter(r),g(w),void 0):(N.isCollapsed()&&j.inline&&!M.select("td.mceSelected,th.mceSelected").length?k("remove",n,o):(m=N.getBookmark(),g(N.getRng(z)),N.moveToBookmark(m),j.inline&&h(n,o,N.getStart())&&a(N.getRng(!0)),e.nodeChanged()),void 0)}function l(t,e,i){var n=s(t);!h(t,e,i)||"toggle"in n[0]&&!n[0].toggle?r(t,e,i):a(t,e,i)}function u(t,e,i,n){function o(t,e,s){var o,r,a,l=e[s];if(e.onmatch)return e.onmatch(t,e,s);if(l)if(l.length===S){for(o in l)if(l.hasOwnProperty(o)){if(r="attributes"===s?M.getAttrib(t,o):g(t,o),n&&!r&&!e.exact)return;if((!n||e.exact)&&!p(r,m(l[o],i)))return}}else for(a=0;a<l.length;a++)if("attributes"===s?M.getAttrib(t,l[a]):g(t,l[a]))return e;return e}var r,a,l,u=s(e);if(u&&t)for(a=0;a<u.length;a++)if(r=u[a],f(t,r)&&o(t,r,"attributes")&&o(t,r,"styles")){if(l=r.classes)for(a=0;a<l.length;a++)if(!M.hasClass(t,l[a]))return;return r}}function h(t,e,i){function n(i){return i=M.getParent(i,function(i){return!!u(i,t,e,!0)}),u(i,t,e)}var s,o;if(i)return n(i);if(N.isCollapsed()){for(o=V.apply.length-1;o>=0;o--)if(V.apply[o].name==t)return!0;for(o=V.remove.length-1;o>=0;o--)if(V.remove[o].name==t)return!1;return n(N.getNode())}return i=N.getNode(),n(i)?z:(s=N.getStart(),s!=i&&n(s)?z:U)}function c(t,e){var i,n,s,o,r=[],a={};if(N.isCollapsed()){for(s=0;s<t.length;s++)for(n=V.remove.length-1;n>=0;n--)if(o=t[s],V.remove[n].name==o){a[o]=!0;break}for(n=V.apply.length-1;n>=0;n--)for(s=0;s<t.length;s++)o=t[s],a[o]||V.apply[n].name!=o||(a[o]=!0,r.push(o))}return i=N.getStart(),M.getParent(i,function(i){var n,s;for(n=0;n<t.length;n++)s=t[n],!a[s]&&u(i,s,e)&&(a[s]=!0,r.push(s))}),r}function d(t){var e,n,o,r,a,l=s(t);if(l)for(e=N.getStart(),n=i(e),r=l.length-1;r>=0;r--){if(a=l[r].selector,!a)return z;for(o=n.length-1;o>=0;o--)if(M.is(n[o],a))return z}return U}function f(t,e){return p(t,e.inline)?z:p(t,e.block)?z:e.selector?M.is(t,e.selector):void 0}function p(t,e){return t=t||"",e=e||"",t=""+(t.nodeName||t),e=""+(e.nodeName||e),t.toLowerCase()==e.toLowerCase()}function g(t,e){var i=M.getStyle(t,e);return("color"==e||"backgroundColor"==e)&&(i=M.toHex(i)),"fontWeight"==e&&700==i&&(i="bold"),""+i}function m(t,e){return"string"!=typeof t?t=t(e):e&&(t=t.replace(/%(\w+)/g,function(t,i){return e[i]||t})),t}function v(t){return t&&3===t.nodeType&&/^([\s\r\n]+|)$/.test(t.nodeValue)}function y(t,e,i){var n=M.create(e,i);return t.parentNode.insertBefore(n,t),n.appendChild(t),n}function b(t,e){function n(t,i,n,s){var o;for(s=s||M.getRoot();;){if(o=t.parentNode,o==s||!e[0].block_expand&&L(o))return t;for(a=o[i];a&&a!=t;a=a[n]){if(1==a.nodeType&&!x(a))return t;if(3==a.nodeType&&!v(a))return t}t=t.parentNode}return t}function s(t,e){for(e===S&&(e=3===t.nodeType?t.length:t.childNodes.length);t&&t.hasChildNodes();)t=t.childNodes[e],t&&(e=3===t.nodeType?t.length:t.childNodes.length);return{node:t,offset:e}}function o(n,s){var o,r,a,l;for(3==n.nodeType&&0==n.nodeValue.length&&n[s]&&(n=n[s]),o=i(n),r=0;r<o.length;r++)for(a=0;a<e.length;a++)if(l=e[a],!("collapsed"in l&&l.collapsed!==t.collapsed)&&M.is(o[r],l.selector))return o[r];return n}function r(t,n){var s;if(e[0].wrapper||(s=M.getParent(t,e[0].block)),s||(s=M.getParent(3==t.nodeType?t.parentNode:t,L)),s&&e[0].wrapper&&(s=i(s,"ul,ol").reverse()[0]||s),!s)for(s=t;s[n]&&!L(s[n])&&(s=s[n],!p(s,"br")););return s||t}var a,l,u,h=t.startContainer,c=t.startOffset,d=t.endContainer,f=t.endOffset;if(1==h.nodeType&&h.hasChildNodes()&&(l=h.childNodes.length-1,h=h.childNodes[c>l?l:c],3==h.nodeType&&(c=0)),1==d.nodeType&&d.hasChildNodes()&&(l=d.childNodes.length-1,d=d.childNodes[f>l?l:f-1],3==d.nodeType&&(f=d.nodeValue.length)),x(h.parentNode)&&(h=h.parentNode),x(h)&&(h=h.nextSibling||h),x(d.parentNode)&&(f=M.nodeIndex(d),d=d.parentNode),x(d)&&d.previousSibling&&(d=d.previousSibling,f=d.length),e[0].inline&&(u=s(d,f),u.node)){for(;u.node&&0===u.offset&&u.node.previousSibling;)u=s(u.node.previousSibling);u.node&&u.offset>0&&3===u.node.nodeType&&" "===u.node.nodeValue.charAt(u.offset-1)&&(u.offset>1?(d=u.node,d.splitText(u.offset-1)):u.node.previousSibling&&(d=u.node.previousSibling))}return(e[0].inline||e[0].block_expand)&&(h=n(h,"firstChild","nextSibling"),d=n(d,"lastChild","previousSibling")),e[0].selector&&e[0].expand!==U&&!e[0].inline&&(h=o(h,"previousSibling"),d=o(d,"nextSibling")),(e[0].block||e[0].selector)&&(h=r(h,"previousSibling"),d=r(d,"nextSibling"),e[0].block&&(L(h)||(h=n(h,"firstChild","nextSibling")),L(d)||(d=n(d,"lastChild","previousSibling")))),1==h.nodeType&&(c=R(h),h=h.parentNode),1==d.nodeType&&(f=R(d)+1,d=d.parentNode),{startContainer:h,startOffset:c,endContainer:d,endOffset:f}}function _(t,e,i,n){var s,o,r;if(!f(i,t))return U;if("all"!=t.remove)for(D(t.styles,function(t,s){t=m(t,e),"number"==typeof s&&(s=t,n=0),(!n||p(g(n,s),t))&&M.setStyle(i,s,""),r=1}),r&&""==M.getAttrib(i,"style")&&(i.removeAttribute("style"),i.removeAttribute("data-mce-style")),D(t.attributes,function(t,s){var o;if(t=m(t,e),"number"==typeof s&&(s=t,n=0),!n||p(M.getAttrib(n,s),t)){if("class"==s&&(t=M.getAttrib(i,s),t&&(o="",D(t.split(/\s+/),function(t){/mce\w+/.test(t)&&(o+=(o?" ":"")+t)}),o)))return M.setAttrib(i,s,o),void 0;"class"==s&&i.removeAttribute("className"),H.test(s)&&i.removeAttribute("data-mce-"+s),i.removeAttribute(s)}}),D(t.classes,function(t){t=m(t,e),(!n||M.hasClass(n,t))&&M.removeClass(i,t)}),o=M.getAttribs(i),s=0;s<o.length;s++)if(0!==o[s].nodeName.indexOf("_"))return U;return"none"!=t.remove?(w(i,t),z):void 0}function w(e,i){function n(t,e,i){return t=A(t,e,i),!t||"BR"==t.nodeName||L(t)}var s,o=e.parentNode;i.block&&(O?o==M.getRoot()&&(i.list_block&&p(e,i.list_block)||D(t.grep(e.childNodes),function(t){B(O,t.nodeName.toLowerCase())?s?s.appendChild(t):s=y(t,O):s=0})):L(e)&&!L(o)&&(n(e,U)||n(e.firstChild,z,1)||e.insertBefore(M.create("br"),e.firstChild),n(e,z)||n(e.lastChild,U,1)||e.appendChild(M.create("br")))),i.selector&&i.inline&&!p(i.inline,e)||M.remove(e,1)}function A(t,e,i){if(t)for(e=e?"nextSibling":"previousSibling",t=i?t:t[e];t;t=t[e])if(1==t.nodeType||!v(t))return t}function x(t){return t&&1==t.nodeType&&"bookmark"==t.getAttribute("data-mce-type")}function j(e,i){function n(t,e){function i(t){var e={};return D(M.getAttribs(t),function(i){var n=i.nodeName.toLowerCase();0!==n.indexOf("_")&&"style"!==n&&(e[n]=M.getAttrib(t,n))}),e}function n(t,e){var i,n;for(n in t)if(t.hasOwnProperty(n)){if(i=e[n],i===S)return U;if(t[n]!=i)return U;delete e[n]}for(n in e)if(e.hasOwnProperty(n))return U;return z}return t.nodeName!=e.nodeName?U:n(i(t),i(e))?n(M.parseStyle(M.getAttrib(t,"style")),M.parseStyle(M.getAttrib(e,"style")))?z:U:U}function s(t,e){for(o=t;o;o=o[e]){if(3==o.nodeType&&0!==o.nodeValue.length)return t;if(1==o.nodeType&&!x(o))return o}return t}var o,r;if(e&&i&&(e=s(e,"previousSibling"),i=s(i,"nextSibling"),n(e,i))){for(o=e.nextSibling;o&&o!=i;)r=o,o=o.nextSibling,e.appendChild(r);return M.remove(i),D(t.grep(i.childNodes),function(t){e.appendChild(t)}),e}return i}function C(t){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(t)}function T(t,e){var i,n,s;return i=t[e?"startContainer":"endContainer"],n=t[e?"startOffset":"endOffset"],1==i.nodeType&&(s=i.childNodes.length-1,!e&&n&&n--,i=i.childNodes[n>s?s:n]),i}function k(i,s,o){function l(){return V.apply.length||V.remove.length}function u(){V.apply=[],V.remove=[]}function h(t){D(V.apply.reverse(),function(e){r(e.name,e.vars,t),"forecolor"===e.name&&e.vars.value&&q(t.parentNode)}),D(V.remove.reverse(),function(e){a(e.name,e.vars,t)}),M.remove(t,1),u()}function c(t,i){var n=M.createRng();h(t),n.setStart(i,i.nodeValue.length),n.setEnd(i,i.nodeValue.length),N.setRng(n),e.nodeChanged()}var d,f=V[i],p=V["apply"==i?"remove":"apply"];for(d=f.length-1;d>=0;d--)if(f[d].name==s)return;for(f.push({name:s,vars:o}),d=p.length-1;d>=0;d--)p[d].name==s&&p.splice(d,1);if(l()&&(e.getDoc().execCommand("FontName",!1,"mceinline"),V.lastRng=N.getRng(),D(M.select("font,span"),function(t){var i;n(t)&&(i=N.getBookmark(),h(t),N.moveToBookmark(i),e.nodeChanged())}),!V.isListening&&l())){V.isListening=!0;var g=!1;D("onKeyDown,onKeyUp,onKeyPress,onMouseUp".split(","),function(i){e[i].addToTop(function(e,i){if(13==i.keyCode&&!i.shiftKey)return g=!0,void 0;if(l()&&!t.dom.RangeUtils.compareRanges(V.lastRng,N.getRng())){var s=!1;if(D(M.select("font,span"),function(t){var e;if(n(t)){for(s=!0,e=t.firstChild;e&&3!=e.nodeType;)e=e.firstChild;e?c(t,e):M.remove(t)}}),g&&!s){for(var o=N.getNode(),r=o;r&&3!=r.nodeType;)r=r.firstChild;if(r){for(o=r.parentNode;!L(o);)o=o.parentNode;c(o,r)}}("keyup"==i.type||"mouseup"==i.type)&&(u(),g=!1)}})})}}var S,E={},D=t.each,M=e.dom,N=e.selection,I=t.dom.TreeWalker,P=new t.dom.RangeUtils(M),B=e.schema.isValidChild,L=M.isBlock,O=e.settings.forced_root_block,R=M.nodeIndex,F="﻿",H=/^(src|href|style)$/,U=!1,z=!0,V={apply:[],remove:[]},G=function(t){var i;return e.dom.getParent(t,function(t){return i=e.dom.getStyle(t,"text-decoration"),i&&"none"!==i}),i},q=function(t){var i;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(i=G(t.parentNode),e.dom.getStyle(t,"color")&&i?e.dom.setStyle(t,"text-decoration",i):e.dom.getStyle(t,"textdecoration")===i&&e.dom.setStyle(t,"text-decoration",null))};t.extend(this,{get:s,register:o,apply:r,remove:a,toggle:l,match:h,matchAll:c,matchNode:u,canApply:d})}}(tinymce),tinymce.onAddEditor.add(function(t,e){function i(e,i){t.each(i,function(t,i){t&&r.setStyle(e,i,t)}),r.rename(e,"span")}function n(i,n){r=i.dom,a.convert_fonts_to_spans&&t.each(r.select("font,u,strike",n.node),function(t){s[t.nodeName.toLowerCase()](e.dom,t)})}var s,o,r,a=e.settings;a.inline_styles&&(o=t.explode(a.font_size_style_values),s={font:function(t,e){i(e,{backgroundColor:e.style.backgroundColor,color:e.color,fontFamily:e.face,fontSize:o[parseInt(e.size)-1]})},u:function(t,e){i(e,{textDecoration:"underline"})},strike:function(t,e){i(e,{textDecoration:"line-through"})}},e.onPreProcess.add(n),e.onSetContent.add(n),e.onInit.add(function(){e.selection.onSetContent.add(n)}))});