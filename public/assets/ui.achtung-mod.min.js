!function(t){t.fn.achtung=function(e){var i="string"==typeof e,n=Array.prototype.slice.call(arguments,0),s="achtung";return this.each(function(){var o=t.data(this,s);return i&&"_"===e.substring(0,1)?this:(!o&&!i&&t.data(this,s,new t.achtung(this))._init(n),o&&i&&t.isFunction(o[e])&&o[e].apply(o,n.slice(1)),void 0)})},t.achtung=function(e){var i,n=Array.prototype.slice.call(arguments,0);return e&&e.nodeType?(this.$container=t(e),void 0):(i=t("<div />"),i.achtung.apply(i,n))},t.extend(t.achtung,{version:"0.3.0",$overlay:!1,defaults:{timeout:10,onTimeout:null,onCloseButton:null,disableClose:!1,icon:!1,className:"",animateClassSwitch:!1,showEffects:{opacity:"toggle",height:"toggle"},hideEffects:{opacity:"toggle",height:"toggle"},showEffectDuration:500,hideEffectDuration:700}}),t.extend(t.achtung.prototype,{$container:!1,closeTimer:!1,options:{},_init:function(e){var i,n=this;e=t.isArray(e)?e:[],e.unshift(t.achtung.defaults),e.unshift({}),i=this.options=t.extend.apply(t,e),t.achtung.$overlay||(t.achtung.$overlay=t('<div id="achtung-overlay"></div>').appendTo(document.body)),i.disableClose||t('<span class="achtung-close-button ui-icon ui-icon-close" />').click(function(){t.isFunction(i.onCloseButton)&&i.onCloseButton.call(n),n.close()}).hover(function(){t(this).addClass("achtung-close-button-hover")},function(){t(this).removeClass("achtung-close-button-hover")}).prependTo(this.$container),this.changeIcon(i.icon,!0),i.message&&this.$container.append(t('<span class="achtung-message">'+i.message+"</span>")),i.className&&this.$container.addClass(i.className),i.css&&this.$container.css(i.css),this.$container.addClass("achtung").appendTo(t.achtung.$overlay),i.showEffects?this.$container.animate(i.showEffects,i.showEffectDuration):this.$container.show(),i.timeout>0&&this.timeout(i.timeout)},timeout:function(e){var i=this;this.closeTimer&&clearTimeout(this.closeTimer),this.closeTimer=setTimeout(function(){t.isFunction(i.options.onTimeout)?i.options.onTimeout.call(i):i.close()},1e3*e),this.options.timeout=e},changeClass:function(e){var i=this;this.options.className!==e&&this.$container.queue(function(){i.options.animateClassSwitch&&!/webkit/.test(navigator.userAgent.toLowerCase())&&t.isFunction(t.fn.switchClass)?i.$container.switchClass(i.options.className,e,500):(i.$container.removeClass(i.options.className),i.$container.addClass(e)),i.options.className=e,i.$container.dequeue()})},changeIcon:function(e,i){var n=this;if(i===!0&&e!==!1||this.options.icon!==e)return i||this.options.icon===!1?(this.$container.prepend(t('<span class="achtung-message-icon ui-icon '+e+'" />')),this.options.icon=e,void 0):e===!1?(this.$container.find(".achtung-message-icon").remove(),this.options.icon=!1,void 0):(this.$container.queue(function(){var i=t(".achtung-message-icon",n.$container);n.options.animateClassSwitch&&!/webkit/.test(navigator.userAgent.toLowerCase())&&t.isFunction(t.fn.switchClass)?i.switchClass(n.options.icon,e,500):(i.removeClass(n.options.icon),i.addClass(e)),n.options.icon=e,n.$container.dequeue()}),void 0)},changeMessage:function(e){this.$container.queue(function(){t(".achtung-message",t(this)).html(e),t(this).dequeue()})},update:function(t){t.className&&this.changeClass(t.className),t.css&&this.$container.css(t.css),"undefined"!=typeof t.icon&&this.changeIcon(t.icon),t.message&&this.changeMessage(t.message),t.timeout&&this.timeout(t.timeout)},close:function(){var e=this.options,i=this.$container;this.closeTimer&&clearTimeout(this.closeTimer),e.hideEffects?this.$container.animate(e.hideEffects,e.hideEffectDuration):this.$container.hide(),i.queue(function(){i.removeData("achtung"),i.remove(),t.achtung.$overlay&&t.achtung.$overlay.is(":empty")&&(t.achtung.$overlay.remove(),t.achtung.$overlay=!1),i.dequeue()})}})}(jQuery);