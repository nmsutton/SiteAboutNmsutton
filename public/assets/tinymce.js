var toggleEditor=function(t){tinyMCE.get(t)?tinyMCE.execCommand("mceRemoveControl",!1,t):tinyMCE.execCommand("mceAddControl",!1,t)};$.fn.tinymce=function(){return this.each(function(){tinyMCE.execCommand("mceAddControl",!0,this.id)})},tinyMCE.init({mode:"none",plugins:"advlist,inlinepopups,lists,media,paste,searchreplace,table,autolink,",theme:"advanced",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_buttons1:"formatselect,fontselect,fontsizeselect,bold,italic,underline,strikethrough,forecolor,backcolor,|,bullist,numlist,|,undo,redo,search,pastetext,pasteword",theme_advanced_buttons2:"justifyleft,justifycenter,justifyright,justifyfull,outdent,indent,|,charmap,|,table,tablecontrols,|,code,|,link,image,media,unlink",theme_advanced_buttons3:"",theme_advanced_resizing:!0,theme_advanced_show_current_color:!0,theme_advanced_default_background_color:"#FFCC99",setup:function(t){t.onKeyDown.add(function(t,e){if(13===e.keyCode&&e.shiftKey&&e.ctrlKey){var i,n,s,o,r,a=t.dom,l=t.selection,u=l.getRng();tinymce.isIE?(l.setContent('<br id="__"/>',{format:"raw"}),i=t.dom.get("__"),i.removeAttribute("id"),l.select(i),l.collapse()):(u.deleteContents(),i=a.create("br"),u.insertNode(i),u.setStartAfter(i),u.setEndAfter(i),l.setRng(u),l.getSel().focusNode===i.previousSibling&&(l.select(a.insertAfter(a.doc.createTextNode(" "),i)),l.collapse(1))),n=a.create("p"),n.textContent=" ",a.insertAfter(n,i),s=a.getPos(n).y,o=a.getSize(n).h,a.remove(n),r=a.getViewPort(t.getWin()),(s<r.y||s+o>r.y+r.h)&&t.getWin().scrollTo(0,s<r.y?s:s+o-r.h),tinymce.dom.Event.cancel(e)}}),t.onKeyDown.add(function(t,e){key_enter_shift(key_event(e))&&$(t.formElement).submit()})}}),$.editable.addInputType("mce",{element:function(t,e){var i=$('<textarea id="'+$(e).attr("id")+'_mce"/>');return t.rows?i.attr("rows",t.rows):i.height(t.height),t.cols?i.attr("cols",t.cols):i.width(t.width),$(this).append(i),i},plugin:function(t,e){tinyMCE.execCommand("mceAddControl",!0,$(e).attr("id")+"_mce")},submit:function(t,e){tinyMCE.triggerSave(),tinyMCE.execCommand("mceRemoveControl",!0,$(e).attr("id")+"_mce")},reset:function(t,e){tinyMCE.execCommand("mceRemoveControl",!0,$(e).attr("id")+"_mce"),e.reset()}});